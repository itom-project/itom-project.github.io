
<!DOCTYPE html>


<html lang="en" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>5.11. Roughness &#8212; itom Plugins</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=e353d410970836974a52" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=e353d410970836974a52" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.1.2/css/all.min.css?digest=e353d410970836974a52" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.1.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52" />

    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/doctools.js"></script>
    <script src="../../_static/sphinx_highlight.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'plugins/algorithms/roughness';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="5.12. X3P Input Output" href="x3pio.html" />
    <link rel="prev" title="5.10. RawImport filters" href="rawImport.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a class="skip-link" href="#main-content">Skip to main content</a>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <nav class="bd-header navbar navbar-expand-lg bd-navbar">
<div class="bd-header__inner bd-page-width">
  <label class="sidebar-toggle primary-toggle" for="__primary">
    <span class="fa-solid fa-bars"></span>
  </label>
  
  <div class="navbar-header-items__start">
    
      <div class="navbar-item">
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
    <p class="title logo__title">itom Plugins</p>
  
</a></div>
    
  </div>
  
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../grabbers.html">
                        Camera/ Grabber
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../actuators.html">
                        Motors/ Actuators
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../GDIO.html">
                        General Data IO
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../adconv.html">
                        AD-Converters
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../algorithms.html">
                        Algorithms/ Filters
                      </a>
                    </li>
                
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
        </div>
      
      
        <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/itom-project/plugins" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">
<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
  </button>
`);
</script>
    </div>
  

  
    <label class="sidebar-toggle secondary-toggle" for="__secondary">
      <span class="fa-solid fa-outdent"></span>
    </label>
  
</div>

    </nav>
  
  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          <div class="navbar-item"><nav class="navbar-nav">
  <p class="sidebar-header-items__title"
     role="heading"
     aria-level="1"
     aria-label="Site Navigation">
    Site Navigation
  </p>
  <ul class="bd-navbar-elements navbar-nav">
    
                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../grabbers.html">
                        Camera/ Grabber
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../actuators.html">
                        Motors/ Actuators
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../GDIO.html">
                        General Data IO
                      </a>
                    </li>
                

                    <li class="nav-item">
                      <a class="nav-link nav-internal" href="../adconv.html">
                        AD-Converters
                      </a>
                    </li>
                

                    <li class="nav-item current active">
                      <a class="nav-link nav-internal" href="../algorithms.html">
                        Algorithms/ Filters
                      </a>
                    </li>
                
  </ul>
</nav></div>
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">
<script>
document.write(`
  <button class="theme-switch-button btn btn-sm btn-outline-primary navbar-btn rounded-circle" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch" data-mode="light"><i class="fa-solid fa-sun"></i></span>
    <span class="theme-switch" data-mode="dark"><i class="fa-solid fa-moon"></i></span>
    <span class="theme-switch" data-mode="auto"><i class="fa-solid fa-circle-half-stroke"></i></span>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links navbar-nav"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/itom-project/plugins" title="GitHub" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><span><i class="fa-brands fa-github"></i></span>
            <label class="sr-only">GitHub</label></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item"><nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="BasicGPLFilters.html">5.1. Basic GPL Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="basicFilters.html">5.2. Basic Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataObjectArithmetic.html">5.3. DataObject Arithmetic</a></li>
<li class="toctree-l1"><a class="reference internal" href="dataObjectIO.html">5.4. DataObjectIO</a></li>
<li class="toctree-l1"><a class="reference internal" href="fftwFilters.html">5.5. FFTW-Filter</a></li>
<li class="toctree-l1"><a class="reference internal" href="fittingFilters.html">5.6. Fitting Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="fringeProj.html">5.7. Fringe Proj</a></li>
<li class="toctree-l1"><a class="reference internal" href="openCVFilters.html">5.8. OpenCV Filters</a></li>
<li class="toctree-l1"><a class="reference internal" href="pclTools.html">5.9. PclTools</a></li>
<li class="toctree-l1"><a class="reference internal" href="rawImport.html">5.10. RawImport filters</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">5.11. Roughness</a></li>
<li class="toctree-l1"><a class="reference internal" href="x3pio.html">5.12. X3P Input Output</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumbs">
  <ul class="bd-breadcrumbs" role="navigation" aria-label="Breadcrumb">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../algorithms.html" class="nav-link"><span class="section-number">5. </span>Algorithms/ Filters</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span class="section-number">5.11. </span>Roughness</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article" role="main">
                  
  <section id="roughness">
<h1><span class="section-number">5.11. </span>Roughness<a class="headerlink" href="#roughness" title="Permalink to this heading">#</a></h1>
<table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>Summary</strong>:</p></td>
<td><p><span>Algorithms for roughness evaluation</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>Type</strong>:</p></td>
<td><p><span>Algorithm</span></p></td>
</tr>
<tr class="row-odd"><td><p><strong>License</strong>:</p></td>
<td><p><span>LPGL licensed</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>Platforms</strong>:</p></td>
<td><p>Windows, Linux</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Author</strong>:</p></td>
<td><p><span>M. Gronle, ITO, University Stuttgart</span></p></td>
</tr>
</tbody>
</table>
<section id="overview">
<h2><span class="section-number">5.11.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">#</a></h2>
<p>This plugin contains algorithms for the 1D roughness evaluation.</p>
<p>The contained algorithms are:</p>
<ul class="simple">
<li><p>calcRoughnessProfile: divide the given profile row-by-row into roughness and waviness</p></li>
<li><p>evalRoughnessProfile: evaluate either the roughness or waviness based on various 1D roughness parameters (e.g. Rz, Ra…)</p></li>
<li><p>roughnessProfile: combination of the two algorithms above as well as a possible initial subtraction of a regression line</p></li>
<li><p>calcAbbottCurve: determination of the abbott curve based on the roughness or waviness</p></li>
</ul>
<p>Some algorithms the plugin ‘fittingFilters’ for a valid execution.</p>
<p>These filters are defined in the plugin:</p>
<ol class="arabic simple">
<li><p><a class="reference internal" href="#itom.algorithms.calcAbbottCurve" title="itom.algorithms.calcAbbottCurve"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calcAbbottCurve()</span></code></a></p></li>
<li><p><a class="reference internal" href="#itom.algorithms.calcRoughnessProfile" title="itom.algorithms.calcRoughnessProfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">calcRoughnessProfile()</span></code></a></p></li>
<li><p><a class="reference internal" href="#itom.algorithms.evalRoughnessProfile" title="itom.algorithms.evalRoughnessProfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">evalRoughnessProfile()</span></code></a></p></li>
<li><p><a class="reference internal" href="#itom.algorithms.getGaussianFilterKernel" title="itom.algorithms.getGaussianFilterKernel"><code class="xref py py-meth docutils literal notranslate"><span class="pre">getGaussianFilterKernel()</span></code></a></p></li>
<li><p><a class="reference internal" href="#itom.algorithms.roughnessProfile" title="itom.algorithms.roughnessProfile"><code class="xref py py-meth docutils literal notranslate"><span class="pre">roughnessProfile()</span></code></a></p></li>
</ol>
</section>
<section id="filters">
<h2><span class="section-number">5.11.2. </span>Filters<a class="headerlink" href="#filters" title="Permalink to this heading">#</a></h2>
<p>Detailed overview about all defined filters:</p>
<dl class="py function">
<dt class="sig sig-object py" id="itom.algorithms.calcAbbottCurve">
<span class="sig-prename descclassname"><span class="pre">itom.algorithms.</span></span><span class="sig-name descname"><span class="pre">calcAbbottCurve</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roughness</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">abbott</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">nr_of_endeffect_pixels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">histogram</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#itom.algorithms.calcAbbottCurve" title="Permalink to this definition">#</a></dt>
<dd><p>This filter calculates the Abbott firestone curve (as well as an optional histogram) of
a roughness or waviness profile, e.g. obtained from the filter ‘calcRoughnessProfile’.</p>
<p>The evaluation is done based on DIN EN ISO 4287:2010.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roughness</strong> (<em>itom.dataObject</em>) – real input object (1D or 2D, no unsigned data types) - must be either the output argument ‘roughness’ or ‘waviness’ from filter ‘calcRoughnessProfile’. The roughness is determined row-by-row. The axis units must be set to ‘mm’, ‘µm’ or ‘nm’.</p></li>
<li><p><strong>abbott</strong> (<em>itom.dataObject</em>) – abbott firestone curve with a horizontal step width of 1% (float64, size: Mx100 for M rows in the input object.</p></li>
<li><p><strong>nr_of_endeffect_pixels</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>nr of pixels at both sides of the profile that contain wrong values to the final length of the convolution filter kernel. Skip these pixels in any evaluation (see DIN EN ISO 16610-21, 4.3; DIN EN ISO 16610-28 will show more information when it is released in a final version)</p>
<div class="line-block">
<div class="line"><em>Value range: [0, inf], Default: 0</em></div>
</div>
</p></li>
<li><p><strong>histogram</strong> (<em>itom.dataObject</em><em>, </em><em>optional</em>) – optional histogram with 100 buckets (int32, 1x100). Only the first line is evaluated.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="itom.algorithms.calcRoughnessProfile">
<span class="sig-prename descclassname"><span class="pre">itom.algorithms.</span></span><span class="sig-name descname"><span class="pre">calcRoughnessProfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">roughness</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">waviness</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ls</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periodicity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_factor</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#itom.algorithms.calcRoughnessProfile" title="Permalink to this definition">#</a></dt>
<dd><p>calculate the roughness and waviness profile based in a given real input data object.</p>
<p>The roughness and waviness profile is determined row-by-row from the given input object that is filtered using
one or two gaussian convolution operations. The gaussian filters are choosen such that a transmission of 50% is
obtained at the given cut-off wavelength levels.</p>
<p>The waviness is a lowpass of the input data cut at the cut-off wavelength Lc.
The roughness is the obtained by the difference between input and waviness. Additionally a lowpass is applied
at the cut-off wavelength Ls (if Ls &gt; 0.0).</p>
<p>You need to define if your profile is an open, non-periodic profiel or a closed, periodic profile. In the latter case
the evaluation is only implemented by a convolution based algorithm, in the first case one can choose between the fast
dft-implementation or the convolution-based implementation. If ‘mode’ is set to ‘auto’, lowpass filter operations with
big wavelengths are evaluated using the dft-approach (Lc) while the high-frequency cut-off Ls is done using the convolution operation.</p>
<p>In order to guarantee an efficient algorithm, the gaussian filter kernel will be cut after a certain length. This length can be
controlled using the parameter ‘cutoff_factor’.</p>
<p>This filter is implemented based on DIN EN ISO 16610-21:2013.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>itom.dataObject</em>) – real input object (1D or 2D). The roughness is determined row-by-row. The axis units must be set to ‘mm’, ‘µm’ or ‘nm’.</p></li>
<li><p><strong>roughness</strong> (<em>itom.dataObject</em>) – roughness output object of the same size than the input object. Type is float64.</p></li>
<li><p><strong>waviness</strong> (<em>itom.dataObject</em>) – waviness output object of the same size than the input object. Type is float64.</p></li>
<li><p><strong>Lc</strong> (<em>float</em>) – <p>cut-off wavelength in µm for the separation between the waviness and roughness</p>
<div class="line-block">
<div class="line"><em>Value range: [10, 100000], Default: 80</em></div>
</div>
</p></li>
<li><p><strong>Ls</strong> (<em>float</em>) – <p>short cut-off wavelength in µm for the separation between roughness and further high-frequency components (set 0.0 to omit this filtering)</p>
<div class="line-block">
<div class="line"><em>Value range: [0, 25], Default: 2.5</em></div>
</div>
</p></li>
<li><p><strong>mode</strong> (<em>str</em><em>, </em><em>optional</em>) – <p>mode of determination: convolution, dft or auto (auto-selection of both methods)</p>
<div class="line-block">
<div class="line"><em>Match: [“auto”, “dft”, “convolution”], Default: “auto”</em></div>
</div>
</p></li>
<li><p><strong>periodicity</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>0: non periodic profile (default), 1: periodic profile (not implemented yet)</p>
<div class="line-block">
<div class="line"><em>Value range: [0, 1], Default: 0</em></div>
</div>
</p></li>
<li><p><strong>cutoff_factor</strong> (<em>float</em><em>, </em><em>optional</em>) – <p>quality factor for the convolution based calculation. The convolution kernel is set to zero for indices &gt; cutoff-wavelength * cutoff_factor. See ISO 16610-21:2013 A.5: 0.5 for general purpose, high precision: 0.6, reference software: 1.0</p>
<div class="line-block">
<div class="line"><em>Value range: [0.5, 1], Default: 0.6</em></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>nr_of_endeffect_pixels - nr of pixels at both sides of the profile that contain wrong values to the final length of the convolution filter kernel. Skip these pixels in any evaluation (see DIN EN ISO 16610-21, 4.3; DIN EN ISO 16610-28 will show more information when it is released in a final version)</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="itom.algorithms.evalRoughnessProfile">
<span class="sig-prename descclassname"><span class="pre">itom.algorithms.</span></span><span class="sig-name descname"><span class="pre">evalRoughnessProfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">roughness</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lc</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">nr_of_endeffect_pixels</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_length_mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">result_detailed</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mr_range</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#itom.algorithms.evalRoughnessProfile" title="Permalink to this definition">#</a></dt>
<dd><p>Evaluates given roughness or waviness profiles for a specific roughness profile parameter.</p>
<p>The given roughness data is evaluated line by line. If only one line is evaluated, ‘result’ contains:</p>
<p>(mean-value-over-all-samples, min-value-over-all-samples, max-value-over-all-samples)</p>
<p>The result values are always in µm. In case of Rt (or Wt), the evaluation is not separated to various samples, therefore mean, min and max contain the same values.</p>
<p>If multiple lines are evaluated, the result contains the</p>
<p>(mean-value-over-all-lines, min-value, max-value, std-dev),
where min-value, max-value and std-dev are calculated over the mean-values of all lines.</p>
<p>The evaluation is done based on DIN EN ISO 4287:2010, the separation of different sample lengths is based on DIN EN ISO 4288:1997.</p>
<p>Possible roughness parameters are Rp, Rv, Rz, Rt, Ra, Rq, Rsk, Rku, Rdq, Rda, Rdc. If you pass the waviness profile instead of the roughness profile
the parameters are then Wp, Wv, Wz, Wt, Wa, Wq, Wsk, Wku, Wdq, Wda, Wdc.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>roughness</strong> (<em>itom.dataObject</em>) – real input object (1D or 2D, no unsigned data types) - must be either the output argument ‘roughness’ or ‘waviness’ from filter ‘calcRoughnessProfile’. The roughness is determined row-by-row. The axis units must be set to ‘mm’, ‘µm’ or ‘nm’.</p></li>
<li><p><strong>param</strong> (<em>str</em>) – <p>roughness or waviness parameter to determine</p>
<div class="line-block">
<div class="line"><em>Match: [“Rp”, “Rv”, “Rz”, “Rt”, “Ra”, “Rq”, “Rsk”, “Rku”, “Rdq”, “Rda”, “Rdc”, “Wp”, “Wv”, “Wz”, “Wt”, “Wa”, “Wq”, “Wsk”, “Wku”, “Wdq”, “Wda”, “Wdc”, “Pp”, “Pv”, “Pz”, “Pt”, “Pa”, “Pq”, “Psk”, “Pku”, “Pdq”, “Pda”, “Pdc”], Default: “Ra”</em></div>
</div>
</p></li>
<li><p><strong>Lc</strong> (<em>float</em>) – <p>cut-off wavelength in µm used for the separation between the waviness and roughness</p>
<div class="line-block">
<div class="line"><em>Value range: [10, 100000], Default: 80</em></div>
</div>
</p></li>
<li><p><strong>nr_of_endeffect_pixels</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>nr of pixels at both sides of the profile that contain wrong values to the final length of the convolution filter kernel. Skip these pixels in any evaluation (see DIN EN ISO 16610-21, 4.3; DIN EN ISO 16610-28 will show more information when it is released in a final version)</p>
<div class="line-block">
<div class="line"><em>Value range: [0, inf], Default: 0</em></div>
</div>
</p></li>
<li><p><strong>sampling_length_mode</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>mode how to split the measurement length (ml) into different sampling lengths (sl): 0: split ml into five samples (warn if the sl does not correspond to Lc), 1: split ml into n samples whose length is Lc, 2: same as 1 but only use the first 5 sampling lengths.</p>
<div class="line-block">
<div class="line"><em>Value range: [0, 2], Default: 0</em></div>
</div>
</p></li>
<li><p><strong>result_detailed</strong> (<em>itom.dataObject</em><em>, </em><em>optional</em>) – returns a Nx3 float64 data object will the mean,min and max roughness value for each evaluated line (only interesting if input contains more than one line)</p></li>
<li><p><strong>mr_range</strong> (<em>Tuple</em><em>[</em><em>int</em><em>,</em><em>int</em><em>] </em><em>(</em><em>range</em><em> [</em><em>v1</em><em>,</em><em>v2</em><em>)</em><em>)</em><em>, </em><em>optional</em>) – <p>[min,max] range in percent for the parameter Rdc or Wdc (height difference between two levels of the Abbott-Firstone-Curve</p>
<div class="line-block">
<div class="line"><em>, Value range: [0, 100], Default: [20, 80]</em></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>result - resulting values. See docstring of filter.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[float]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>nr_of_samples - Number of evaluated samples per line (5 is the desired value with respect to DIN EN ISO 4288), Rt is evaluated over the whole measurement range, therefore nr_of_samples is 1.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="itom.algorithms.getGaussianFilterKernel">
<span class="sig-prename descclassname"><span class="pre">itom.algorithms.</span></span><span class="sig-name descname"><span class="pre">getGaussianFilterKernel</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">kernel</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_wavelength</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">spacing</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">cutoff_factor</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#itom.algorithms.getGaussianFilterKernel" title="Permalink to this definition">#</a></dt>
<dd><p>returns the gaussian filter kernel as used by calcRoughnessProfile, based on EN ISO 11562</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>kernel</strong> (<em>itom.dataObject</em>) – kernel data object that contains the kernel after the call.</p></li>
<li><p><strong>cutoff_wavelength</strong> (<em>float</em>) – <p>cut-off wavelength in µm</p>
<div class="line-block">
<div class="line"><em>Value range: [0.0001, 100000], Default: 80</em></div>
</div>
</p></li>
<li><p><strong>spacing</strong> (<em>float</em>) – <p>spacing in µm between two adjacent pixels</p>
<div class="line-block">
<div class="line"><em>Value range: [0, inf], Default: 1</em></div>
</div>
</p></li>
<li><p><strong>cutoff_factor</strong> (<em>float</em><em>, </em><em>optional</em>) – <p>quality factor for the length of the filter kernel. The kernel is set to zero for indices &gt; cutoff-wavelength * cutoff_factor. See ISO 16610-21:2013 A.5: 0.5 for general purpose, high precision: 0.6, reference software: 1.0</p>
<div class="line-block">
<div class="line"><em>Value range: [0.5, 1], Default: 0.6</em></div>
</div>
</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py function">
<dt class="sig sig-object py" id="itom.algorithms.roughnessProfile">
<span class="sig-prename descclassname"><span class="pre">itom.algorithms.</span></span><span class="sig-name descname"><span class="pre">roughnessProfile</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">input</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">param</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Lc</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">Ls</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">remove_form</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">periodicity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">cutoff_factor</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sampling_length_mode</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">mr_range</span></span></em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#itom.algorithms.roughnessProfile" title="Permalink to this definition">#</a></dt>
<dd><p>Calculate a profile roughness parameter for each line in the given input object.</p>
<p>The evaluation is done based on DIN EN ISO 4287:2010, the separation of different sample lengths is based on DIN EN ISO 4288:1997.</p>
<p>This filter is a thre-step filter, based on the single filters ‘subtract1DRegression’ from the plugin ‘FittingFilters’
and ‘calcRoughnessProfile’ as well as ‘evalRoughnessProfile’. The first is an optional filter to remove the form of the raw signal.
The second filter splits the raw signal into the waviness and roughness signal (given by the cut-off wavelengths Lc and Ls).
The last filter evaluates the given roughness parameter and returns the result. For more information see the description of the single filters.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>input</strong> (<em>itom.dataObject</em>) – real input object (1D or 2D). The roughness is determined row-by-row. The axis units must be set to ‘mm’, ‘µm’ or ‘nm’.</p></li>
<li><p><strong>param</strong> (<em>str</em>) – <p>roughness parameter to determine</p>
<div class="line-block">
<div class="line"><em>Match: [“Rp”, “Rv”, “Rz”, “Rt”, “Ra”, “Rq”, “Rsk”, “Rku”, “Rdq”, “Rda”, “Rdc”, “Wv”, “Wz”, “Wt”, “Wa”, “Wq”, “Wsk”, “Wku”, “Wdq”, “Wda”, “Wdc”], Default: “Ra”</em></div>
</div>
</p></li>
<li><p><strong>Lc</strong> (<em>float</em>) – <p>cut-off wavelength in µm for the separation between the waviness and roughness</p>
<div class="line-block">
<div class="line"><em>Value range: [10, 100000], Default: 80</em></div>
</div>
</p></li>
<li><p><strong>Ls</strong> (<em>float</em>) – <p>short cut-off wavelength in µm for the separation between roughness and further high-frequency components (set 0.0 to omit this filtering)</p>
<div class="line-block">
<div class="line"><em>Value range: [0, 25], Default: 2.5</em></div>
</div>
</p></li>
<li><p><strong>remove_form</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>0: no form is subtracted from input as first step, else: a polynomial form of given order (1: line) is fitted and removed as first step (requires filter plugin ‘FittingFilters’)</p>
<div class="line-block">
<div class="line"><em>Value range: [0, 5], Default: 1</em></div>
</div>
</p></li>
<li><p><strong>periodicity</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>0: non periodic profile (default), 1: periodic profile (not implemented yet)</p>
<div class="line-block">
<div class="line"><em>Value range: [0, 1], Default: 0</em></div>
</div>
</p></li>
<li><p><strong>cutoff_factor</strong> (<em>float</em><em>, </em><em>optional</em>) – <p>quality factor for the convolution based calculation. The convolution kernel is set to zero for indices &gt; cutoff-wavelength * cutoff_factor. See ISO 16610-21:2013 A.5: 0.5 for general purpose, high precision: 0.6, reference software: 1.0</p>
<div class="line-block">
<div class="line"><em>Value range: [0.5, 1], Default: 0.6</em></div>
</div>
</p></li>
<li><p><strong>sampling_length_mode</strong> (<em>int</em><em>, </em><em>optional</em>) – <p>mode how to split the measurement length (ml) into different sampling lengths (sl): 0: split ml into five samples (warn if the sl does not correspond to Lc), 1: split ml into n samples whose length is Lc, 2: same as 1 but only use the first 5 sampling lengths.</p>
<div class="line-block">
<div class="line"><em>Value range: [0, 1], Default: 0</em></div>
</div>
</p></li>
<li><p><strong>mr_range</strong> (<em>Tuple</em><em>[</em><em>int</em><em>,</em><em>int</em><em>] </em><em>(</em><em>range</em><em> [</em><em>v1</em><em>,</em><em>v2</em><em>)</em><em>)</em><em>, </em><em>optional</em>) – <p>[min,max] range in percent for the parameter Rdc or Wdc (height difference between two levels of the Abbott-Firstone-Curve</p>
<div class="line-block">
<div class="line"><em>, Value range: [0, 100], Default: [20, 80]</em></div>
</div>
</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>result - resulting values. See docstring of filter.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>Sequence[float]</p>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>nr_of_samples - Number of evaluated samples per line (5 is the desired value with respect to DIN EN ISO 4288), Rt is evaluated over the whole measurement range, therefore nr_of_samples is 1.</p>
</dd>
<dt class="field-odd">Return type<span class="colon">:</span></dt>
<dd class="field-odd"><p>int</p>
</dd>
</dl>
</dd></dl>

</section>
</section>


                </article>
              
              
              
                <footer class="bd-footer-article">
                  
<div class="footer-article-items footer-article__inner">
  
    <div class="footer-article-item"><!-- Previous / next buttons -->
<div class="prev-next-area">
    <a class="left-prev"
       href="rawImport.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">5.10. </span>RawImport filters</p>
      </div>
    </a>
    <a class="right-next"
       href="x3pio.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">5.12. </span>X3P Input Output</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div></div>
  
</div>

                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">

  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">5.11.1. Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filters">5.11.2. Filters</a><ul class="visible nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#itom.algorithms.calcAbbottCurve"><code class="docutils literal notranslate"><span class="pre">calcAbbottCurve()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#itom.algorithms.calcRoughnessProfile"><code class="docutils literal notranslate"><span class="pre">calcRoughnessProfile()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#itom.algorithms.evalRoughnessProfile"><code class="docutils literal notranslate"><span class="pre">evalRoughnessProfile()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#itom.algorithms.getGaussianFilterKernel"><code class="docutils literal notranslate"><span class="pre">getGaussianFilterKernel()</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#itom.algorithms.roughnessProfile"><code class="docutils literal notranslate"><span class="pre">roughnessProfile()</span></code></a></li>
</ul>
</li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">
  <div class="tocsection sourcelink">
    <a href="../../_sources/plugins/algorithms/roughness.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=e353d410970836974a52"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=e353d410970836974a52"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">
  <p class="copyright">
    
      © Copyright 2011-2023, Institut für Technische Optik (ITO), University Stuttgart. Bug report: https://github.com/itom-project/plugins/issues.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">
  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.0.1.
    <br/>
  </p>
</div>
      
    </div>
  
  
    <div class="footer-items__end">
      
        <div class="footer-item"><p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.13.3.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>