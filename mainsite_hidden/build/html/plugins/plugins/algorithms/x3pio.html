

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>5.11. X3P Input Output &mdash; itom Documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="5.10. Roughness" href="roughness.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> itom Plugins
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../grabbers.html">1. Camera/ Grabber</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actuators.html">2. Motors/ Actuators</a></li>
<li class="toctree-l1"><a class="reference internal" href="../GDIO.html">3. General Data IO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../adconv.html">4. AD-Converters</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../algorithms.html">5. Algorithms/ Filters</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="BasicGPLFilters.html">5.1. Basic GPL Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="basicFilters.html">5.2. Basic Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataObjectArithmetic.html">5.3. DataObject Arithmetic</a></li>
<li class="toctree-l2"><a class="reference internal" href="dataObjectIO.html">5.4. DataObjectIO</a></li>
<li class="toctree-l2"><a class="reference internal" href="fittingFilters.html">5.5. Fitting Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="openCVFilters.html">5.6. OpenCV Filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="openCVFiltersNonFree.html">5.7. OpenCV Filters (non free)</a></li>
<li class="toctree-l2"><a class="reference internal" href="pclTools.html">5.8. PclTools</a></li>
<li class="toctree-l2"><a class="reference internal" href="rawImport.html">5.9. RawImport filters</a></li>
<li class="toctree-l2"><a class="reference internal" href="roughness.html">5.10. Roughness</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">5.11. X3P Input Output</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">5.11.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#filters">5.11.2. Filters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation">5.11.3. Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#bugfix-for-codesynthesis-xsd-4-0-0">5.11.4. Bugfix for CodeSynthesis XSD 4.0.0</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changelog">5.11.5. Changelog</a></li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">itom Plugins</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../algorithms.html">5. Algorithms/ Filters</a> &raquo;</li>
        
      <li>5.11. X3P Input Output</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/plugins/algorithms/x3pio.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="x3p-input-output">
<h1>5.11. X3P Input Output<a class="headerlink" href="#x3p-input-output" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Summary</strong>:</td>
<td><span>x3p Import/Export</span></td>
</tr>
<tr class="row-even"><td><strong>Type</strong>:</td>
<td><span>Algorithm</span></td>
</tr>
<tr class="row-odd"><td><strong>License</strong>:</td>
<td><span>LGPL / ISO5436-2 XML under LPGL</span></td>
</tr>
<tr class="row-even"><td><strong>Platforms</strong>:</td>
<td>Windows, Linux</td>
</tr>
<tr class="row-odd"><td><strong>Author</strong>:</td>
<td><span>C. Kohler, ITO, University Stuttgart</span></td>
</tr>
</tbody>
</table>
<div class="section" id="overview">
<h2>5.11.1. Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This plugin provides methods to save and load dataObjects in/from the file format ‘x3p’.
This format is specified in ISO 25178 - Geometrical product specification (GPS).</p>
<p>The library ISO 5436-2 XML, that is necessary for this plugin and included in the sources,
is licensed under the LGPL license and uses further libraries. For more information about the license
of the library itself see www.opengps.eu.</p>
<p>For loading a x3p file, this plugin only supports the feature types SUR (surface) and PRF (profile), where profile
is always loaded in a 1xN data object. The x- and y- axis of loaded x3p files must always be incremental, no absolute x-
or y-axes are supported.</p>
<p>Data objects that should be stored in a x3p file are always stored as feature type SUR, such that 1xN or Mx1 data objects
are also stored as surfaces.</p>
<p>The plugin supports to load multi-layer surface files. The layers are then stored as z-layers.</p>
<p>You can save data in a binary (default) or ascii format. Ascii should only be used for few data points (e.g. &lt; 5000).</p>
<p>Please consider, that the axes and value unit of x3p is always meter. This plugins tries to guess the unit of a data object
by evaluating the axisUnits and valueUnit strings. For axes, the scaling factor to get from the unit string (e.g. Âµm) to
the x3p unit (m) is considered in the increment of the incremental axes descriptions. For all values, the increment value does
not exist, such that the scaling factor is multiplied to each value before storing it in the x3p file. You need to consider this,
since this might lead to precision loss. If a scaling is required for fixed point data types, the values are stored as double values
in x3p, such that there is enough space for the scaled values.</p>
<p>These filters are defined in the plugin:</p>
<ol class="arabic simple">
<li>loadX3p</li>
<li>saveX3p</li>
</ol>
</div>
<div class="section" id="filters">
<h2>5.11.2. Filters<a class="headerlink" href="#filters" title="Permalink to this headline">¶</a></h2>
<p>Detailed overview about all defined filters:</p>
<dl class="function">
<dt id="loadX3p">
<code class="descname">loadX3p</code><span class="sig-paren">(</span><em>destinationObject</em>, <em>filename</em><span class="optional">[</span>, <em>xyUnit</em>, <em>valueUnit</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#loadX3p" title="Permalink to this definition">¶</a></dt>
<dd><p>loads dataObject from x3p file</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>destinationObject</strong> (<em>dataObject</em>) – Empty dataObject</li>
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – source file name</li>
<li><strong>xyUnit</strong> (<em>str - optional</em>) – Unit of x and y axes. x3p assumes to have m as default unit, this can be scaled using other values than m. Default: m (Be careful that other units than ‘m’ lead to a multiplication of all values that might exceed the data type limit.)</li>
<li><strong>valueUnit</strong> (<em>str - optional</em>) – Unit of value axis. x3p assumes to have m as default unit, this can be scaled using other values than m. Default: m (Be careful that other units than ‘m’ lead to a multiplication of all values that might exceed the data type limit.)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="saveX3p">
<code class="descname">saveX3p</code><span class="sig-paren">(</span><em>sourceObject</em>, <em>filename</em><span class="optional">[</span>, <em>binary</em><span class="optional">]</span><span class="sig-paren">)</span><a class="headerlink" href="#saveX3p" title="Permalink to this definition">¶</a></dt>
<dd><p>saves dataObject to x3p file. x3p defines all axes in meter, if the unit of any axis is m, cm, mm, ?m or nm they are correctly converted to m.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>sourceObject</strong> (<em>dataObject</em>) – DataObject</li>
<li><strong>filename</strong> (<a class="reference external" href="https://docs.python.org/3.6/library/stdtypes.html#str" title="(in Python v3.6)"><em>str</em></a>) – Destination filename</li>
<li><strong>binary</strong> (<em>int - optional</em>) – Save data in binary (1, default) or ascii format - use binary for big objects (&gt; 5000 Points)</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="compilation">
<h2>5.11.3. Compilation<a class="headerlink" href="#compilation" title="Permalink to this headline">¶</a></h2>
<p>This plugin requires the 3rd party libary CodeSynthesis XSD 3.3.0. Other versions are not officially supported by the
underlying x3p library (see www.opengps.eu), but XSD 4.0 also works (with the bugfix mentioned below).
Please install CodeSynthesis XSD 3.3.0 or CodeSynthesis XSD 4.0.0 and indicate XERCESC_ROOT_DIR to the base
directory of CodeSynthesis. XERCESC_INCLUDE must then point to the include directory. The variables XERCESC_LIBRARY, XERCESC_LIBRARY_DEBUG…
should then be automatically found.</p>
<p>After compilation, the following libraries and files are copied into the lib path of itom:</p>
<ul class="simple">
<li>iso5436-2.xsd</li>
<li>iso5436-2-xml.dll (x3p library)</li>
<li>xerces-c_3_1_vc100.dll (library from CodeSynthesis XSD)</li>
</ul>
<p>Since the xerces library is copied to the lib folder, CodeSynthesis must not be included into the Path environment variable. Therefore you can uncheck
the corresponding option in the setup of CodeSynthesis.</p>
<p>If there is a problem with the compilation, saying that the option cxx-tree is not available within xsd.exe, then you should check the variable XSD_EXECUTABLE.
This should point to xsd.exe within the bin folder of CodeSynthesis, not to any windows directory.</p>
<p>If xsd could not be found, set XSD_ROOT_DIR to the base directory of CodeSynthesis, hence the same value than XERCESC_ROOT_DIR.</p>
</div>
<div class="section" id="bugfix-for-codesynthesis-xsd-4-0-0">
<h2>5.11.4. Bugfix for CodeSynthesis XSD 4.0.0<a class="headerlink" href="#bugfix-for-codesynthesis-xsd-4-0-0" title="Permalink to this headline">¶</a></h2>
<p>If you get a compiler error telling that DOMDocument is an ambigious symbol (conflict with Windows SDK), then you need to change two lines in xsd/cxx/tree/serialization.txx:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">//old</span>
<span class="n">DOMDocument</span><span class="o">&amp;</span> <span class="n">doc</span> <span class="p">(</span><span class="o">*</span><span class="n">e</span><span class="p">.</span><span class="n">getOwnerDocument</span> <span class="p">());</span>
<span class="k">const</span> <span class="n">DOMElement</span><span class="o">&amp;</span> <span class="n">se</span> <span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">dom_content</span> <span class="p">().</span><span class="n">get</span> <span class="p">());</span>

<span class="c1">//replace by new:</span>
<span class="n">xercesc</span><span class="o">::</span><span class="n">DOMDocument</span><span class="o">&amp;</span> <span class="n">doc</span> <span class="p">(</span><span class="o">*</span><span class="n">e</span><span class="p">.</span><span class="n">getOwnerDocument</span> <span class="p">());</span>
<span class="k">const</span> <span class="n">xercesc</span><span class="o">::</span><span class="n">DOMElement</span><span class="o">&amp;</span> <span class="n">se</span> <span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">dom_content</span> <span class="p">().</span><span class="n">get</span> <span class="p">());</span>
</pre></div>
</div>
<p>The maintainer from XSD promised in a forum that this bug will be fixed in the 4.1 release.</p>
</div>
<div class="section" id="changelog">
<h2>5.11.5. Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>itom setup 3.1.0: This plugin has been compiled using the XSD 4.0</li>
</ul>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="roughness.html" class="btn btn-neutral" title="5.10. Roughness" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2018, Institut fuer Technische Optik (ITO), University Stuttgart. Bug report: https://bitbucket.org/itom/itom/issues
      Last updated on Dec 04, 2018.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript">
          var DOCUMENTATION_OPTIONS = {
              URL_ROOT:'../../',
              VERSION:'',
              LANGUAGE:'None',
              COLLAPSE_INDEX:false,
              FILE_SUFFIX:'.html',
              HAS_SOURCE:  true,
              SOURCELINK_SUFFIX: '.txt'
          };
      </script>
        <script type="text/javascript" src="../../_static/jquery.js"></script>
        <script type="text/javascript" src="../../_static/underscore.js"></script>
        <script type="text/javascript" src="../../_static/doctools.js"></script>
        <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>