
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>6.11. Markers, user selections and geometric shapes &#8212; itom Documentation</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/html.css?v=a585cee4" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=bf0e8745"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '05_plots/primitives';</script>
    <link rel="icon" href="../_static/itomLogo3_128.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.12. Programming plot designer plugins in C++" href="designerPlugins.html" />
    <link rel="prev" title="6.10. Matplotlib" href="matplotlib.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Nov 12, 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="../_static/itomLogo3_128.png" class="logo__image only-light" alt="itom Documentation - Home"/>
    <script>document.write(`<img src="../_static/itomLogo3_128.png" class="logo__image only-dark" alt="itom Documentation - Home"/>`);</script>
  
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../00_releaseNotes/whats-new.html">
    Changelog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../01_introduction/introduction.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../02_installation/install.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../03_gettingStarted/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../04_itom_gui/gui.html">
    The itom User Interface
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">
                    
<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="plots.html">
    Plots and Figures
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../06_extended_gui/extended_gui.html">
    Extending the user interface of itom
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../07_plugins/plugins.html">
    Plugins
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../08_scriptLanguage/script-language.html">
    Python Scripting Language
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../09_reference/reference.html">
    itom Script Reference
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../10_miscellaneous/miscellaneous.html">
    Miscellaneous
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../11_demos/demos.html">
    Demo scripts
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../12_contributing/contributing.html">
    Contributing
  </a>
</li>

                </ul>
            </li>
            
  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/itom-project" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../00_releaseNotes/whats-new.html">
    Changelog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../01_introduction/introduction.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../02_installation/install.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../03_gettingStarted/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../04_itom_gui/gui.html">
    The itom User Interface
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="plots.html">
    Plots and Figures
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../06_extended_gui/extended_gui.html">
    Extending the user interface of itom
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../07_plugins/plugins.html">
    Plugins
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../08_scriptLanguage/script-language.html">
    Python Scripting Language
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../09_reference/reference.html">
    itom Script Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../10_miscellaneous/miscellaneous.html">
    Miscellaneous
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../11_demos/demos.html">
    Demo scripts
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../12_contributing/contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/itom-project" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="plotOverview.html">6.1. Quick tutorial to plots and figures</a></li>
<li class="toctree-l1"><a class="reference internal" href="figureManagement.html">6.2. Figure Management</a></li>
<li class="toctree-l1"><a class="reference internal" href="plotClasses.html">6.3. Plot classes and default plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="linePlots.html">6.4. line plots (1D)</a></li>
<li class="toctree-l1"><a class="reference internal" href="imagePlots.html">6.5. image plots (2D)</a></li>
<li class="toctree-l1"><a class="reference internal" href="isometricPlot.html">6.6. isometric Plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="vtk3dplot.html">6.7. 3D plot</a></li>
<li class="toctree-l1"><a class="reference internal" href="markers.html">6.8. Markers in plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="shapes.html">6.9. Geometric shapes in 1D and 2D plots</a></li>
<li class="toctree-l1"><a class="reference internal" href="matplotlib.html">6.10. Matplotlib</a></li>
<li class="toctree-l1 current active has-children"><a class="current reference internal" href="#">6.11. Markers, user selections and geometric shapes</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul class="simple">
</ul>
</details></li>
<li class="toctree-l1"><a class="reference internal" href="designerPlugins.html">6.12. Programming plot designer plugins in C++</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="plots.html" class="nav-link"><span class="section-number">6. </span>Plots and Figures</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="markers-user-selections-and-geometric-shapes">
<span id="primitives"></span><h1><span class="section-number">6.11. </span>Markers, user selections and geometric shapes<a class="headerlink" href="#markers-user-selections-and-geometric-shapes" title="Link to this heading">#</a></h1>
<p>The plot-widgets <a class="reference internal" href="linePlots.html#itom1dqwtplot"><span class="std std-ref">Plot of an N x M dataObject with 1 x M x-vector</span></a> and <a class="reference internal" href="imagePlots.html#itom2dqwtplot"><span class="std std-ref">Itom2dQwtPlot</span></a> (short: Qwt-plots) support displaying markers, geometric shapes by script or by user interaction.
This section will give a short introduction about plotting, read- /write-functions and the corresponding plots and the internal geometric element structure.</p>
<p>At last the evaluateGeomtrics-plugin for direct evaluation of geometric elements is introduced.</p>
<p>Displaying geometric shapes or markers onto Qwt-plots can be done by three different ways:</p>
<ul class="simple">
<li><p>GUI based approach by draw and delete options in the toolbar or the <strong>Tools</strong> menu.</p></li>
<li><p>Displaying shapes and markers by a Python script.</p></li>
<li><p>Get the position and size of specified shapes or markers by the user and optionally display them by script.</p></li>
</ul>
<section id="drawing-items-into-a-qwt-plot">
<h2><span class="section-number">6.11.1. </span>Drawing items into a Qwt-plot<a class="headerlink" href="#drawing-items-into-a-qwt-plot" title="Link to this heading">#</a></h2>
<p>The plot functionality can be accessed by three different ways. The first way is the GUI based approach where the user presses the
“switch draw mode”-button in the button-bar of the plot. The button represents the current item to be plotted.
The red X (“clear button”) will delete all geometric elements within the plot either drawn by hand or by script.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/drawInto2DToolbarIcons.png"><img alt="../_images/drawInto2DToolbarIcons.png" src="../_images/drawInto2DToolbarIcons.png" style="width: 893px;" />
</a>
</figure>
<p>At the moment “itom” supports the following shapes:</p>
<ul class="simple">
<li><p>point</p></li>
<li><p>line</p></li>
<li><p>rectangle (alignment parallel to axes)</p></li>
<li><p>ellipse (alignment parallel to axes)</p></li>
</ul>
<p>To draw an item, select the right shape from the <strong>tools &gt;&gt; switch draw mode</strong> menu. The button is then in an active, toggled state and you can start
by clicking the canvas. For lines, rectangles and ellipses, you have to click once for the first point of the item and another time for the second time.
During the design mode, a green line indicates the current position and size of the draft, after the last necessary mouse click, the shape design
is finished and its color turns to the corresponding inverse color of the current color palette.</p>
<figure class="align-center">
<a class="reference internal image-reference" href="../_images/drawInto2D.png"><img alt="../_images/drawInto2D.png" src="../_images/drawInto2D.png" style="width: 893px;" />
</a>
</figure>
<p>By clicking the <strong>tools &gt;&gt; clear marker</strong> menu, all current shapes are deleted. After creation the geometric elements can be edited by left-clicking one of the element handles which becomes high-lighted (squares) and moving the mouse.
By pressing the “ctrl”-button during mouse-movement the element resize behaviour will be changed depending on the element type.
Lines will be changed to horizontal or vertical alignment.
Rectangles and ellipses will be become squares or circles according to plot coordinates (x/y-space) and not pixel coordinates.
To avoid confusion with plot aspect, a button for fixed axis aspect ratio (“1:1”) was added to the plot bar.</p>
</section>
<section id="script-based-pick-and-plot-from-to-a-qwt-widget">
<h2><span class="section-number">6.11.2. </span>Script based pick and plot from / to a Qwt-widget<a class="headerlink" href="#script-based-pick-and-plot-from-to-a-qwt-widget" title="Link to this heading">#</a></h2>
<p>To allow more complex user interaction with scripts, e.g. script based element picking, the plot functionality can be started by script either blocking or non-blocking.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">myImage</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">randN</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span> <span class="mi">200</span><span class="p">],</span> <span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="n">number</span><span class="p">,</span> <span class="n">handle</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">myImage</span><span class="p">,</span> <span class="s2">&quot;itom2dQwtPlot&quot;</span><span class="p">)</span>

<span class="c1"># Blocking access which return the values for a single point in myElement</span>
<span class="n">shape</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">drawAndPickElements</span><span class="p">(</span><span class="n">plotItem</span><span class="o">.</span><span class="n">PrimitivePoint</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="c1"># get center of shape</span>
<span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">center</span>

<span class="c1"># None blocking plot</span>
<span class="c1"># Structure will be dataObject([1, 11], &#39;float32&#39;) with [idx, type, x, y, 0, 0, 0, 0]</span>
<span class="n">handle</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;userInteractionStart&quot;</span><span class="p">,</span> <span class="n">plotItem</span><span class="o">.</span><span class="n">PrimitivePoint</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>

<span class="c1"># --&gt; Read out later after plot is finished</span>
<span class="n">myGeometry</span> <span class="o">=</span> <span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometricShapes&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The blocking code will wait until the selection is done or the selection was aborted by user and will than return the corresponding object.
The non-blocking code will return directly. To access the geometric elements the corresponding “signal” for userInteractionDone should be used to noticed
the end of the user interaction.</p>
<p>The geometric elements can also be set by script by calling the corresponding slot.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">obj</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">1000</span><span class="p">,</span><span class="mi">1000</span><span class="p">])</span>
<span class="p">[</span><span class="n">nr</span><span class="p">,</span><span class="n">h</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">obj</span><span class="p">,</span> <span class="s2">&quot;itom2dqwtplot&quot;</span><span class="p">)</span>
<span class="n">element</span><span class="o">=</span><span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Point</span><span class="p">,[</span><span class="mi">50</span><span class="p">,</span><span class="mi">50</span><span class="p">])</span>
<span class="n">h</span><span class="p">[</span><span class="s1">&#39;geometricShapes&#39;</span><span class="p">]</span><span class="o">=</span><span class="n">element</span>
</pre></div>
</div>
<p>For more information see also <a class="reference internal" href="markers.html#plot-markers"><span class="std std-ref">Markers in plots</span></a></p>
<p>The geometric elements can be read any time using the property “geometricShapes”.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Reading geometric elements</span>
<span class="n">myGeometry</span> <span class="o">=</span> <span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometricShapes&quot;</span><span class="p">]</span>
</pre></div>
</div>
<p>The object “myGeometry” consists of all geometric elements with in the plot.
This kind of reading differs from the blocking-variant (“drawAndPickElements”). The blocking-variant returns only the data created during the current function call and ignores old geometric elements.
For the different definitions of the geometric elements see section “Indexing of Geometric Elements”.</p>
</section>
<section id="implemented-functions-signals-and-slots">
<h2><span class="section-number">6.11.3. </span>Implemented Functions, Signals and Slots<a class="headerlink" href="#implemented-functions-signals-and-slots" title="Link to this heading">#</a></h2>
<p>The Qwt-plot widgets functions had to be updated. The Qwt-Widgets got the following properties, respectively setter- / getter-functions related to plotting:</p>
<ul class="simple">
<li><p>“geometricElementsCount”,    get the number of geometric elements in this plot, READONLY</p></li>
<li><p>“keepAspectRatio”,           enable or disable a fixed aspect ratio of 1:1 for the plot canvas.</p></li>
<li><p>“enablePlotting”,            enable and disable plotting toolbar</p></li>
<li><p>“selectedGeometry”,          set / get the current selected geometric element</p></li>
</ul>
<p>In complete these the functionality of the drawing interface, the following slots have been added to the widgets:</p>
<ul class="simple">
<li><p>“plotMarkers”                Add markers and geometric elements to plot according to dataObject and style type. For geometric “style is not used”, type in “b”.</p></li>
<li><p>“userInteractionStart”       Start a non-blocking user interaction for “multipointpick” or geometric elements with element count.</p></li>
<li><p>“clearGeometricElements”     Delete all existing geometric elements within the plot</p></li>
</ul>
<p>To register changes in the plot elements and finished user interactions, the following signals where implemented:</p>
<ul class="simple">
<li><p>“userInteractionDone”,       Emitted, when user interaction is finished or aborted</p></li>
<li><p>“plotItemChanged”,           Emitted, when a geometric element was changed and changing is finished. Not fully Python-Compatible.</p></li>
<li><p>“plotItemDeleted”,           Emitted, when a specific plot item is deleted</p></li>
<li><p>“plotItemsDeleted”,          Emitted, when all plot items are deleted</p></li>
<li><p>“plotItemsFinished”,         Emitted, when the plotting function is finished, similar to userInteractionDone</p></li>
</ul>
<p>For the blocking connection the plotItem-class got the additional function drawAndPickElements(type, dataObject, count), see <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem" title="itom.plotItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotItem</span></code></a>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If the plot is embedded in a graphical user interface, the python based access to the plot via its object name returns an instance of <a class="reference internal" href="../09_reference/itom_GUI.html#itom.uiItem" title="itom.uiItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">uiItem</span></code></a>.
However, you can cast this instance to <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem" title="itom.plotItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotItem</span></code></a> using a python cast operator:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">itom</span>
<span class="n">plot</span> <span class="o">=</span> <span class="n">itom</span><span class="o">.</span><span class="n">plotItem</span><span class="p">(</span><span class="n">myGui</span><span class="o">.</span><span class="n">plotObjectName</span><span class="p">)</span>
</pre></div>
</div>
<p>If <em>myGui.plotObjectName</em> is not an instance of <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem" title="itom.plotItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotItem</span></code></a> a runtime error is thrown. This cast is only available for itom &gt; 1.4.0.</p>
</div>
</section>
<section id="indexing-for-geometric-elements">
<h2><span class="section-number">6.11.4. </span>Indexing for Geometric Elements<a class="headerlink" href="#indexing-for-geometric-elements" title="Link to this heading">#</a></h2>
<p>The definition of the geometric elements depends on the implementation. The “plotMarker” and its corresponding getter- / setter-function uses a Matlab orientated structure.
The structure a dataObject with 8 rows and n columns where n depends on the number of elements.
Points are defined by their location, while ellipses and rectangles are defined by their diagonal edges.</p>
<p>The “geometricElements”-property uses geometric elements in a more mathematical orientated description. The dataObject structure is defined as “float32” with n by 11 elements.
Most setter functions also support “float32” elements. Each of the n rows corresponds to an elements (except polygon-shapes). The indexing follows the geometricPrimitive-struct in c++.</p>
<p>The geometricPrimitive is a struct within the c-Stuctur of the program designed for exchanging the geometric elements from plots to other elements.
The structure can be used row-wise as dataObject or float32-lists</p>
<p>At the moment only tPoint, tLine, tEllipse and tRectangle are supported.</p>
<p>The cells contain:</p>
<ol class="arabic simple">
<li><p>The unique index of the current element, castable to int32 with a maximum up to 16bit index values</p></li>
<li><p>Type flag 0000FFFF and further flags e.g. read&amp;write only FFFF0000</p></li>
<li><p>First coordinate with x value</p></li>
<li><p>First coordinate with y value</p></li>
<li><p>First coordinate with z value</p></li>
</ol>
<p>All other values depends on the element type and may change between each type.</p>
<ul class="simple">
<li><p>A point is defined as idx, flags, centerX0, centerY0, centerZ0</p></li>
<li><p>A line is defined as idx, flags, x0, y0, z0, x1, y1, z1</p></li>
<li><p>A ellipse is defined as idx, flags, centerX, centerY, centerZ, r1, r2</p></li>
<li><p>A circle is defined as idx, flags, centerX, centerY, centerZ, r</p></li>
<li><p>A rectangle is defined as idx, flags, x0, y0, z0, x1, y1, z1, alpha</p></li>
<li><p>A square is defined as idx, flags, centerX, centerY, centerZ, a, alpha</p></li>
<li><p>A polygon is defined as idx, flags, posX, posY, posZ, directionX, directionY, directionZ, idx, numIdx</p></li>
</ul>
<div class="toctree-wrapper compound">
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>doxygenclass: Cannot find class “ito::Shape::ShapeType” in doxygen xml output for project “itom” from directory: C:/Workspace/itom_development_VS2019_Qt5.15.2_x64/itomProject/build/itom\docs/doxygen/xml</p>
</div>
</section>
<section id="evaluation-of-geometric-elements">
<h2><span class="section-number">6.11.5. </span>Evaluation of Geometric Elements<a class="headerlink" href="#evaluation-of-geometric-elements" title="Link to this heading">#</a></h2>
<p>The evaluateGeomtrics-widget is designed to load geometric definition stored in a float32 dataObject with a column-size of &gt;10 elements and a row for each geometric element to display.
Further more it allows the evaluation of geometric relations between the geometric primitives. See section <a class="reference internal" href="../06_extended_gui/list_custom_widgets.html#listcustomdesignerwidgets"><span class="std std-ref">Custom Designer Widgets</span></a> for the widget description.</p>
</section>
<section id="demo-scripts-and-examples">
<h2><span class="section-number">6.11.6. </span>Demo Scripts and Examples<a class="headerlink" href="#demo-scripts-and-examples" title="Link to this heading">#</a></h2>
<ul>
<li><p><strong>uiMeasureToolMain.py</strong></p>
<div class="line-block">
<div class="line"><em>Description</em>: Advanced GUI which enables geometric plotting and measurements within a 2D-QWT-Plot. This file shows how to auto-connect to signals and how to use buttons. The corresponding ui-file is uiMeasureToolMain.ui.</div>
</div>
</li>
<li><p><strong>demoPickPointsAndMarkers.py</strong></p>
<div class="line-block">
<div class="line"><em>Description</em>: Demo for picking &amp; plotting points and picking &amp; plotting ellipses.</div>
</div>
</li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="matplotlib.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">6.10. </span>Matplotlib</p>
      </div>
    </a>
    <a class="right-next"
       href="designerPlugins.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">6.12. </span>Programming plot designer plugins in C++</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#drawing-items-into-a-qwt-plot">6.11.1. Drawing items into a Qwt-plot</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#script-based-pick-and-plot-from-to-a-qwt-widget">6.11.2. Script based pick and plot from / to a Qwt-widget</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#implemented-functions-signals-and-slots">6.11.3. Implemented Functions, Signals and Slots</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#indexing-for-geometric-elements">6.11.4. Indexing for Geometric Elements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#evaluation-of-geometric-elements">6.11.5. Evaluation of Geometric Elements</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#demo-scripts-and-examples">6.11.6. Demo Scripts and Examples</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/05_plots/primitives.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2011-2024, Institut für Technische Optik (ITO), Universität Stuttgart. Bug report: https://github.com/itom-project/itom/issues.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>