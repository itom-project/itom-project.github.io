

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>7.8.17. Link or load external libraries &mdash; itom Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.8.18. Project settings for plugins" href="projectSettings.html" />
    <link rel="prev" title="7.8.16. itom API" href="plugin-itomAPI.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> itom Documentation
          

          
          </a>

          
            
            
              <div class="version">
                4.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../00_releaseNotes/whats-new.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../01_introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../02_installation/install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../03_gettingStarted/getting-started.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../04_itom_gui/gui.html">4. The itom User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../05_plots/plots.html">5. Plots and Figures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06_extended_gui/extended_gui.html">6. Extending the user interface of <strong>itom</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../plugins.html">7. Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basic_concept.html">7.1. Basic concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loading_plugins.html">7.2. Loading plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-hardware.html">7.3. How to use hardware plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-grabber.html">7.4. Getting started with grabbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-adda.html">7.5. Getting started with A/D converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-actuator.html">7.6. Getting started with actuators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-filter.html">7.7. Getting started with algorithm plugins (denoted as filters)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="plugin-development.html">7.8. Development under C++</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plugin-RetVal.html">7.8.1. <strong>RetVal</strong> - The return type of <strong>itom</strong> methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-sharedSemaphore.html">7.8.2. ItomSharedSemaphore</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dataObject.html">7.8.3. DataObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-params.html">7.8.4. Parameter-Container class of <strong>itom</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-paramsMeta.html">7.8.5. Parameters - Meta Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-paramsValidate.html">7.8.6. Parameters - Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginStructure.html">7.8.7. Introduction to plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginInterfaceClass.html">7.8.8. Plugin interface class</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-AddInBase-Ref.html">7.8.9. AddInBase</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginClass.html">7.8.10. Plugin class - Basic information</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dataIO.html">7.8.11. Plugin class - DataIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-actuator.html">7.8.12. Plugin class - Actuator</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo.html">7.8.13. Plugin class - Algo</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginCreateCMake.html">7.8.14. Create a new plugin via CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginAutoLoadSavePolicy.html">7.8.15. Automatic loading and saving of plugin parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-itomAPI.html">7.8.16. itom API</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">7.8.17. Link or load external libraries</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#link-to-a-static-library">7.8.17.1. Link to a static library</a></li>
<li class="toctree-l4"><a class="reference internal" href="#link-to-a-shared-library">7.8.17.2. Link to a shared library</a></li>
<li class="toctree-l4"><a class="reference internal" href="#load-external-library-at-runtime">7.8.17.3. Load external library at runtime</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="projectSettings.html">7.8.18. Project settings for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dockWidget.html">7.8.19. Optional dock widget (toolbox) for hardware plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-configDialog.html">7.8.20. Optional configuration dialog for hardware plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openCVMat.html">7.9. OpenCV matrices <strong>cv::Mat</strong> and <strong>cv::Mat_</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../08_scriptLanguage/script-language.html">8. Python scripting language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../09_reference/reference.html">9. itom Script Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../10_miscellaneous/miscellaneous.html">10. Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../11_test-scripts/test-scripts.html">11. Demo scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../12_tutorials/tutorials.html">12. Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../13_contributing/contributing.html">13. Contributing</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">itom Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../plugins.html"><span class="section-number">7. </span>Plugins</a> &raquo;</li>
        
          <li><a href="plugin-development.html"><span class="section-number">7.8. </span>Development under C++</a> &raquo;</li>
        
      <li><span class="section-number">7.8.17. </span>Link or load external libraries</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/07_plugins/development/plugin-externalLibraries.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="link-or-load-external-libraries">
<span id="plugin-externallibraries"></span><h1><span class="section-number">7.8.17. </span>Link or load external libraries<a class="headerlink" href="#link-or-load-external-libraries" title="Permalink to this headline">¶</a></h1>
<p>In your plugin, you have different possibilites to use external or 3rd party libraries:</p>
<div class="section" id="link-to-a-static-library">
<h2><span class="section-number">7.8.17.1. </span>Link to a static library<a class="headerlink" href="#link-to-a-static-library" title="Permalink to this headline">¶</a></h2>
<p>If you add an appropriate entry to the linker settings of your project file, it is possible to link to external, static libraries.
This is for example the case when linking to the <strong>dataObject.lib</strong> or <strong>dataObject.so</strong> (Linux) or if using any components
of the <em>PointCloudLibrary</em>. When compiling your plugin, the whole implementation
of the libary is compiled into your plugin-library and you don’t need to distribute the external file.</p>
</div>
<div class="section" id="link-to-a-shared-library">
<h2><span class="section-number">7.8.17.2. </span>Link to a shared library<a class="headerlink" href="#link-to-a-shared-library" title="Permalink to this headline">¶</a></h2>
<p>You can also link to an external shared library by adding the corresponding entry to the linker settings, too. This is for example the case
when using <em>OpenCV</em>-methods, which use implicitely do, if you link agains the dataObject. Then you must add the corresponding <strong>.lib</strong> or
<strong>.so</strong> files to your linker-settings and provide the corresponding <strong>.dll</strong> or <strong>.a</strong> file (in debug or release, if possible). Then, you have to take
care that <strong>itom</strong> is able to find the external library. Please consider, that this external library file is not detected relatively to the location of your
plugin but relatively to the executable of <strong>itom</strong> itself. Therefore, you have these possibilites to distribute the external library file:</p>
<ul>
<li><p>Add its containing folder to the path variable of your operating system.</p></li>
<li><p>Add it to any path which already is contained in the path variable of your OS (e.g. <strong>system32</strong> on Windows).</p></li>
<li><p>Directly add it to the <strong>itom</strong>-folder (not recommended, since leads to “crazy” folder structure)</p></li>
<li><p>Direclty add it to the folder <strong>lib</strong> contained in the <strong>itom</strong>-folder. The <em>lib*</em>-folder is added to the path variables that are passed to <strong>itom</strong> at startup. This is a good possibility to provide the external library file, however it can also lead to conflicts with other plugins, that need the same external library, however in an other version. Therefore check whether you can share the same version with other plugins. In the default implementation of <strong>itom</strong>, there is also some default libraries of <strong>Glut</strong>, <strong>FFTW</strong>… that should be used.</p></li>
<li><p>Try to indicate the shared library as delay-loaded module. Than you also adapt the path variable of your plugin to a folder of your choice, before the plugins tries to load the shared library. This is a conflict-free way how to access shared libraries. Let’s make an example: Your plugin <strong>MyPlugin</strong> lies after compilation in the folder <strong>plugin/myPlugin</strong>, that is a subfolder of <strong>itom</strong>. Then put your external shared library file in the subfolder <strong>lib</strong> of <strong>plugin/myPlugin</strong>. Then add this path to the current path variable of the application by adding the following code for instance in the constructor or the <strong>init</strong>-method of your plugin implementation:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Get the path to the plugin directory
QDir dllDir = QCoreApplication::applicationDirPath();
if( !dllDir.cd(&quot;plugins/MyPlugin&quot;) )
{
    dllDir.cdUp();
    dllDir.cd(&quot;plugins/MyPlugin&quot;);
}
dllDir.cd(&quot;lib&quot;); //move to lib folder
QString dllDir2 = QDir::cleanPath(dllDir.filePath(&quot;&quot;));

// Add the plugin path to the path environment variable
char *oldpath = getenv(&quot;path&quot;);
char *newpath = (char*)malloc(strlen(oldpath) + dllDir2.size() + 10);
newpath[0] = 0;
strcat(newpath, &quot;path=&quot;);
strcat(newpath, dllDir2.toLatin1().data());
strcat(newpath, &quot;;&quot;);
strcat(newpath, oldpath);
_putenv(newpath);
free(newpath);
</pre></div>
</div>
</li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The path variable of your operating system is always copied and then passed to a newly started application. Therefore you can adapt this copy without influencing the overall path environment variable.</p>
</div>
</div>
<div class="section" id="load-external-library-at-runtime">
<h2><span class="section-number">7.8.17.3. </span>Load external library at runtime<a class="headerlink" href="#load-external-library-at-runtime" title="Permalink to this headline">¶</a></h2>
<p>The most complicated way to access an external library with respect to the programming cost is to use the command <strong>LoadLibrary</strong> or the platform-independent <strong>Qt</strong>-class <strong>QLibrary</strong> in order load an external library at runtime of your plugin. Then you need to resolve the symbols in the library in order to access them afterwards in a function-call. The advantage of this
method however is, that the library can be at any location since you are able to load the library with its absolute filename. See the <strong>Qt</strong> documentation for details about the class <strong>QLibrary</strong>, that is recommended to use.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you link to external libraries, please consider always the license requirements of the external library.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="projectSettings.html" class="btn btn-neutral float-right" title="7.8.18. Project settings for plugins" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="plugin-itomAPI.html" class="btn btn-neutral float-left" title="7.8.16. itom API" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2011-2021, Institut fuer Technische Optik (ITO), University Stuttgart. Bug report: https://bitbucket.org/itom/itom/issues.
      <span class="lastupdated">
        Last updated on Mar 05, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>