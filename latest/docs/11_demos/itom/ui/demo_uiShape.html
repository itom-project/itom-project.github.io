<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>12.1.10.8.25. UI shape &mdash; itom Documentation</title>
      <link rel="stylesheet" href="../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../../_static/html.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../" id="documentation_options" src="../../../_static/documentation_options.js"></script>
        <script src="../../../_static/jquery.js"></script>
        <script src="../../../_static/underscore.js"></script>
        <script src="../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../_static/doctools.js"></script>
        <script src="../../../_static/clipboard.min.js"></script>
        <script src="../../../_static/copybutton.js"></script>
    <script src="../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../genindex.html" />
    <link rel="search" title="Search" href="../../../search.html" />
    <link rel="next" title="12.1.10.8.26. Observe parallel functions" href="demo_observedParallelFunctions.html" />
    <link rel="prev" title="12.1.10.8.24. ItomUI class" href="demo_itomUiClass.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../../index.html" class="icon icon-home"> itom Documentation
          </a>
              <div class="version">
                4.2.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../00_releaseNotes/whats-new.html">1. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../01_introduction/introduction.html">2. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../02_installation/install.html">3. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../03_gettingStarted/getting-started.html">4. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../04_itom_gui/gui.html">5. The itom User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../05_plots/plots.html">6. Plots and Figures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../06_extended_gui/extended_gui.html">7. Extending the user interface of <strong>itom</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../07_plugins/plugins.html">8. Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../08_scriptLanguage/script-language.html">9. Python Scripting Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../09_reference/reference.html">10. itom Script Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../10_miscellaneous/miscellaneous.html">11. Miscellaneous</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../demos.html">12. Demo scripts</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../index.html">12.1. itom</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../index.html#basics">12.1.1. Basics</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#data-processing">12.1.2. Data processing</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#matplotlib-embedded">12.1.3. Matplotlib embedded</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#itom-apps">12.1.4. itom apps</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#plots">12.1.5. Plots</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#plugins">12.1.6. Plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#pointcloud">12.1.7. PointCloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#user-interface">12.1.8. User interface</a></li>
<li class="toctree-l3"><a class="reference internal" href="../index.html#customize-itom-gui">12.1.9. Customize itom GUI</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../index.html#user-interface-dynamic-layouts">12.1.10. User interface dynamic layouts</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="../basics/index.html">12.1.10.1. Basics</a></li>
<li class="toctree-l4"><a class="reference internal" href="../dataProcessing/index.html">12.1.10.2. Data processing</a></li>
<li class="toctree-l4"><a class="reference internal" href="../embeddedMatplotlib/index.html">12.1.10.3. Matplotlib embedded</a></li>
<li class="toctree-l4"><a class="reference internal" href="../itom_apps/index.html">12.1.10.4. itom apps</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plots/index.html">12.1.10.5. Plots</a></li>
<li class="toctree-l4"><a class="reference internal" href="../plugins/index.html">12.1.10.6. Plugins</a></li>
<li class="toctree-l4"><a class="reference internal" href="../pointClouds/index.html">12.1.10.7. PointCloud</a></li>
<li class="toctree-l4 current"><a class="reference internal" href="index.html">12.1.10.8. User interface</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ui_customize/index.html">12.1.10.9. Customize itom GUI</a></li>
<li class="toctree-l4"><a class="reference internal" href="../ui_dynamicLayout/index.html">12.1.10.10. User interface dynamic layouts</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../python/index.html">12.2. Python</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../python_packages/index.html">12.3. Python packages</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../12_contributing/contributing.html">13. Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../index.html">itom Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../../demos.html"><span class="section-number">12. </span>Demo scripts</a> &raquo;</li>
          <li><a href="../index.html"><span class="section-number">12.1. </span>itom</a> &raquo;</li>
          <li><a href="index.html"><span class="section-number">12.1.10.8. </span>User interface</a> &raquo;</li>
      <li><span class="section-number">12.1.10.8.25. </span>UI shape</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../_sources/11_demos/itom/ui/demo_uiShape.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <div class="sphx-glr-download-link-note admonition note">
<p class="admonition-title">Note</p>
<p>Click <a class="reference internal" href="#sphx-glr-download-11-demos-itom-ui-demo-uishape-py"><span class="std std-ref">here</span></a>
to download the full example code</p>
</div>
<section class="sphx-glr-example-title" id="ui-shape">
<span id="sphx-glr-11-demos-itom-ui-demo-uishape-py"></span><h1><span class="section-number">12.1.10.8.25. </span>UI shape<a class="headerlink" href="#ui-shape" title="Permalink to this heading">¶</a></h1>
<p>This demo shows a window with a 2D plot as center widget.
A random dataObject is shown in the plot. The user can then
create various geometric shapes (like points, lines, rectangles…)
in the plot either by the toolbar of the plot or by pressing dedicated buttons.</p>
<p>Additionally, many signals of the plot are connected to python slots
to show what kind of information can for instance be obtained by the plot
upon the creation of plots. There are still more signals available, however this
demo shows a base set already. Furthermore, it is possible to force the user to
create new shapes either in a modal or non-modal process. The first might be
interesting if a script requires the input of a region in a plot before continuing with
the script execution</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">itom</span> <span class="kn">import</span> <span class="n">dataObject</span>
<span class="kn">from</span> <span class="nn">itom</span> <span class="kn">import</span> <span class="n">ui</span>
<span class="kn">from</span> <span class="nn">itomUi</span> <span class="kn">import</span> <span class="n">ItomUi</span>
<span class="kn">from</span> <span class="nn">itom</span> <span class="kn">import</span> <span class="n">shape</span>
<span class="kn">import</span> <span class="nn">inspect</span>
<span class="kn">import</span> <span class="nn">os.path</span>



<span class="k">class</span> <span class="nc">UiShapeDemo</span><span class="p">(</span><span class="n">ItomUi</span><span class="p">):</span>
    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">ownFilename</span> <span class="o">=</span> <span class="n">inspect</span><span class="o">.</span><span class="n">getfile</span><span class="p">(</span><span class="n">inspect</span><span class="o">.</span><span class="n">currentframe</span><span class="p">())</span>
        <span class="n">ownDir</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">ownFilename</span><span class="p">)</span>
        <span class="n">uiFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">ownDir</span><span class="p">,</span> <span class="s2">&quot;uiShapeDemo.ui&quot;</span><span class="p">)</span>
        <span class="n">uiFile</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">uiFile</span><span class="p">)</span>
        <span class="n">ItomUi</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">uiFile</span><span class="p">,</span> <span class="n">ui</span><span class="o">.</span><span class="n">TYPEWINDOW</span><span class="p">,</span> <span class="n">childOfMainWindow</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

        <span class="n">dObj</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">randN</span><span class="p">([</span><span class="mi">100</span><span class="p">,</span> <span class="mi">300</span><span class="p">],</span> <span class="s2">&quot;uint8&quot;</span><span class="p">)</span>
        <span class="n">dObj</span><span class="o">.</span><span class="n">axisScales</span> <span class="o">=</span> <span class="p">(</span><span class="mf">0.2</span><span class="p">,</span> <span class="mf">0.2</span><span class="p">)</span>
        <span class="n">dObj</span><span class="o">.</span><span class="n">axisUnits</span> <span class="o">=</span> <span class="p">(</span><span class="s2">&quot;mm&quot;</span><span class="p">,</span> <span class="s2">&quot;mm&quot;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">dObj</span>

    <span class="k">def</span> <span class="nf">show</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">modalLevel</span><span class="o">=</span><span class="mi">0</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">show</span><span class="p">(</span><span class="n">modalLevel</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">drawShapeButtonsEnable</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">enabled</span><span class="p">,</span> <span class="n">modal</span><span class="o">=</span><span class="kc">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnCancel</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="ow">not</span> <span class="n">enabled</span> <span class="ow">and</span> <span class="ow">not</span> <span class="n">modal</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnAddPoint</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">enabled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnAddLine</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">enabled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnAddRect</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">enabled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnAddSquare</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">enabled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnAddEllipse</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">enabled</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnAddCircle</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">enabled</span>

    <span class="k">def</span> <span class="nf">startInteraction</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">):</span>
        <span class="n">nrOfElements</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">spinNoToAdd</span><span class="p">[</span><span class="s2">&quot;value&quot;</span><span class="p">]</span>
        <span class="n">modal</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">checkModalInput</span><span class="p">[</span><span class="s2">&quot;checked&quot;</span><span class="p">]</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drawShapeButtonsEnable</span><span class="p">(</span><span class="kc">False</span><span class="p">,</span> <span class="n">modal</span><span class="p">)</span>

        <span class="k">if</span> <span class="ow">not</span> <span class="n">modal</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;userInteractionStart&quot;</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="kc">True</span><span class="p">,</span> <span class="n">nrOfElements</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="c1"># drawAndPickElements throws RuntimeError if user interrupts the process to add a new shape or new shapes</span>
                <span class="c1"># drawAndPickElements is a memeber of itom.plotItem, self.gui.plot however is of its base type uiItem.</span>
                <span class="c1"># Therefore, the uiItem is cast to plotItem, first.</span>
                <span class="n">shapes</span> <span class="o">=</span> <span class="n">plotItem</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">)</span><span class="o">.</span><span class="n">drawAndPickElements</span><span class="p">(</span><span class="nb">type</span><span class="p">,</span> <span class="n">nrOfElements</span><span class="p">)</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
                    <span class="s2">&quot;addItem&quot;</span><span class="p">,</span>
                    <span class="s2">&quot;End of modal interaction. </span><span class="si">%i</span><span class="s2"> shapes added:&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">shapes</span><span class="p">),</span>
                <span class="p">)</span>
            <span class="k">except</span> <span class="ne">RuntimeError</span><span class="p">:</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addItem&quot;</span><span class="p">,</span> <span class="s2">&quot;Modal interaction interrupted&quot;</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnAddPoint_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startInteraction</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Point</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnAddLine_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startInteraction</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Line</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnAddRect_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startInteraction</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnAddSquare_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startInteraction</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Square</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnAddEllipse_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startInteraction</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Ellipse</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnAddCircle_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">startInteraction</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Circle</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;bool&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_checkAllowToolbar_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checked</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">[</span><span class="s2">&quot;geometricShapesDrawingEnabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">checked</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;bool&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_checkAllowMove_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checked</span><span class="p">):</span>
        <span class="n">modes</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="n">flags</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">checkAllowMove</span><span class="p">[</span><span class="s2">&quot;checked&quot;</span><span class="p">]:</span>
            <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Move&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">flags</span> <span class="o">|=</span> <span class="n">shape</span><span class="o">.</span><span class="n">MoveLock</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">checkAllowResize</span><span class="p">[</span><span class="s2">&quot;checked&quot;</span><span class="p">]:</span>
            <span class="n">modes</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">&quot;Resize&quot;</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">flags</span> <span class="o">|=</span> <span class="n">shape</span><span class="o">.</span><span class="n">ResizeLock</span>

        <span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="n">modes</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">[</span><span class="s2">&quot;geometryModificationModes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;;&quot;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">modes</span><span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">[</span><span class="s2">&quot;geometryModificationModes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;bool&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_checkAllowResize_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">checked</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">on_checkAllowMove_clicked</span><span class="p">(</span><span class="n">checked</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnCreateAndShowMask_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="n">mask</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">[</span><span class="s2">&quot;source&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">createMask</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">[</span><span class="s2">&quot;geometricShapes&quot;</span><span class="p">])</span>
        <span class="n">plot</span><span class="p">(</span><span class="n">mask</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnClearAll_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;clearGeometricShapes&quot;</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnClearSelected_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;deleteGeometricShape&quot;</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="p">[</span><span class="s2">&quot;selectedGeometricShape&quot;</span><span class="p">])</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnDrawShapes_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addGeometricShape&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Circle</span><span class="p">,</span> <span class="p">(</span><span class="mi">30</span><span class="p">,</span> <span class="mi">10</span><span class="p">),</span> <span class="mi">8</span><span class="p">))</span>  <span class="c1"># head</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addGeometricShape&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">,</span> <span class="p">(</span><span class="mi">24</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="mi">28</span><span class="p">,</span> <span class="mi">12</span><span class="p">)))</span>  <span class="c1"># left eye</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addGeometricShape&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">,</span> <span class="p">(</span><span class="mi">32</span><span class="p">,</span> <span class="mi">15</span><span class="p">),</span> <span class="p">(</span><span class="mi">36</span><span class="p">,</span> <span class="mi">12</span><span class="p">)))</span>  <span class="c1"># right eye</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addGeometricShape&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Ellipse</span><span class="p">,</span> <span class="p">(</span><span class="mi">25</span><span class="p">,</span> <span class="mf">5.25</span><span class="p">),</span> <span class="p">(</span><span class="mi">35</span><span class="p">,</span> <span class="mf">4.75</span><span class="p">)))</span>  <span class="c1"># mouth</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_plot_geometricShapesDeleted</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnCreateAndShowMask</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnClearAll</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">False</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addItem&quot;</span><span class="p">,</span> <span class="s2">&quot;all shapes deleted&quot;</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;int,ito::Shape&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_plot_geometricShapeAdded</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnCreateAndShowMask</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnClearAll</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addItem&quot;</span><span class="p">,</span> <span class="s2">&quot;shape </span><span class="si">%i</span><span class="s2"> added: &quot;</span> <span class="o">%</span> <span class="n">idx</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">shape</span><span class="p">))</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;int,ito::Shape&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_plot_geometricShapeChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;addItem&quot;</span><span class="p">,</span> <span class="s2">&quot;shape </span><span class="si">%i</span><span class="s2"> changed: &quot;</span> <span class="o">%</span> <span class="n">idx</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">shape</span><span class="p">))</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;ito::Shape&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_plot_geometricShapeCurrentChanged</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shape</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">btnClearSelected</span><span class="p">[</span><span class="s2">&quot;enabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">shape</span><span class="o">.</span><span class="n">valid</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;statusBar&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;showMessage&quot;</span><span class="p">,</span> <span class="s2">&quot;Current shape changed to: </span><span class="si">%s</span><span class="s2">&quot;</span> <span class="o">%</span> <span class="nb">str</span><span class="p">(</span><span class="n">shape</span><span class="p">),</span> <span class="mi">1000</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;QVector&lt;ito::Shape&gt;,bool&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_plot_geometricShapeFinished</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">shapes</span><span class="p">,</span> <span class="n">aborted</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">drawShapeButtonsEnable</span><span class="p">(</span><span class="kc">True</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">aborted</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
                <span class="s2">&quot;addItem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;successfully finished to add or change the following shapes: &quot;</span> <span class="o">+</span> <span class="nb">str</span><span class="p">(</span><span class="n">shapes</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span>
                <span class="s2">&quot;addItem&quot;</span><span class="p">,</span>
                <span class="s2">&quot;adding geometric shape(s) aborted. </span><span class="si">%i</span><span class="s2"> shape(s) already added&quot;</span> <span class="o">%</span> <span class="nb">len</span><span class="p">(</span><span class="n">shapes</span><span class="p">),</span>
            <span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;scrollToBottom&quot;</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;int,bool&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_plot_geometricShapeStartUserInput</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="nb">type</span><span class="p">,</span> <span class="n">userInteractionReason</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">userInteractionReason</span> <span class="o">==</span> <span class="kc">False</span><span class="p">:</span>  <span class="c1"># user selected a button in the toolbar to draw a new shape, disable buttons</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">drawShapeButtonsEnable</span><span class="p">(</span><span class="kc">False</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnClearLog_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">listLog</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;clear&quot;</span><span class="p">)</span>

    <span class="nd">@ItomUi</span><span class="o">.</span><span class="n">autoslot</span><span class="p">(</span><span class="s2">&quot;&quot;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">on_btnCancel_clicked</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">gui</span><span class="o">.</span><span class="n">plot</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;userInteractionStart&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="kc">False</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
    <span class="n">dObj</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">randN</span><span class="p">([</span><span class="mi">600</span><span class="p">,</span> <span class="mi">800</span><span class="p">],</span> <span class="s2">&quot;float32&quot;</span><span class="p">)</span>
    <span class="n">uiShapeDemo</span> <span class="o">=</span> <span class="n">UiShapeDemo</span><span class="p">()</span>
    <span class="n">uiShapeDemo</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../../../_images/demoUIShape_1.png"><img alt="../../../_images/demoUIShape_1.png" src="../../../_images/demoUIShape_1.png" style="width: 100%;" /></a>
<p class="sphx-glr-timing"><strong>Total running time of the script:</strong> ( 0 minutes  1.170 seconds)</p>
<div class="sphx-glr-footer sphx-glr-footer-example docutils container" id="sphx-glr-download-11-demos-itom-ui-demo-uishape-py">
<div class="sphx-glr-download sphx-glr-download-python docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/c6cae940115ba39032f7dbbaa841c74b/demo_uiShape.py"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Python</span> <span class="pre">source</span> <span class="pre">code:</span> <span class="pre">demo_uiShape.py</span></code></a></p>
</div>
<div class="sphx-glr-download sphx-glr-download-jupyter docutils container">
<p><a class="reference download internal" download="" href="../../../_downloads/4003101229db72a60231896e80eaf886/demo_uiShape.ipynb"><code class="xref download docutils literal notranslate"><span class="pre">Download</span> <span class="pre">Jupyter</span> <span class="pre">notebook:</span> <span class="pre">demo_uiShape.ipynb</span></code></a></p>
</div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="demo_itomUiClass.html" class="btn btn-neutral float-left" title="12.1.10.8.24. ItomUI class" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="demo_observedParallelFunctions.html" class="btn btn-neutral float-right" title="12.1.10.8.26. Observe parallel functions" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011-2022, Institut fuer Technische Optik (ITO), University Stuttgart. Bug report: https://github.com/itom-project/itom/issues.
      <span class="lastupdated">Last updated on Sep 19, 2022.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>