<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>HidApi &mdash; itom</title>
    
    <link rel="stylesheet" href="../../_static/sphinxdoc.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="itom" href="../../index.html" />
    <link rel="up" title="Plugins" href="../../plugins.html" />
    <link rel="next" title="CyUSB" href="CyUSB.html" />
    <link rel="prev" title="LibUSB" href="libUSB.html" />
 


  </head>
  <body role="document">
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="CyUSB.html" title="CyUSB"
             accesskey="N">next</a></li>
        <li class="right" >
          <a href="libUSB.html" title="LibUSB"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">itom</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../plugins.html" accesskey="U">Plugins</a> &raquo;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../../index.html">
              <img class="logo" src="../../_static/itomlogo.png" alt="Logo"/>
            </a></p>
  <h3><a href="../../index.html">Table Of Contents</a></h3>
  <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../media.html">Publications and Presentations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../faq.html">Known bugs, issues and workarounds</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../plugins.html">Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../plugins.html#add-a-plugin-to-itom">Add a plugin to itom</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../../plugins.html#available-plugins">Available plugins</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../plugins.html#cameras-grabbers-ad-converter">Cameras / Grabbers / AD-Converter</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins.html#motors-actuators">Motors / Actuators</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../plugins.html#further-hardware-devices">Further hardware devices</a><ul class="current">
<li class="toctree-l4"><a class="reference internal" href="dispWindow.html">DispWindow</a></li>
<li class="toctree-l4"><a class="reference internal" href="gwInstekPSP.html">GWInstekPSP</a></li>
<li class="toctree-l4"><a class="reference internal" href="serialIO.html">SerialIO</a></li>
<li class="toctree-l4"><a class="reference internal" href="glDisplay.html">GLDisplay</a></li>
<li class="toctree-l4"><a class="reference internal" href="LibModBus.html">LibModBus</a></li>
<li class="toctree-l4"><a class="reference internal" href="SuperlumBS.html">SuperlumBS</a></li>
<li class="toctree-l4"><a class="reference internal" href="SuperlumBL.html">SuperlumBL</a></li>
<li class="toctree-l4"><a class="reference internal" href="libUSB.html">LibUSB</a></li>
<li class="toctree-l4 current"><a class="current reference internal" href="#">HidApi</a><ul>
<li class="toctree-l5"><a class="reference internal" href="#overview">Overview</a></li>
<li class="toctree-l5"><a class="reference internal" href="#initialization">Initialization</a></li>
<li class="toctree-l5"><a class="reference internal" href="#parameters">Parameters</a></li>
<li class="toctree-l5"><a class="reference internal" href="#usage">Usage</a></li>
<li class="toctree-l5"><a class="reference internal" href="#changelog">Changelog</a></li>
</ul>
</li>
<li class="toctree-l4"><a class="reference internal" href="CyUSB.html">CyUSB</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins.html#ad-converters">AD-Converters</a></li>
<li class="toctree-l3"><a class="reference internal" href="../../plugins.html#algorithms">Algorithms</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../plugins.html#plugin-development">Plugin Development</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../collaboration.html">Collaboration</a></li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="libUSB.html"
                        title="previous chapter">LibUSB</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="CyUSB.html"
                        title="next chapter">CyUSB</a></p>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="hidapi">
<h1>HidApi<a class="headerlink" href="#hidapi" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Summary</strong>:</td>
<td><span>itom-plugin for a usb HID API communication</span></td>
</tr>
<tr class="row-even"><td><strong>Type</strong>:</td>
<td><span>DataIO</span></td>
</tr>
<tr class="row-odd"><td><strong>License</strong>:</td>
<td><span>licensed under LGPL</span></td>
</tr>
<tr class="row-even"><td><strong>Platforms</strong>:</td>
<td>Windows, Linux, Mac</td>
</tr>
<tr class="row-odd"><td><strong>Devices</strong>:</td>
<td>Any generic HID device</td>
</tr>
<tr class="row-even"><td><strong>Author</strong>:</td>
<td><span>M. Gronle, ITO, University of Stuttgart</span></td>
</tr>
</tbody>
</table>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>HidApi is a plugin which gives direct/raw access to HID compliant devices (e.g. via USB).
It can be used by plugins for communication analog to the serial port.
The plugin is implemented for Windows, Linux and Mac.</p>
<p>To connect to a device you need the vendor id and the product id.</p>
<p>The setVal and getVal functions will write and read on the output or on the feature.</p>
</div>
<div class="section" id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h2>
<p>The following parameters are mandatory or optional for initializing an instance of this plugin:</p>
<blockquote>
<div><ul>
<li><dl class="first docutils">
<dt><strong>vendor_id</strong>: {int} [0,65535], default: 0, step: 1</dt>
<dd><p class="first last">The vendor id of the device to connect to (0 will return a list of all devices if &#8216;print_info_about_all_devices&#8217; is 1).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>product_id</strong>: {int} [0,65535], default: 0, step: 1</dt>
<dd><p class="first last">The product id of the device to connect to (0 will return a list of all devices if &#8216;print_info_about_all_devices&#8217; is 1).</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>serial_number</strong>: {str, optional} default:</dt>
<dd><p class="first last">Optional serial number of device that should be opened.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>print_info_about_all_devices</strong>: {int, optional} [0,1], default: 0, step: 1</dt>
<dd><p class="first last">If true, all information about connected devices is print to the console.</p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>An instance of this plugin has the following internal parameters:</p>
<dl class="docutils">
<dt><strong>debug</strong>: {int}</dt>
<dd>If true, all out and inputs are written to dockingWidget</dd>
<dt><strong>manufacturer</strong>: {str}, read-only</dt>
<dd>manufacturer string</dd>
<dt><strong>name</strong>: {str}, read-only</dt>
<dd>name of device</dd>
<dt><strong>product</strong>: {str}, read-only</dt>
<dd>product string</dd>
<dt><strong>serial_number</strong>: {str}, read-only</dt>
<dd>serial number string</dd>
<dt><strong>use_feature_report_not_output</strong>: {int}</dt>
<dd>if true, getVal and setVal will operate on feature reports, else on the output buffer (default)</dd>
</dl>
</div>
<div class="section" id="usage">
<h2>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>In order to check all connected HID devices, open an instance of HidApi with <em>vendor_id</em> = 0, <em>product_id</em> = 0 and <em>print_info_about_all_devices</em> = 1 (True).
Then, a list of all detected devices is print to the command line.</p>
<p>Once, the right device is detected (e.g. by its vendor and product id and optionally by its serial number), open an instance with the right
parameters.</p>
<p>A command is sent by the method <strong>setVal</strong>, the answer can be read by <strong>getVal</strong>. Usually, all commands are sent and answers read via the default output
and input lines of the HID communication. In order to start a communcation via the feature port, set the parameter <strong>use_feature_report_not_output</strong> to 1 (instead of 0).
The communcation is done via <strong>bytearray</strong> in Python. Usually the first element in a bytearray must be set to the report id (this depends on your device).</p>
<p>An example is:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">trans</span> <span class="o">=</span> <span class="p">[</span><span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x05</span><span class="p">,</span> <span class="mh">0x10</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">,</span> <span class="mh">0x00</span><span class="p">]</span>
<span class="n">hidDevice</span><span class="o">.</span><span class="n">setVal</span><span class="p">(</span><span class="nb">bytearray</span><span class="p">(</span><span class="n">trans</span><span class="p">))</span>
<span class="n">answer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">50</span><span class="p">)</span> <span class="c1">#init buffer with 50 characters</span>
<span class="n">numSignsRead</span> <span class="o">=</span> <span class="n">hidDevice</span><span class="o">.</span><span class="n">getVal</span><span class="p">(</span><span class="n">answer</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="changelog">
<h2>Changelog<a class="headerlink" href="#changelog" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>itom 2.1.0: initial version of HidApi, compiled with hidapi-0.7.0</li>
<li>itom 2.2.0: initial version of HidApi, compiled with hidapi-0.7.0</li>
</ul>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="CyUSB.html" title="CyUSB"
             >next</a></li>
        <li class="right" >
          <a href="libUSB.html" title="LibUSB"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../../index.html">itom</a> &raquo;</li>
          <li class="nav-item nav-item-1"><a href="../../plugins.html" >Plugins</a> &raquo;</li> 
      </ul>
    </div>

    <div class="footer" role="contentinfo">
        &copy; Copyright 2016, Institut für Technische Optik, Universität Stuttgart.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.2.
    </div>
<div class="footer">This page uses <a href="http://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com.
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51395951-1', 'bitbucket.org');
  ga('send', 'pageview');

</script>
</div>

  </body>
</html>