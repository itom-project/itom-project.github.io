
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1.0,user-scalable=no, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
	<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Roboto:200,400,500,700" rel="stylesheet">

    
    <title>DispWindow &#8212; itom</title>

    <link rel="stylesheet" href="../../_static/MDL_theme.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/MDL/material.itom.min.em.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/AnimHeader.css" type="text/css" />
    <script type="text/javascript" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <script type="text/javascript" src="../../_static/MDL/material.min.js"></script>
    <script type="text/javascript" src="../../_static/MDL_theme.js"></script>
    <script type="text/javascript" src="../../_static/AnimHeader.js"></script>
    <link rel="shortcut icon" href="../../_static/ITOMfavicon.ico"/>
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="GLDisplay" href="glDisplay.html" />
    <link rel="prev" title="SuperlumBS" href="SuperlumBS.html" /> 
  </head><body>

<div class="mdl-layout mdl-js-layout mdl-layout--fixed-header mdl-layout--fixed-drawer">
    <header class="mdl-layout__header mdl-layout__header--waterfall ">
    <div class="mdl-layout__header-row">
        
        <nav class="mdl-navigation breadcrumb">
            <a class="mdl-navigation__link" href="../../plugins.html">Plugins</a><i class="material-icons">navigate_next</i>
            <a class="mdl-navigation__link" href="../GDIO.html">General Data IO</a><i class="material-icons">navigate_next</i>
            <a class="mdl-navigation__link is-active">DispWindow</a>
        </nav>
        <div class="mdl-layout-spacer"></div>
		
		<a href="https://sourceforge.net/projects/itom/" target="_blank" alt="Download ITOM">
			<button class="mdl-button mdl-js-button mdl-button--raised mdl-button--accent hideSmall" style="margin-right: 20px;">
            	<span class="mdl-color-text--white">Download</span>
				<i class="material-icons mdl-color-text--white">&#xe2c4</i>
			</button>
		</a>
		
		
		<a href="glDisplay.html" alt="Next">
		<button class="mdl-button mdl-js-button mdl-button--icon mdl-button--raised mdl-button--accent" style="margin-right: 10px;">
			<i class="material-icons mdl-color-text--white" >&#xE5CC;</i>
		</button>
		</a>
		
		
		
		<label class="mdl-button mdl-js-button mdl-button--icon mdl-button--colored">
			<a href="../../index.html" alt="Home">
				<i class="material-icons">home</i>
			</a>
		</label>
		
<form class="form-inline pull-sm-right" action="../../search.html" method="get">
      <div class="mdl-textfield mdl-js-textfield mdl-textfield--expandable mdl-textfield--floating-label mdl-textfield--align-right">
        <label class="mdl-button mdl-js-button mdl-button--icon"  for="waterfall-exp">
            <i class="material-icons">search</i>
        </label>
        <div class="mdl-textfield__expandable-holder">
          <input class="mdl-textfield__input" type="text" name="q"  id="waterfall-exp" placeholder="Search" />
          <input type="hidden" name="check_keywords" value="yes" />
          <input type="hidden" name="area" value="default" />
        </div>
      </div>
</form>
    </div>
	<!--
    <div class="mdl-layout__header-row header-links">
		<div class="mdl-layout-spacer"></div>
		<nav class="mdl-navigation">
		
	  </nav>
    </div>-->
</header>
    <header class="mdl-layout__drawer">
    
          <!-- Title -->
      <span class="mdl-layout-title">
          <a class="brand" href="../../index.html">
              <img class="logo" src="../../_static/itomlogo.png" alt="itom"/>
          </a>
      </span>
    

    
    
        <nav class="mdl-navigation">
        <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../start.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../features.html">Features</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../download.html">Downloads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation.html">Documentation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../plugins.html">Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../grabbers.html">Camera/ Grabber</a></li>
<li class="toctree-l2"><a class="reference internal" href="../actuators.html">Motors/ Actuators</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="../GDIO.html">General Data IO</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="CyUSB.html">CyUSB</a></li>
<li class="toctree-l3"><a class="reference internal" href="LibModBus.html">LibModBus</a></li>
<li class="toctree-l3"><a class="reference internal" href="SuperlumBL.html">SuperlumBL</a></li>
<li class="toctree-l3"><a class="reference internal" href="SuperlumBS.html">SuperlumBS</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">DispWindow</a></li>
<li class="toctree-l3"><a class="reference internal" href="glDisplay.html">GLDisplay</a></li>
<li class="toctree-l3"><a class="reference internal" href="gwInstekPSP.html">GWInstekPSP</a></li>
<li class="toctree-l3"><a class="reference internal" href="hidApi.html">HidApi</a></li>
<li class="toctree-l3"><a class="reference internal" href="libUSB.html">LibUSB</a></li>
<li class="toctree-l3"><a class="reference internal" href="serialIO.html">SerialIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="thorlabsPowerMeter.html">Thorlabs Power Meter</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../adconv.html">AD-Converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../algorithms.html">Algorithms/ Filters</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../screenshots.html">Screenshots</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../collaboration.html">Collaboration</a></li>
</ul>

        </nav>
    

</header>
    
	<main class="mdl-layout__content">
	

        <div class="page-content">
            
  <div class="section" id="dispwindow">
<h1>DispWindow<a class="headerlink" href="#dispwindow" title="Permalink to this headline">¶</a></h1>
<table border="1" class="docutils">
<colgroup>
<col width="13%" />
<col width="87%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><strong>Summary</strong>:</td>
<td><span>Window for SLM/LCD-Applications</span></td>
</tr>
<tr class="row-even"><td><strong>Type</strong>:</td>
<td><span>DataIO</span></td>
</tr>
<tr class="row-odd"><td><strong>License</strong>:</td>
<td><span>LGPL</span></td>
</tr>
<tr class="row-even"><td><strong>Platforms</strong>:</td>
<td>Windows, Linux</td>
</tr>
<tr class="row-odd"><td><strong>Devices</strong>:</td>
<td>OpenGL based widget to show cosine and graycode sequences</td>
</tr>
<tr class="row-even"><td><strong>Author</strong>:</td>
<td><span>C. Kohler, ITO, University Stuttgart</span></td>
</tr>
</tbody>
</table>
<div class="section" id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">¶</a></h2>
<p>This plugin opens a borderless window at a given position and displays horizontal or vertical cosine fringes including various graycode fringes (for unwrapping). The visualization is done with the help of OpenGL and the open source library GLEW.</p>
<p>For building this plugin, download (the binaries) of glew from <a class="reference external" href="http://glew.sourceforge.net/">http://glew.sourceforge.net/</a> and set the variable GLEW_DIR in CMake to the corresponding folder. The necessary library will finally be copied to the lib-folder of itom such that an entry in the environment variable path is not necessary. Please make sure, that you use always the same version of glew for all plugins that require this library.</p>
</div>
<div class="section" id="initialization">
<h2>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h2>
<p>The following parameters are mandatory or optional for initializing an instance of this plugin:</p>
<blockquote>
<div><ul class="simple">
<li><dl class="first docutils">
<dt><strong>x0</strong>: {int, optional} [-4096,4096], default: 0, step: 1</dt>
<dd>x0 position of window</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>y0</strong>: {int, optional} [-4096,4096], default: 0, step: 1</dt>
<dd>y0 position of window</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>xsize</strong>: {int, optional} [3,4096], default: 3, step: 1</dt>
<dd>height of window</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>ysize</strong>: {int, optional} [3,4096], default: 3, step: 1</dt>
<dd>width of window</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>period</strong>: {int, optional} [4,4096], default: 12, step: 2</dt>
<dd>cosine period in pixel</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>phaseshift</strong>: {int, optional} [3,8], default: 4, step: 1</dt>
<dd>number of total phase shifts</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>lut</strong>: {seq. of int (char), optional}</dt>
<dd>Lookup table for a gamma correction with 256 values. If given, the gamma correction will be enabled (default: off) and the projected values are then modified with lut[value].</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>dObj</strong>: {dataObject, optional}</dt>
<dd>DataObject with pixel values to display</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="parameters">
<h2>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h2>
<p>Every instance of this plugin has the following parameters:</p>
<dl class="docutils">
<dt><strong>color</strong>: {int}</dt>
<dd>0: Red, 1: Green, 2: Blue, 3: White</dd>
<dt><strong>gamma</strong>: {int}</dt>
<dd>0: disable gamma correction, 1: enable gamma correction; default disable (see also ‘lut’)</dd>
<dt><strong>lut</strong>: {seq. of int (char)}</dt>
<dd>Lookup table for a gamma correction with 256 values. The gamma correction itself is en-/disabled via parameter ‘gamma’. If enabled, the value to display is modified by lut[value]. Per default the lut is a 1:1 relation.</dd>
<dt><strong>name</strong>: {str}, read-only</dt>
<dd>name of the plugin</dd>
<dt><strong>numgraybits</strong>: {int}, read-only</dt>
<dd>Number of different images: Phaseshift + GrayCode + 2</dd>
<dt><strong>numimg</strong>: {int}</dt>
<dd>Number of current image (phase images, dark image, bright image, graycode images)</dd>
<dt><strong>orientation</strong>: {int}</dt>
<dd>0: vertical, 1: horizontal; default: vertical</dd>
<dt><strong>period</strong>: {int}</dt>
<dd>Cosine period in pixel. This must be a multiple of 2 and the number of ‘phaseshift’.</dd>
<dt><strong>phaseshift</strong>: {int}</dt>
<dd>Count of phase shifts. If this value is changed and the ‘period’ does not fit to the new value, the ‘period’ is adapted to the next possible value.</dd>
<dt><strong>x0</strong>: {int}</dt>
<dd>x0 position of display window [px]</dd>
<dt><strong>xsize</strong>: {int}</dt>
<dd>width of window [px]</dd>
<dt><strong>y0</strong>: {int}</dt>
<dd>y0 position of display window [px]</dd>
<dt><strong>ysize</strong>: {int}</dt>
<dd>height of window [px]</dd>
</dl>
</div>
<div class="section" id="gamma-correction">
<h2>Gamma correction<a class="headerlink" href="#gamma-correction" title="Permalink to this headline">¶</a></h2>
<p>If the parameter <em>gamma</em> is set to 0, no further gamma correction is enabled. This means, that the gray values of the cosine fringes are
directly displayed as they are using a 8bit resolution:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">screen_pixel</span> <span class="o">=</span> <span class="nb">round</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])</span>
</pre></div>
</div>
<p>However, if your camera and projector has a non-linear behaviour between displayed and detected gray value, a gamma correction can and should
be enabled. Then, the displayed gray value is:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">screen_pixel</span> <span class="o">=</span> <span class="n">lut</span><span class="p">[</span><span class="nb">round</span><span class="p">(</span><span class="mi">255</span> <span class="o">*</span> <span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="n">cos</span><span class="p">(</span><span class="n">alpha</span><span class="p">)</span> <span class="o">+</span> <span class="mi">1</span><span class="p">])]</span>
</pre></div>
</div>
<p>The lookup table (lut) consists of 256 values. In order to register the lookup table, you can project a uniform background with uniformly distributed
gray-values (at least 64 different values) between 0 and full resolution (e.g. 255). The values should be sorted beginning with the darkest one until ‘white’:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">256</span><span class="p">,</span><span class="mi">4</span><span class="p">):</span>
    <span class="n">projector</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;projectGrayValue&quot;</span><span class="p">,</span> <span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">displaying any other image (graycode or cosine fringe) will clear the gray valued image</p>
</div>
<p>Then, record every uniform projection with the camera and determine the mean gray value. You then get a list of gray values, like the following one:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">g</span> <span class="o">=</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">28</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="mi">38</span><span class="p">,</span> <span class="mi">50</span><span class="p">,</span> <span class="mi">90</span><span class="p">,</span> <span class="mi">92</span><span class="p">,</span> <span class="mi">96</span><span class="p">,</span> <span class="o">...</span> <span class="mi">198</span><span class="p">]</span>
</pre></div>
</div>
<p>Call the <strong>exec</strong> function <strong>calcLut</strong> and pass <em>g</em> in order to let the plugin calculate the <em>lut</em> (based on a linear interpolation if <em>g</em> contains less values
than 256):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">projector</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;calcLut&quot;</span><span class="p">,</span> <span class="n">g</span><span class="p">)</span>
</pre></div>
</div>
<p>Then, you need to enable the gamma correction:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">projector</span><span class="o">.</span><span class="n">setParam</span><span class="p">(</span><span class="s2">&quot;gamma&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>Finally, the <em>lut</em> (parameter <em>lut</em>) contains values, such that the recorded gray values applying the same uniformly distributed background images are linearly distributed.</p>
</div>
<div class="section" id="save-current-view-to-image-file">
<h2>Save current view to image file<a class="headerlink" href="#save-current-view-to-image-file" title="Permalink to this headline">¶</a></h2>
<p>Use the exec function <strong>grabFramebuffer</strong> to save the currently displayed view in the same size to an image file (the file type is determined by the file’s ending (file type must be
supported by Qt’s QImage):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">projector</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;grabFramebuffer&quot;</span><span class="p">,</span> <span class="s2">&quot;D:/test.pgm&quot;</span><span class="p">)</span> <span class="c1">#or</span>
<span class="n">projector</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;grabFramebuffer&quot;</span><span class="p">,</span> <span class="s2">&quot;D:/test.jpg&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>


            <div class="pagenation">
               <a id="button-prev" href="SuperlumBS.html" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" role="botton" accesskey="P">
                   <i class="material-icons">arrow_back</i>PREVIOUS
               </a>
            <div class="mdl-tooltip" data-mdl-for="button-prev">
            SuperlumBS
            </div>
               <a id="button-next" href="glDisplay.html" class="mdl-button mdl-js-button mdl-button--raised mdl-js-ripple-effect mdl-button--accent" role="botton" accesskey="N">
                    NEXT <i class="material-icons">arrow_forward</i>
               </a>
            <div class="mdl-tooltip" data-mdl-for="button-next">
            GLDisplay
            </div>
            </div>
        </div>
        <footer class="mdl-mini-footer">
    <div class="mdl-mini-footer__right-section">
        <div>&copy; Copyright 2018, Institut für Technische Optik, Universität Stuttgart.</div>
      <div>Generated by <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.7.1 using <a href="https://www.getmdl.io">Material Design Lite</a></div>
	<div>This page uses <a href="http://analytics.google.com/">Google Analytics</a>.
	<script>
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)})(window,document,'script','https://www.google-analytics.com/analytics.js','ga'); ga('create', 'UA-51395951-1', 'auto');ga('send', 'pageview');
	</script>
	</div>
    </div>
</footer>
    </main>
</div>
  </body>
</html>