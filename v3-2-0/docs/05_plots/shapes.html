

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>6.9. Geometric shapes in 1D and 2D plots &mdash; itom Documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/breathe.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="6.10. Matplotlib" href="matplotlib.html" />
    <link rel="prev" title="6.8. Markers in plots" href="markers.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> itom Documentation
          

          
          </a>

          
            
            
              <div class="version">
                3.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../00_releaseNotes/whats-new.html">1. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../01_introduction/introduction.html">2. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../02_installation/install.html">3. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../03_gettingStarted/getting-started.html">4. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../04_itom_gui/gui.html">5. The itom User Interface</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="plots.html">6. Plots and Figures</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="plotOverview.html">6.1. Quick tutorial to plots and figures</a></li>
<li class="toctree-l2"><a class="reference internal" href="figureManagement.html">6.2. Figure Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="plotClasses.html">6.3. Plot classes and default plots</a></li>
<li class="toctree-l2"><a class="reference internal" href="linePlots.html">6.4. line plots (1D)</a></li>
<li class="toctree-l2"><a class="reference internal" href="imagePlots.html">6.5. image plots (2D)</a></li>
<li class="toctree-l2"><a class="reference internal" href="isometricPlot.html">6.6. isometric Plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="vtk3dplot.html">6.7. 3D plot</a></li>
<li class="toctree-l2"><a class="reference internal" href="markers.html">6.8. Markers in plots</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">6.9. Geometric shapes in 1D and 2D plots</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#add-shapes-at-any-time-by-mouse">6.9.1. Add shapes at any time by mouse</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-shapes-by-mouse-upon-script-request">6.9.2. Add shapes by mouse upon script request</a></li>
<li class="toctree-l3"><a class="reference internal" href="#add-or-edit-shapes-by-script">6.9.3. Add or edit shapes by script</a></li>
<li class="toctree-l3"><a class="reference internal" href="#signals-connected-to-shape-manipulations">6.9.4. Signals connected to shape manipulations</a></li>
<li class="toctree-l3"><a class="reference internal" href="#modify-or-select-shapes-by-mouse">6.9.5. Modify or select shapes by mouse</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="matplotlib.html">6.10. Matplotlib</a></li>
<li class="toctree-l2"><a class="reference internal" href="primitives.html">6.11. Markers, user selections and geometric shapes</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../06_extended_gui/extended_gui.html">7. Extending the user interface of <strong>itom</strong></a></li>
<li class="toctree-l1"><a class="reference internal" href="../07_plugins/plugins.html">8. Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="../08_scriptLanguage/script-language.html">9. Python scripting language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../09_reference/reference.html">10. itom Script Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../10_miscellaneous/miscellaneous.html">11. Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../11_test-scripts/test-scripts.html">12. Demo scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../12_tutorials/tutorials.html">13. Python tutorials</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">itom Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="plots.html">6. Plots and Figures</a> &raquo;</li>
        
      <li>6.9. Geometric shapes in 1D and 2D plots</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/05_plots/shapes.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="geometric-shapes-in-1d-and-2d-plots">
<span id="plot-shapes"></span><h1>6.9. Geometric shapes in 1D and 2D plots<a class="headerlink" href="#geometric-shapes-in-1d-and-2d-plots" title="Permalink to this headline">¶</a></h1>
<p>The Qwt-based plot plugins <span class="xref std std-ref">itom1dqwtplot</span> and <span class="xref std std-ref">itom2dqwtplot</span> support drawing
geometric shapes with sub-pixel precision onto the plot canvas. These shapes can be added either by the mouse clicks on the canvas or
by script commands. Each shape is represented by the class <a class="reference internal" href="../09_reference/shape.html#itom.shape" title="itom.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a>. Depending on optionally flags of each shape, it is
then possible to resize or move it my the mouse, too. The following subset of <a class="reference internal" href="../09_reference/shape.html#itom.shape" title="itom.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a> is currently supported by both plot types:</p>
<ul class="simple">
<li><p>Point or Multipoint</p></li>
<li><p>Line (connecting a start with an end point)</p></li>
<li><p>Rectangle (alignment parallel to plot axes)</p></li>
<li><p>Square (alignment parallel to plot axes, both side lengths are equal)</p></li>
<li><p>Ellipse (alignment parallel to plot axes)</p></li>
<li><p>Circle (alignment parallel to plot axes)</p></li>
</ul>
<p>In this section, you will learn about the different possibilities how to put shapes onto the canvas, how to configure this process, how to
modify such shapes and how to get information about the type, position and form of the shapes that are currently drawn.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The content of this chapter is only applicable to plots created from the figure classes <a class="reference internal" href="linePlots.html#itom1dqwtplot"><span class="std std-ref">itom1dqwtplot</span></a> or <a class="reference internal" href="imagePlots.html#itom2dqwtplot"><span class="std std-ref">itom2dqwtplot</span></a></p>
</div>
<div class="section" id="add-shapes-at-any-time-by-mouse">
<h2>6.9.1. Add shapes at any time by mouse<a class="headerlink" href="#add-shapes-at-any-time-by-mouse" title="Permalink to this headline">¶</a></h2>
<p>It is possible to add single shapes by mouse clicks. Before adding a new shape, you have to chose the desired shape from the menu in the
toolbar or menu <strong>Tools</strong> of the plot:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/shapesByMenuAction.png"><img alt="../_images/shapesByMenuAction.png" src="../_images/shapesByMenuAction.png" style="width: 591.0px; height: 300.0px;" /></a>
</div>
<p>Then, click somewhere on the canvas to mark a start point and release the mouse button at the end point. If at least one shape is placed at the canvas,
the button to clear all shapes becomes enabled, such that a click on this button will remove all shapes (independent on their types).</p>
<p>It is possible to disable the ability to add shapes at any time by user interaction. This is controlled by the property <strong>geometricShapesDrawingEnabled</strong> of the plot.
Additionally, it is possible to restrict the allowed types of shapes to few types by setting another bitmask to the property <strong>allowedGeometricShapes</strong>.</p>
<p>In the following example, a new 2D plot is opened and configured such that the user can only draw Squares and Circles to the canvas:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="p">[</span><span class="nb">id</span><span class="p">,</span> <span class="n">handle</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">dataObject</span><span class="o">.</span><span class="n">randN</span><span class="p">([</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">],</span><span class="s1">&#39;float32&#39;</span><span class="p">),</span> <span class="s1">&#39;itom2dqwtplot&#39;</span><span class="p">)</span>
<span class="c1">#if the figure class itom2dqwtplot is the default class for static,</span>
<span class="c1">#2d plots of dataObjects, the argument &#39;itom2dqwtplot&#39; is not required</span>
<span class="c1">#in the plot command above</span>

<span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometricShapesDrawingEnabled&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="bp">True</span>
<span class="n">handle</span><span class="p">[</span><span class="s2">&quot;allowedGeometricShapes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Square;Circle&quot;</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you add a square or circle to the canvas, it might be, that the shape might seem not to have the same edge lengths, since the coordinate system for shapes
is always the coordinate system of the plot axes, mainly defined by the physical coordinates of the displayed <a class="reference internal" href="../09_reference/dataObject.html#itom.dataObject" title="itom.dataObject"><code class="xref py py-class docutils literal notranslate"><span class="pre">dataObject</span></code></a>. This might differ from
the single pixels in a dataObject if its attributes <a class="reference internal" href="../09_reference/dataObject.html#itom.dataObject.axisScales" title="itom.dataObject.axisScales"><code class="xref py py-attr docutils literal notranslate"><span class="pre">axisScales</span></code></a> or <a class="reference internal" href="../09_reference/dataObject.html#itom.dataObject.axisOffsets" title="itom.dataObject.axisOffsets"><code class="xref py py-attr docutils literal notranslate"><span class="pre">axisOffsets</span></code></a> are unequal to 1.0 and 0.0 respectively.</p>
</div>
</div>
<div class="section" id="add-shapes-by-mouse-upon-script-request">
<h2>6.9.2. Add shapes by mouse upon script request<a class="headerlink" href="#add-shapes-by-mouse-upon-script-request" title="Permalink to this headline">¶</a></h2>
<p>Independent of the method above, it is possible to force a user to draw a given number and given type of geometric shapes onto the canvas.
This is possible even if the property <strong>geometricShapesDrawingEnabled</strong> is set to False, such that no shapes can be added by clicking any option in the toolbar or menu.</p>
<p>There are two different possibilities how to force the user to add new shapes to the canvas:</p>
<ol class="arabic">
<li><p><strong>Modal user interaction</strong></p>
<blockquote>
<div><p>The user is forced to draw one or more shapes onto the canvas by a specific command in Python. The script execution is blocked until the requested number of shapes
has been added (or the user interrupted the script or pressed the Esc key). All new shapes are immediately returned to the script for further processing.</p>
</div></blockquote>
</li>
<li><p><strong>Non-modal user interaction</strong></p>
<blockquote>
<div><p>The user can be forced to draw one or more shapes onto the canvas by a script command. However, the script does not wait and immediately continues with the execution. Once
the user has finished adding the required number of shapes or aborted it, a signal is emitted from the plot. In the script, a Python method should be connected to that signal before
starting the user interaction.</p>
</div></blockquote>
</li>
</ol>
<p>The modal implementation is done by the command <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem.drawAndPickElements" title="itom.plotItem.drawAndPickElements"><code class="xref py py-meth docutils literal notranslate"><span class="pre">drawAndPickElements()</span></code></a>. This is a general method of the class <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem" title="itom.plotItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotItem</span></code></a>, but it is only implemented for some
plot widgets. The returned plot handle of the commands <a class="reference internal" href="../09_reference/itom_general.html#itom.plot" title="itom.plot"><code class="xref py py-meth docutils literal notranslate"><span class="pre">plot()</span></code></a> or <a class="reference internal" href="../09_reference/itom_general.html#itom.liveImage" title="itom.liveImage"><code class="xref py py-meth docutils literal notranslate"><span class="pre">liveImage()</span></code></a> is always an instance of <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem" title="itom.plotItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotItem</span></code></a>. However, if the plot widget is
integrated in an user interface, the reference to every widget is only given in terms of the base class <a class="reference internal" href="../09_reference/itom_GUI.html#itom.uiItem" title="itom.uiItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">uiItem</span></code></a>. You can however savely cast the given handle to a plot widget
of itom to <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem" title="itom.plotItem"><code class="xref py py-class docutils literal notranslate"><span class="pre">plotItem</span></code></a> in oder to get access to the method <a class="reference internal" href="../09_reference/plotItem.html#itom.plotItem.drawAndPickElements" title="itom.plotItem.drawAndPickElements"><code class="xref py py-meth docutils literal notranslate"><span class="pre">drawAndPickElements()</span></code></a> (see the demo script <em>ui/uiShapeDemo.py</em> for an example about this).</p>
<p>In the following example, the user is forced to draw two rectangles onto the canvas and then a masked dataObject is plotted in a new window:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8
9</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">image</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">randN</span><span class="p">([</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">],</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="nb">id</span><span class="p">,</span> <span class="n">handle</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;itom2dqwtplot&#39;</span><span class="p">)</span>
<span class="n">shapes</span> <span class="o">=</span> <span class="n">handle</span><span class="o">.</span><span class="n">drawAndPickElements</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">,</span> <span class="mi">2</span><span class="p">)</span>
<span class="c1">#if the interaction is aborted (e.g. by key Esc), a RuntimeError is thrown</span>

<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Rectangle 1:&quot;</span><span class="p">,</span> <span class="n">shapes</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Rectangle 2:&quot;</span><span class="p">,</span> <span class="n">shapes</span><span class="p">[</span><span class="mi">1</span><span class="p">])</span>
<span class="n">maskedObject</span> <span class="o">=</span> <span class="n">image</span><span class="o">.</span><span class="n">createMask</span><span class="p">(</span><span class="n">shapes</span><span class="p">)</span>
<span class="n">plot</span><span class="p">(</span><span class="n">maskedObject</span><span class="p">,</span> <span class="n">properties</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;title&quot;</span><span class="p">:</span><span class="s2">&quot;Masked object&quot;</span><span class="p">})</span>
</pre></div>
</td></tr></table></div>
<p>If the script execution should not be blocked after the user has been forced to add some shapes, you have to start the process by the slot <strong>userInteractionStart</strong>. In order to get
informed about added shapes or the process being finished, you have to previously connect to one or multiple signals that are appropriate to your needs. The signal that is emitted
at the end of the user interaction or if the user aborted it by pressing the Esc key on the plot, has the name <strong>userInteractionDone</strong>. In the following example, the user is forced
to draw three lines. At the end, the method <strong>finished</strong> is called:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">interactionDone</span><span class="p">(</span><span class="n">shapeType</span><span class="p">,</span> <span class="n">aborted</span><span class="p">,</span> <span class="n">newShapes</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">aborted</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;The user cancelled the creation of new shapes&quot;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">print</span><span class="p">(</span><span class="s2">&quot;The user added the following shapes:&quot;</span><span class="p">,</span> <span class="nb">str</span><span class="p">(</span><span class="n">newShapes</span><span class="p">))</span>

<span class="n">image</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">randN</span><span class="p">([</span><span class="mi">25</span><span class="p">,</span><span class="mi">25</span><span class="p">],</span><span class="s1">&#39;float32&#39;</span><span class="p">)</span>
<span class="p">[</span><span class="nb">id</span><span class="p">,</span> <span class="n">handle</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">image</span><span class="p">,</span> <span class="s1">&#39;itom2dqwtplot&#39;</span><span class="p">)</span>
<span class="n">handle</span><span class="o">.</span><span class="n">connect</span><span class="p">(</span><span class="s2">&quot;userInteractionDone(int,bool,QVector&lt;ito::Shape&gt;)&quot;</span><span class="p">,</span> <span class="n">interactionDone</span><span class="p">)</span>
<span class="n">handle</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;userInteractionStart&quot;</span><span class="p">,</span> <span class="n">shape</span><span class="o">.</span><span class="n">Line</span><span class="p">,</span> <span class="bp">True</span><span class="p">,</span> <span class="mi">3</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The plot might look like the following image after having added the first line:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/shapesByUserInteraction.png"><img alt="../_images/shapesByUserInteraction.png" src="../_images/shapesByUserInteraction.png" style="width: 584.0px; height: 344.0px;" /></a>
</div>
<p>It is also possible to abort a non-modal user interaction by the slot <strong>userInteractionStart</strong> with <strong>-1</strong> as first argument. This allows interrupting this process for instance by clicking
a cancel button:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">handle</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;userInteractionStart&quot;</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="bp">False</span><span class="p">)</span>
<span class="c1">#-1 signifies: no type to draw</span>
<span class="c1">#False signifies: abort an user interaction</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="add-or-edit-shapes-by-script">
<h2>6.9.3. Add or edit shapes by script<a class="headerlink" href="#add-or-edit-shapes-by-script" title="Permalink to this headline">¶</a></h2>
<p>There are various properties and slots available, that allow setting one or multiple shapes, editing existing shapes, deleting shapes or replace all shapes by a new sequence of shapes.
For most of these operations it is necessary to create the required instances of <a class="reference internal" href="../09_reference/shape.html#itom.shape" title="itom.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a> before setting a property of calling a slot. The simplest way to set a sequence
of shapes that replace all existing shapes and are displayed in the coordinate system of the plot’s axes, is to assign the shapes to the property <strong>geometricShapes</strong>. In the following
example, a rectangle, a line and a circle are placed onto the canvas (the dataObject has got a scaling factor of <em>0.1</em> as well as an offset of <em>100</em> in both the x- and y-axis):</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">],</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">axisScales</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">axisOffsets</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="n">handle</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1">#rectangle and line are defined by the two opposite corner points</span>
<span class="n">rectangle</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="o">-</span><span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="n">line</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Line</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="c1">#circle is defined by its center point and the edge length</span>
<span class="n">circle</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Circle</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="mf">4.3</span><span class="p">)</span>
<span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometricShapes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">circle</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>The result looks like the following image:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/shapesByScript.png"><img alt="../_images/shapesByScript.png" src="../_images/shapesByScript.png" style="width: 394.0px; height: 405.0px;" /></a>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can only shapes by script whose type is contained in the bitmask of the property <strong>allowedGeometricShapes</strong>. Per default, all supported shape types are allowed.</p>
</div>
<p>The current set of shapes, that are placed at the canvas of a plot, is requested by the same property <strong>geometricShapes</strong>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">shapes</span> <span class="o">=</span> <span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometricShapes&quot;</span><span class="p">]</span>
<span class="c1">#shapes is a tuple of shape</span>
<span class="n">plot</span><span class="p">(</span><span class="s2">&quot;There are&quot;</span><span class="p">,</span> <span class="nb">len</span><span class="p">(</span><span class="n">shapes</span><span class="p">),</span> <span class="s2">&quot;shapes on the canvas&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Every instance of <a class="reference internal" href="../09_reference/shape.html#itom.shape" title="itom.shape"><code class="xref py py-class docutils literal notranslate"><span class="pre">shape</span></code></a> can have an optional <a class="reference internal" href="../09_reference/shape.html#itom.shape.index" title="itom.shape.index"><code class="xref py py-attr docutils literal notranslate"><span class="pre">index</span></code></a> value. Per default, this is set to <strong>-1</strong> (undefined). Once you place a shape on the canvas,
its index is checked. If the shape has the default index <strong>-1</strong>, an auto-incremented index is assigned to the shape of the plot. This is then obtained in the tuple of shapes, returned
by the property <strong>geometricShapes</strong>. Using this index allows modifying or deleting this single shape. If the assigned shape already has a valid index (&gt;= 0), this index is untouched but still unique.
Whereas the slot <strong>updateGeometricShape</strong> replaces an existing shape with the same index by the given new shape, the slot <strong>addGeometricShape</strong> will raise a RuntimeError if the valid index of
the new shape already exists on the canvas.</p>
<p>To move the rectangle, assigned in the example above, it is possible to use the following snippet:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1
2
3
4
5
6
7
8</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">shapes</span> <span class="o">=</span> <span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometricShapes&quot;</span><span class="p">]</span>
<span class="n">rectangle</span> <span class="o">=</span> <span class="n">shapes</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Rectangle has index&quot;</span><span class="p">,</span> <span class="n">rectangle</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="c1">#translate the rectangle by x=6 and y=4.5 in axis coordinates</span>
<span class="n">rectangle</span><span class="o">.</span><span class="n">translate</span><span class="p">([</span><span class="mi">6</span><span class="p">,</span> <span class="mf">4.5</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;Rectangle has index&quot;</span><span class="p">,</span> <span class="n">rectangle</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="s2">&quot;The corner points are:&quot;</span><span class="p">,</span> <span class="n">rectangle</span><span class="o">.</span><span class="n">point1</span><span class="p">,</span> <span class="n">rectangle</span><span class="o">.</span><span class="n">point2</span><span class="p">)</span>
<span class="n">handle</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;updateGeometricShape&quot;</span><span class="p">,</span> <span class="n">rectangle</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<p>To clear the rectangle, execute:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">handle</span><span class="o">.</span><span class="n">call</span><span class="p">(</span><span class="s2">&quot;deleteGeometricShape&quot;</span><span class="p">,</span> <span class="n">rectangle</span><span class="o">.</span><span class="n">index</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
</div>
<div class="section" id="signals-connected-to-shape-manipulations">
<h2>6.9.4. Signals connected to shape manipulations<a class="headerlink" href="#signals-connected-to-shape-manipulations" title="Permalink to this headline">¶</a></h2>
<p>Whenever a geometric shape is added, modified or removed from the canvas (independent on the method), the plot emits various signals. You can connect methods to
one or multiple signals in order to react on these events. For more information about available signals, see the references for the <span class="xref std std-ref">itom1dqwtplot</span> and <span class="xref std std-ref">itom2dqwtplot</span> plot.</p>
</div>
<div class="section" id="modify-or-select-shapes-by-mouse">
<h2>6.9.5. Modify or select shapes by mouse<a class="headerlink" href="#modify-or-select-shapes-by-mouse" title="Permalink to this headline">¶</a></h2>
<p>Per default, you can select a single geometric shape by clicking anywhere on its contour. Then, the line width of the contour becomes thicker and small, active
areas are displayed at some corner points (comparable to shapes in Word, Inkscape,…). See the following image for an example of a select shape:</p>
<div class="figure align-center">
<a class="reference internal image-reference" href="../_images/selectShape.png"><img alt="../_images/selectShape.png" src="../_images/selectShape.png" style="width: 653.0px; height: 458.0px;" /></a>
</div>
<p>The index of the currently selected shape can be obtained by the property <strong>selectedGeometricShape</strong>. This is the index of the shape and must not always correspond to the index-position
of the shape in the tuple returned by the property <strong>geometricShapes</strong>.</p>
<p>It is possible to move a shape by clicking somewhere on the contour and releasing the mouse button at the new location. To modifiy the size of the shape, drag one of the active
areas to a new location.</p>
<p>It is not only possible to modifiy the available shapes, but you can also control whether the user is allowed to do a move or resize operation. This can be done either globally for
the plot and then all existing and future shapes or it can be done selectively for every shape. For the global control, set the bitmask of the plot property <strong>geometryModificationModes</strong>.
In the following example, move operations and resize operations should be globally allowed for all shapes:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre>1</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometryModificationModes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;Resize;Move&quot;</span>
</pre></div>
</td></tr></table></div>
<p>Besides the global modification settings, every shape can be also controlled with respect to its modification. However, if for instance a move-modification is globally forbidden, no shape
can be moved independently on their settings. The modification settings for every shape are controlled by the attribute <a class="reference internal" href="../09_reference/shape.html#itom.shape.flags" title="itom.shape.flags"><code class="xref py py-attr docutils literal notranslate"><span class="pre">flags</span></code></a>. It is a bitmask of the three possible
values:</p>
<ul class="simple">
<li><p>shape.MoveLock</p></li>
<li><p>shape.ResizeLock</p></li>
<li><p>shape.RotateLock</p></li>
</ul>
<p>The following example is the same than above, however the rectangle can only be moved while the circle can only be resized. The line can be both moved and resized:</p>
<div class="highlight-python notranslate"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre> 1
 2
 3
 4
 5
 6
 7
 8
 9
10
11
12
13
14
15
16
17</pre></div></td><td class="code"><div class="highlight"><pre><span></span><span class="n">data</span> <span class="o">=</span> <span class="n">dataObject</span><span class="o">.</span><span class="n">zeros</span><span class="p">([</span><span class="mi">200</span><span class="p">,</span><span class="mi">200</span><span class="p">],</span><span class="s1">&#39;uint8&#39;</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">axisScales</span><span class="o">=</span><span class="p">(</span><span class="mf">0.1</span><span class="p">,</span><span class="mf">0.1</span><span class="p">)</span>
<span class="n">data</span><span class="o">.</span><span class="n">axisOffsets</span> <span class="o">=</span> <span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">)</span>
<span class="p">[</span><span class="n">idx</span><span class="p">,</span><span class="n">handle</span><span class="p">]</span> <span class="o">=</span> <span class="n">plot</span><span class="p">(</span><span class="n">data</span><span class="p">)</span>

<span class="c1">#rectangle and line are defined by the two opposite corner points</span>
<span class="n">rectangle</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Rectangle</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="o">-</span><span class="mi">8</span><span class="p">),</span> <span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span>
<span class="n">rectangle</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">shape</span><span class="o">.</span><span class="n">ResizeLock</span> <span class="o">|</span> <span class="n">shape</span><span class="o">.</span><span class="n">RotateLock</span>

<span class="n">line</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Line</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">7</span><span class="p">,</span><span class="mi">0</span><span class="p">),</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="mi">4</span><span class="p">))</span>
<span class="n">line</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="mi">0</span> <span class="c1">#all allowed</span>

<span class="c1">#circle is defined by its center point and the edge length</span>
<span class="n">circle</span> <span class="o">=</span> <span class="n">shape</span><span class="p">(</span><span class="n">shape</span><span class="o">.</span><span class="n">Circle</span><span class="p">,</span> <span class="p">(</span><span class="mi">5</span><span class="p">,</span><span class="o">-</span><span class="mi">5</span><span class="p">),</span> <span class="mf">4.3</span><span class="p">)</span>
<span class="n">circle</span><span class="o">.</span><span class="n">flags</span> <span class="o">=</span> <span class="n">shape</span><span class="o">.</span><span class="n">MoveLock</span> <span class="o">|</span> <span class="n">shape</span><span class="o">.</span><span class="n">RotateLock</span>

<span class="n">handle</span><span class="p">[</span><span class="s2">&quot;geometricShapes&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">rectangle</span><span class="p">,</span> <span class="n">line</span><span class="p">,</span> <span class="n">circle</span><span class="p">)</span>
</pre></div>
</td></tr></table></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Any kind of rotation is currently not supported.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="matplotlib.html" class="btn btn-neutral float-right" title="6.10. Matplotlib" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="markers.html" class="btn btn-neutral float-left" title="6.8. Markers in plots" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2011-2016, Institut fuer Technische Optik (ITO), University Stuttgart. Bug report: https://bitbucket.org/itom/itom/issues
      <span class="lastupdated">
        Last updated on May 28, 2019.
      </span>

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>