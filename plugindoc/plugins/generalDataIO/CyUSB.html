<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>3.1. CyUSB &mdash; itom Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.2. LibModBus" href="LibModBus.html" />
    <link rel="prev" title="3. General Data IO" href="../GDIO.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> itom Plugins
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../grabbers.html">1. Camera/ Grabber</a></li>
<li class="toctree-l1"><a class="reference internal" href="../actuators.html">2. Motors/ Actuators</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../GDIO.html">3. General Data IO</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">3.1. CyUSB</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#overview">3.1.1. Overview</a></li>
<li class="toctree-l3"><a class="reference internal" href="#initialization">3.1.2. Initialization</a></li>
<li class="toctree-l3"><a class="reference internal" href="#parameters">3.1.3. Parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="#usage">3.1.4. Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#compilation">3.1.5. Compilation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#run-plugin">3.1.6. Run plugin</a></li>
<li class="toctree-l3"><a class="reference internal" href="#changelog">3.1.7. Changelog</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="LibModBus.html">3.2. LibModBus</a></li>
<li class="toctree-l2"><a class="reference internal" href="QuantumComposer.html">3.3. QuantumComposer</a></li>
<li class="toctree-l2"><a class="reference internal" href="SuperlumBL.html">3.4. SuperlumBL</a></li>
<li class="toctree-l2"><a class="reference internal" href="SuperlumBS.html">3.5. SuperlumBS</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThorlabsFF.html">3.6. ThorlabsFF</a></li>
<li class="toctree-l2"><a class="reference internal" href="ThorlabsTCubeTEC.html">3.7. ThorlabsTCubeTEC</a></li>
<li class="toctree-l2"><a class="reference internal" href="dispWindow.html">3.8. DispWindow</a></li>
<li class="toctree-l2"><a class="reference internal" href="glDisplay.html">3.9. GLDisplay</a></li>
<li class="toctree-l2"><a class="reference internal" href="gwInstekPSP.html">3.10. GWInstekPSP</a></li>
<li class="toctree-l2"><a class="reference internal" href="hidApi.html">3.11. HidApi</a></li>
<li class="toctree-l2"><a class="reference internal" href="libUSB.html">3.12. LibUSB</a></li>
<li class="toctree-l2"><a class="reference internal" href="serialIO.html">3.13. SerialIO</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../adconv.html">4. AD-Converters</a></li>
<li class="toctree-l1"><a class="reference internal" href="../algorithms.html">5. Algorithms/ Filters</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">itom Plugins</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../GDIO.html"><span class="section-number">3. </span>General Data IO</a> &raquo;</li>
      <li><span class="section-number">3.1. </span>CyUSB</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/plugins/generalDataIO/CyUSB.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="cyusb">
<h1><span class="section-number">3.1. </span>CyUSB<a class="headerlink" href="#cyusb" title="Permalink to this heading"></a></h1>
<table class="docutils align-default">
<colgroup>
<col style="width: 13%" />
<col style="width: 87%" />
</colgroup>
<tbody>
<tr class="row-odd"><td><p><strong>Summary</strong>:</p></td>
<td><p><span>itom-plugin for a USB port communication with Cypress Semiconductor USB chips.</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>Type</strong>:</p></td>
<td><p><span>DataIO</span></p></td>
</tr>
<tr class="row-odd"><td><p><strong>License</strong>:</p></td>
<td><p><span>licensed under LGPL</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>Platforms</strong>:</p></td>
<td><p>Windows</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Devices</strong>:</p></td>
<td><p>Any generic USB devices</p></td>
</tr>
<tr class="row-even"><td><p><strong>Author</strong>:</p></td>
<td><p><span>J Krauter, ITO University Stuttgart</span></p></td>
</tr>
</tbody>
</table>
<section id="overview">
<h2><span class="section-number">3.1.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this heading"></a></h2>
<p>ItomCyUSB is a itom-Plugin which gives direct/raw access to a device connected to the serial port.
It can be used by plugins for communication analog to the USB port.
The plugin is implemented for Window.</p>
<p>To connect to a device you need the vendor ID and the product ID.</p>
<p>The setVal and getVal functions will write and read on the specified endpoint.</p>
<p>!Only the setVal function could be tested!</p>
</section>
<section id="initialization">
<h2><span class="section-number">3.1.2. </span>Initialization<a class="headerlink" href="#initialization" title="Permalink to this heading"></a></h2>
<p>The following parameters are mandatory or optional for initializing an instance of this plugin:</p>
<blockquote>
<div><ul>
<li><dl>
<dt><strong>VendorID</strong>: int</dt><dd><p>The vendor ID of the device to connect to</p>
<p><em>Value range: [0, 65535], Default: 1204</em></p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>ProductID</strong>: int</dt><dd><p>The product ID of the device to connect to</p>
<p><em>Value range: [0, 65535], Default: 61696</em></p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>printInfoAboutAllDevices</strong>: int, optional</dt><dd><p>If true, all information about connected devices is printed to the console.</p>
<p><em>Value range: [0, 1], Default: 0</em></p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>debug</strong>: int, optional</dt><dd><p>If true, all communication commands are printed to the dockWidget.</p>
<p><em>Value range: [0, 1], Default: 0</em></p>
</dd>
</dl>
</li>
<li><dl>
<dt><strong>timeout</strong>: float, optional</dt><dd><p>Timeout for reading commands in [s].</p>
<p><em>Value range: [0, 65], Default: 4</em></p>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</section>
<section id="parameters">
<h2><span class="section-number">3.1.3. </span>Parameters<a class="headerlink" href="#parameters" title="Permalink to this heading"></a></h2>
<p>An instance of this plugin has the following internal parameters:</p>
<dl class="simple">
<dt><strong>debug</strong>: {int}</dt><dd><p>If true, all out and inputs are written to the dockWidget.</p>
</dd>
<dt><strong>endpoint_read</strong>: {int}</dt><dd><p>Endpoint index for reading operations. (default: first detected input endpoint.)</p>
</dd>
<dt><strong>endpoint_write</strong>: {int}</dt><dd><p>Endpoint index for writing operations. (default: first detected output endpoint.)</p>
</dd>
<dt><strong>name</strong>: {str}</dt><dd><p>name of device</p>
</dd>
<dt><strong>number_of_devices</strong>: {int}</dt><dd><p>maximum number of detected devices</p>
</dd>
<dt><strong>timeout</strong>: {float}</dt><dd><p>Timeout for reading commands in [s].</p>
</dd>
</dl>
</section>
<section id="usage">
<h2><span class="section-number">3.1.4. </span>Usage<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<p>Any USB device is defined by its vendor and product ID. Both are usually hex-values. If the connection is established via the GUI dialog, the corresponding integer
values need to be given. If you have no idea about the vendor and product ID, set the optional initialization parameter <em>printInfoAboutAllDevices</em> to 1 (True). Then,
information about all connected USB devices including its name and vendor / product ID is printed to the console.</p>
<p>Once the device is identified, you need to indicate a so called endpoint ID. The read- and write-communication with the device is done via several endpoints. All reading endpoints
are in the range 128..255 while the writing endpoints are between 0..127. For many devices the corresponding read/write endpoints have the same offset between its limit 0 and 128.
Therefore, the initialization only contains the parameter ‘endpoint’, such that <em>endpoint_read</em> is set to 128+endpoint and <em>endpoint_write</em> to ‘endpoint’. You can always change
the endpoints using the specific parameters.</p>
<p>Again, if you set <em>printInfoAboutAllDevices</em> to 1 at initialization, the available endpoints are also print to the console for the selected device. If the list can not resolve further
information for your selected device, this device can not be used by this generic plugin.</p>
<p>Once the USB-device is opened and the endpoints are configured, you can send and read data in the same way than via a serial connection (see help for plugin <strong>SerialIO</strong>).:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1">#send values:</span>
<span class="n">myCommand</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span>
<span class="n">usbDevice</span><span class="o">.</span><span class="n">setVal</span><span class="p">(</span><span class="n">myCommand</span><span class="p">)</span>

<span class="c1">#read values:</span>
<span class="n">deviceAnswer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">128</span><span class="p">)</span> <span class="c1">#buffer</span>
<span class="n">usbDevice</span><span class="o">.</span><span class="n">getVal</span><span class="p">(</span><span class="n">deviceAnswer</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">deviceAnswer</span><span class="p">)</span> <span class="c1">#number of characters read</span>
</pre></div>
</div>
<p>The command <strong>getVal</strong> only reads the number of characters that arrived at the current endpoint at the moment of its call. Analyze the return value and probably call <strong>getVal</strong>
again if you expect more characters to arrive. This is also the same behaviour than for serial connections.</p>
<p>This plugin is also used by other hardware plugins to communicate with further devices.</p>
</section>
<section id="compilation">
<h2><span class="section-number">3.1.5. </span>Compilation<a class="headerlink" href="#compilation" title="Permalink to this heading"></a></h2>
<p>In order to compile CyUSB, get the Cypress Seminconductor SDK from: <a class="reference external" href="http://www.cypress.com/file/135301?finished=1">http://www.cypress.com/file/135301?finished=1</a> (e.g. CY3684Setup.exe). Install the SDK (select typical as
setup type to install the SDK components; you can quit installing the 3rd party softwares uVision2 and GPIF Designer). Then set the CMake variable CyAPI_INCLUDE_DIR to a
directory similar than <strong>C:\Program Files\Cypress\USB\CY3684_EZ-USB_FX2LP_DVK\1.1\Windows Applications\library\cpp\inc</strong>.</p>
</section>
<section id="run-plugin">
<h2><span class="section-number">3.1.6. </span>Run plugin<a class="headerlink" href="#run-plugin" title="Permalink to this heading"></a></h2>
<p>In order to run a device via the CyUSB plugin, you also need to install the drivers from cypress.com. This is already done if you installed the SDK like stated above.</p>
</section>
<section id="changelog">
<h2><span class="section-number">3.1.7. </span>Changelog<a class="headerlink" href="#changelog" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>itom setup 2.2.0: This plugin has been compiled using the Cypress CyAPI 1.1</p></li>
<li><p>itom setup 2.2.1: This plugin has been compiled using the Cypress CyAPI 1.3.3</p></li>
<li><p>itom setup 3.0.0: This plugin has been compiled using the Cypress CyAPI 1.3.3</p></li>
<li><p>itom setup 3.1.0: This plugin has been compiled using the Cypress CyAPI 1.3.3</p></li>
<li><p>itom setup 3.2.1: This plugin has been compiled using the Cypress CyAPI 1.3.3</p></li>
<li><p>itom setup 4.0.0: This plugin has been compiled using the Cypress CyAPI 1.3.4</p></li>
<li><p>itom setup 4.1.0: This plugin has been compiled using the Cypress CyAPI 1.3.4</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../GDIO.html" class="btn btn-neutral float-left" title="3. General Data IO" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="LibModBus.html" class="btn btn-neutral float-right" title="3.2. LibModBus" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011-2022, Institut fuer Technische Optik (ITO), University Stuttgart. Bug report: https://bitbucket.org/itom/itom/issues.
      <span class="lastupdated">Last updated on Sep 19, 2022.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>