
<!DOCTYPE html>


<html lang="en" data-content_root="../../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.14. SerialIO &#8212; itom Plugins</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />

  
  <link href="../../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../../_static/html.css" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../../_static/doctools.js?v=9bcbadda"></script>
    <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'plugins/generalDataIO/serialIO';</script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="4. AD-Converters" href="../adconv.html" />
    <link rel="prev" title="3.13. LibUSB" href="libUSB.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Nov 12, 2024"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>
  
  
  <div class="col-lg-3 navbar-header-items__start">
    
      <div class="navbar-item">

  
    
  

<a class="navbar-brand logo" href="../../index.html">
  
  
  
  
  
  
    <p class="title logo__title">itom Plugins</p>
  
</a></div>
    
  </div>
  
  <div class="col-lg-9 navbar-header-items">
    
    <div class="me-auto navbar-header-items__center">
      
        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../grabbers.html">
    Camera/ Grabber
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../actuators.html">
    Motors/ Actuators
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../GDIO.html">
    General Data IO
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../adconv.html">
    AD-Converters
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../algorithms.html">
    Algorithms/ Filters
  </a>
</li>

  </ul>
</nav></div>
      
    </div>
    
    
    <div class="navbar-header-items__end">
      
        <div class="navbar-item navbar-persistent--container">
          

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>
      
      
        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
      
        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/itom-project/plugins" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>
      
    </div>
    
  </div>
  
  
    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>
  

  
    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>
  
</div>

    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
      <div class="sidebar-header-items__center">
        
          
          
            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">
    
<li class="nav-item ">
  <a class="nav-link nav-internal" href="../grabbers.html">
    Camera/ Grabber
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../actuators.html">
    Motors/ Actuators
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="../GDIO.html">
    General Data IO
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../adconv.html">
    AD-Converters
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../algorithms.html">
    Algorithms/ Filters
  </a>
</li>

  </ul>
</nav></div>
          
        
      </div>
    
    
    
      <div class="sidebar-header-items__end">
        
          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>
        
          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://github.com/itom-project/plugins" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">
          
          
          
          
          
          
          
          
          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>
        
      </div>
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="CyUSB.html">3.1. CyUSB</a></li>
<li class="toctree-l1"><a class="reference internal" href="LibModBus.html">3.2. LibModBus</a></li>
<li class="toctree-l1"><a class="reference internal" href="NewportConexLDS.html">3.3. NewportConexLDS</a></li>
<li class="toctree-l1"><a class="reference internal" href="QuantumComposer.html">3.4. QuantumComposer</a></li>
<li class="toctree-l1"><a class="reference internal" href="SuperlumBL.html">3.5. SuperlumBL</a></li>
<li class="toctree-l1"><a class="reference internal" href="SuperlumBS.html">3.6. SuperlumBS</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThorlabsFF.html">3.7. ThorlabsFF</a></li>
<li class="toctree-l1"><a class="reference internal" href="ThorlabsTCubeTEC.html">3.8. ThorlabsTCubeTEC</a></li>
<li class="toctree-l1"><a class="reference internal" href="dispWindow.html">3.9. DispWindow</a></li>
<li class="toctree-l1"><a class="reference internal" href="glDisplay.html">3.10. GLDisplay</a></li>
<li class="toctree-l1"><a class="reference internal" href="gwInstekPSP.html">3.11. GWInstekPSP</a></li>
<li class="toctree-l1"><a class="reference internal" href="hidApi.html">3.12. HidApi</a></li>
<li class="toctree-l1"><a class="reference internal" href="libUSB.html">3.13. LibUSB</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">3.14. SerialIO</a></li>
</ul>
</div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        
          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">
    
    <li class="breadcrumb-item breadcrumb-home">
      <a href="../../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>
    
    <li class="breadcrumb-item"><a href="../GDIO.html" class="nav-link"><span class="section-number">3. </span>General Data IO</a></li>
    
    <li class="breadcrumb-item active" aria-current="page"><span...</li>
  </ul>
</nav>
</div>
      
    </div>
  
  
</div>
</div>
              
              
              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="serialio">
<h1><span class="section-number">3.14. </span>SerialIO<a class="headerlink" href="#serialio" title="Link to this heading">#</a></h1>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p><strong>Summary</strong>:</p></td>
<td><p><span>itom-plugin for a serial port communication</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>Type</strong>:</p></td>
<td><p><span>DataIO</span></p></td>
</tr>
<tr class="row-odd"><td><p><strong>License</strong>:</p></td>
<td><p><span>Licensed under LGPL.</span></p></td>
</tr>
<tr class="row-even"><td><p><strong>Platforms</strong>:</p></td>
<td><p>Windows, Linux</p></td>
</tr>
<tr class="row-odd"><td><p><strong>Devices</strong>:</p></td>
<td><p>COM-Ports (Windows), ttySx and ttyUSBx (Linux)</p></td>
</tr>
<tr class="row-even"><td><p><strong>Author</strong>:</p></td>
<td><p><span>H. Bieger, C. Kohler, ITO, Universität Stuttgart</span></p></td>
</tr>
</tbody>
</table>
</div>
<section id="overview">
<h2><span class="section-number">3.14.1. </span>Overview<a class="headerlink" href="#overview" title="Link to this heading">#</a></h2>
<p>This plugin encapsulates the access to the serial port. It can be used on both
Windows and linux based operating systems.</p>
<p>In <strong>itom</strong>, this plugin is also internally used by other plugins (e.g. <em>PIPiezoCtrl</em>, <em>UhlActuator</em>, <em>LeicaMotorFocus</em> or <em>PiezosystemJena</em>).</p>
<p>Features are:</p>
<ul>
<li><p>Access to the port settings by its internal parameters and the initialization.</p></li>
<li><p>Support for different baudrates, stop bits, parity and flow control.</p></li>
<li><p>Endline characters can automatically appended to each sent string and are split from received strings.</p></li>
<li><p>Any string can be sent with a certain delay in between each character (useful for older devices).</p></li>
<li><p>A debugging parameter allows displaying the entire data transfer in the optional toolbox.</p></li>
<li><p>The configuration dialog can be used to send user-defined strings via the opened connection.</p>
<p>Use the checkBox <strong>enable $(ascii-code) statement parsing</strong> to enable ASCII code parsing to <em>$(ascii-code) statement</em>.</p>
</li>
</ul>
</section>
<section id="initialization">
<h2><span class="section-number">3.14.2. </span>Initialization<a class="headerlink" href="#initialization" title="Link to this heading">#</a></h2>
<p>For a connection to a serial port, create a new instance of this plugin using:</p>
<dl class="py function">
<dt class="sig sig-object py">
<span class="sig-name descname"><span class="pre">dataIO</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">&quot;SerialIO&quot;</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">port</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">baud</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">endline</span></span></em><span class="optional">[</span>, <em class="sig-param"><span class="n"><span class="pre">bits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">stopbits</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parity</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">flow</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">sendDelay</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">timeout</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">debug</span></span></em><span class="optional">]</span><span class="sig-paren">)</span></dt>
<dd><p>This is the necessary constructor of the class <em>dataIO</em> of <em>itom</em> in order to create a new instance of the plugin <strong>serialIO</strong>.</p>
<p>The parameter are as follows:</p>
<div class="pst-scrollable-table-container"><table class="table">
<tbody>
<tr class="row-odd"><td><p>port</p></td>
<td><p>int</p></td>
<td><p>Windows: COM-port number (e.g. 1), Linux: ttySx, ttyUSBx or ttyACMx (x is port, see infos below)</p></td>
</tr>
<tr class="row-even"><td><p>baud</p></td>
<td><p>int</p></td>
<td><p>Baudrate (see <em>baudrate</em> in the parameter description below)</p></td>
</tr>
<tr class="row-odd"><td><p>endline</p></td>
<td><p>str</p></td>
<td><p>endline character (see <em>endline</em> in the parameter description below)</p></td>
</tr>
<tr class="row-even"><td><p>bits</p></td>
<td><p>int, optional</p></td>
<td><p>number of bits to be written in line [5,8], default: 8</p></td>
</tr>
<tr class="row-odd"><td><p>stopbits</p></td>
<td><p>int, optional</p></td>
<td><p>stop bits after every n bits [1,2], default: 1</p></td>
</tr>
<tr class="row-even"><td><p>parity</p></td>
<td><p>int, optional</p></td>
<td><p>0: no parity [default], 1: odd parity, 2: even parity</p></td>
</tr>
<tr class="row-odd"><td><p>flow</p></td>
<td><p>int, optional</p></td>
<td><p>bitmask for the flow control (see <em>flow</em> in the parameter description below) [0, 127], default: 0</p></td>
</tr>
<tr class="row-even"><td><p>sendDelay</p></td>
<td><p>int, optional</p></td>
<td><p>0: write output buffer in one block, else: delay in ms after each character (same for input)</p></td>
</tr>
<tr class="row-odd"><td><p>timeout</p></td>
<td><p>float, optional</p></td>
<td><p>Timeout for reading the current input buffer of the serial port in [s], [0,64], default: 4s</p></td>
</tr>
<tr class="row-even"><td><p>enableDebug</p></td>
<td><p>int, optional</p></td>
<td><p>0: no debug output [default], 1: all data transfer is printed to the toolbox</p></td>
</tr>
</tbody>
</table>
</div>
</dd></dl>

<p>An example for opening port <strong>COM 1</strong> with 9600 bauds is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serial</span> <span class="o">=</span> <span class="n">dataIO</span><span class="p">(</span><span class="s2">&quot;SerialIO&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">9600</span><span class="p">,</span> <span class="n">endline</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>For linux, the port number may start with zero. If port numbers &lt; 1000 are given, at first the serial port <strong>ttySx</strong> is checked, where
x is the given port number. If <strong>ttySx</strong> does not exist, <strong>ttyUSBx</strong> is searched. If a port number in the range [1000,1999] is given,
the device <strong>ttyUSBx</strong> is used, where <em>x</em> is (port - 1000). Finally, if port is in the range [2000,2999], the device <strong>ttyACMx</strong> is
searched, where <em>x</em> is (port - 2000).</p>
</section>
<section id="parameters">
<h2><span class="section-number">3.14.3. </span>Parameters<a class="headerlink" href="#parameters" title="Link to this heading">#</a></h2>
<p>These parameters are available and can be used to configure the <strong>serialIO</strong> instance. Many of them are directly initialized by the
parameters of the constructor. During the runtime of an instance, the value of these parameters is obtained by the method <em>getParam</em>, writeable
parameters can be changed using <em>setParam</em>.</p>
<dl>
<dt><strong>name</strong>: {str}, read-only</dt><dd><p>name of the plugin (<em>SerialIO</em>)</p>
</dd>
<dt><strong>port</strong>: {int}, read-only</dt><dd><p>connected COM port number (defined by initialization)</p>
</dd>
<dt><strong>baud</strong>: {int}</dt><dd><p>current baudrate in symbols per second (approximately bits/sec). Allowed baudrates are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="mi">50</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">110</span><span class="p">,</span> <span class="mi">134</span><span class="p">,</span> <span class="mi">150</span><span class="p">,</span> <span class="mi">200</span><span class="p">,</span> <span class="mi">300</span><span class="p">,</span> <span class="mi">600</span><span class="p">,</span> <span class="mi">1200</span><span class="p">,</span> <span class="mi">1800</span><span class="p">,</span> <span class="mi">2400</span><span class="p">,</span>
<span class="mi">4800</span><span class="p">,</span> <span class="mi">9600</span><span class="p">,</span> <span class="mi">19200</span><span class="p">,</span> <span class="mi">38400</span><span class="p">,</span> <span class="mi">57600</span><span class="p">,</span> <span class="mi">115200</span><span class="p">,</span> <span class="mi">230400</span><span class="p">,</span> <span class="mi">460800</span><span class="p">,</span>
<span class="mi">500000</span><span class="p">,</span> <span class="mi">576000</span><span class="p">,</span> <span class="mi">921600</span><span class="p">,</span> <span class="mi">1000000</span><span class="p">,</span> <span class="mi">1152000</span><span class="p">,</span> <span class="mi">1500000</span><span class="p">,</span> <span class="mi">2000000</span><span class="p">,</span>
<span class="mi">2500000</span><span class="p">,</span> <span class="mi">3000000</span><span class="p">,</span> <span class="mi">3500000</span><span class="p">,</span> <span class="mi">4000000</span>
</pre></div>
</div>
<p>However not all baudrates are supported on each operating system.</p>
</dd>
<dt><strong>bits</strong>: {int}</dt><dd><p>Number of bits to be written in line [5,8]</p>
</dd>
<dt><strong>stopbits</strong>: {int}</dt><dd><p>Stop bits after every n-th bit [1,2]</p>
</dd>
<dt><strong>parity</strong>: {int}</dt><dd><p>Parity check
0: no parity
1: odd parity
2: even parity</p>
</dd>
<dt><strong>flow</strong>: {int}</dt><dd><p>bitmask for the flow control. This mask is an or-combination of the following values (add values for resulting flow value):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Xon</span><span class="p">,</span><span class="n">Xoff</span><span class="p">:</span> <span class="n">Xoff</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">default</span><span class="p">),</span> <span class="n">Xon</span> <span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="mf">1.</span> <span class="n">bit</span>
<span class="n">rts</span> <span class="n">control</span><span class="p">:</span> <span class="n">disabled</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">default</span><span class="p">),</span> <span class="n">enabled</span> <span class="p">(</span><span class="mi">2</span><span class="p">),</span> <span class="n">handshake</span> <span class="p">(</span><span class="mi">4</span> <span class="ow">or</span> <span class="mi">4</span><span class="o">+</span><span class="mi">2</span><span class="p">);</span> <span class="mf">2.</span> <span class="ow">and</span> <span class="mf">3.</span> <span class="n">bit</span>
<span class="n">cts</span> <span class="n">control</span><span class="p">:</span> <span class="n">disabled</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">default</span><span class="p">),</span> <span class="n">enabled</span> <span class="p">(</span><span class="mi">8</span><span class="p">);</span> <span class="mf">4.</span> <span class="n">bit</span>
<span class="n">dtr</span> <span class="n">control</span><span class="p">:</span> <span class="n">disabled</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">default</span><span class="p">),</span> <span class="n">enabled</span> <span class="p">(</span><span class="mi">16</span><span class="p">),</span> <span class="n">handshake</span> <span class="p">(</span><span class="mi">32</span> <span class="ow">or</span> <span class="mi">32</span><span class="o">+</span><span class="mi">16</span><span class="p">);</span> <span class="mf">5.</span> <span class="ow">and</span> <span class="mf">6.</span> <span class="n">bit</span>
<span class="n">dsr</span> <span class="n">control</span><span class="p">:</span> <span class="n">disabled</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">default</span><span class="p">),</span> <span class="n">enabled</span> <span class="p">(</span><span class="mi">64</span><span class="p">);</span> <span class="mf">7.</span> <span class="n">bit</span>
</pre></div>
</div>
<p>Example: Xon, rts handshake, dsr enabled is 1 + 4 + 64 = 69 for the flow value</p>
</dd>
<dt><strong>endline</strong>: {str}</dt><dd><p>If a string is put to the output buffer (and send via the opened port), the endline-string is automatically appended to the string.
Typical values are:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\n\r</span><span class="s2">&quot;</span><span class="p">,</span><span class="s2">&quot;</span><span class="se">\r</span><span class="s2">&quot;</span> <span class="ow">or</span> <span class="s2">&quot;&quot;</span>
</pre></div>
</div>
<p>Use the empty endline character string (“”) if you want to have full control.</p>
</dd>
<dt><strong>endlineRead</strong>: {str}</dt><dd><p>Same behaviour like <strong>endline</strong>, however it determines the delimiter for incoming strings and is only
used or evaluated in <strong>readline</strong> is 1. The user is referred to <strong>readline</strong>.</p>
</dd>
<dt><strong>readline</strong>: {int}</dt><dd><blockquote>
<div><p>Per default, <strong>readline</strong> is set to 0. This means that the <strong>getVal</strong> command returns the values that are currently
available at the input buffer of the computer. If you call <strong>getVal</strong> too fast, it might be, that the full answer
is not available yet. Then you need to recall <strong>getVal</strong> again.
If you set <strong>readline</strong> to 1, <strong>getVal</strong> collects values from the input buffer and checks if <strong>endlineRead</strong> is contained in the string. If so, <strong>getVal</strong> writes
all characters also those behind the first appearance of <strong>endlineRead</strong> into the bytearray. Neverteless the number of obtained signs returned by <strong>getVal</strong>
just counts the signs to the first appearance of <em>endlineRead</em>.
Remaining characters are recognized at the next call to <strong>getVal</strong>. If no endline characters is detected within <em>timeout</em> seconds, a timeout (error code: 256)
is raised.
The following code example demonstrates how to obtain the bytearray until the <strong>endlineRead</strong> sign.</p>
</div></blockquote>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serial</span><span class="o">.</span><span class="n">setParam</span><span class="p">(</span><span class="s1">&#39;readline&#39;</span><span class="p">,</span> <span class="kc">True</span><span class="p">)</span>
<span class="n">b</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">100</span><span class="p">)</span>
<span class="n">num</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">getVal</span><span class="p">(</span><span class="n">b</span><span class="p">)</span>
<span class="n">signs</span> <span class="o">=</span> <span class="n">b</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">num</span><span class="p">]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">signs</span><span class="p">)</span>
</pre></div>
</div>
</dd>
<dt><strong>sendDelay</strong>: {str}</dt><dd><p>This value represents a delay (in ms) after each character that is send and received</p>
</dd>
<dt><strong>timeout</strong>: {double}</dt><dd><p>Timeout in seconds. If the incoming buffer of the serial port cannot be read within this time, the call returns. [0,65]</p>
</dd>
<dt><strong>enableDebug</strong>: {int}</dt><dd><p>Set this value to 1 if you want to read the entire data transfer in the toolbox of an instance (disabled: 0).</p>
</dd>
</dl>
</section>
<section id="usage">
<h2><span class="section-number">3.14.4. </span>Usage<a class="headerlink" href="#usage" title="Link to this heading">#</a></h2>
<p>Lets assume a serial port connection should be established with the following properties:</p>
<ul class="simple">
<li><p>COM 1</p></li>
<li><p>9600 baud</p></li>
<li><p>8 bits</p></li>
<li><p>1 stopbit</p></li>
<li><p>no parity</p></li>
<li><p>every command should finish with “\n”</p></li>
</ul>
<p>Then open the serial port and assign it to the variable <em>serial</em></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serial</span> <span class="o">=</span> <span class="n">dataIO</span><span class="p">(</span><span class="s2">&quot;SerialIO&quot;</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">9600</span><span class="p">,</span><span class="n">endline</span><span class="o">=</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span><span class="n">bits</span><span class="o">=</span><span class="mi">8</span><span class="p">,</span><span class="n">stopbits</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span><span class="n">parity</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
</pre></div>
</div>
<p>If you have a scenario that you need to ask for the position of an actuator. Maybe the string to send in order to ask
for the current position is <strong>POS?n</strong>, then use the <strong>setVal</strong> method to send this string (<em>\n</em> is automatically appended):</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serial</span><span class="o">.</span><span class="n">setVal</span><span class="p">(</span><span class="s2">&quot;POS?&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Then it is necessary to get the result. Therefore create a bytearray with enough space and pass this array to the <strong>getVal</strong> method:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">ba</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">9</span><span class="p">)</span> <span class="c1">#array with nine elements</span>
<span class="nb">len</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">getVal</span><span class="p">(</span><span class="n">ba</span><span class="p">)</span>
</pre></div>
</div>
<p><em>len</em> finally contains the number of characters that have been filled by the serial port, of course, <em>len</em> cannot be bigger than
the size of the allocated buffer <em>ba</em>. If the serial port does not respond at all within the given timeout time, an error is raised.
<em>getVal</em> does not wait until the entire buffer is filled or the timeout occurs but returns immediately with the content of the buffer that
has been filled until this time. In order to get the full answer, it is also possible to repeatedly call <em>getVal</em>.</p>
</section>
<section id="configure-the-serialio-plugin-to-wait-for-full-answers">
<h2><span class="section-number">3.14.5. </span>Configure the serialIO plugin to wait for full answers<a class="headerlink" href="#configure-the-serialio-plugin-to-wait-for-full-answers" title="Link to this heading">#</a></h2>
<p>Per default, the user will send a request to a device. The device will then probably answer to this request using a specified string pattern.
If the parameter <strong>readline</strong> is set to 0 (default), a call to <em>getVal</em> (see usage above), will only return all characters that fit into the
buffer size and are currently available at the input buffer of the serial port. If the device need more time for the entire answer, the remaining
part of the answer can only be obtained by continuously calling <em>getVal</em> until the entire answer is obtained.</p>
<p>Usually, an answer always ends by a certain endline character sequence. If this sequence contains 1 or 2 characters, you can also configure
the serialIO plugin such that <em>getVal</em> will continuously check the input buffer of the serial port and collect all characters until the endline
sequence (parameter <strong>endlineRead</strong>) is detected or a timeout occurred. If the endline sequence was found, the characters until but without the
first endline sequence are returned by the passed buffer. Remaining characters are put onto an internal buffer and considered at the next call
to <em>getVal</em>. By this configuration you will automatically wait for the full answer without further programming work and without idle delay times.</p>
<p>An example for this alternative approach is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serial</span><span class="o">.</span><span class="n">setParam</span><span class="p">(</span><span class="s2">&quot;readline&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="n">serial</span><span class="o">.</span><span class="n">setParam</span><span class="p">(</span><span class="s2">&quot;endlineRead&quot;</span><span class="p">,</span> <span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">)</span>
<span class="n">buffer</span> <span class="o">=</span> <span class="nb">bytearray</span><span class="p">(</span><span class="mi">20</span><span class="p">)</span>
<span class="n">serial</span><span class="o">.</span><span class="n">setVal</span><span class="p">(</span><span class="s2">&quot;POS?&quot;</span><span class="p">)</span>
<span class="n">num</span> <span class="o">=</span> <span class="n">serial</span><span class="o">.</span><span class="n">getVal</span><span class="p">(</span><span class="n">buffer</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="s2">&quot;full answer from device&quot;</span><span class="p">,</span> <span class="n">buffer</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="n">num</span><span class="p">])</span>
</pre></div>
</div>
</section>
<section id="clear-input-or-output-buffer">
<h2><span class="section-number">3.14.6. </span>Clear input or output buffer<a class="headerlink" href="#clear-input-or-output-buffer" title="Link to this heading">#</a></h2>
<p>Sometimes, it is necessary to immediately clear all characters inside of the input buffer (obtained by <em>getVal</em>) and/or output buffer (send by <em>setVal</em>). This can be done using specific <strong>exec</strong>-functions:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">serial</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;clearInputBuffer&quot;</span><span class="p">)</span> <span class="c1">#clear input buffer</span>
<span class="n">serial</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;clearOutputBuffer&quot;</span><span class="p">)</span> <span class="c1">#clear output buffer</span>

<span class="c1">#alternative:</span>
<span class="n">serial</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;clearBuffer&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">)</span> <span class="c1">#clear input buffer</span>
<span class="n">serial</span><span class="o">.</span><span class="n">exec</span><span class="p">(</span><span class="s2">&quot;clearBuffer&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span> <span class="c1">#clear output buffer</span>
</pre></div>
</div>
</section>
<section id="get-a-list-of-available-com-ports-under-windows">
<h2><span class="section-number">3.14.7. </span>Get a list of available COM ports under Windows<a class="headerlink" href="#get-a-list-of-available-com-ports-under-windows" title="Link to this heading">#</a></h2>
<p>In order to get a list of all available COM ports under Windows, the following python code snippet can be used. It reads the corresponding registry entries:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1">#This script can be used as example for Windows</span>
<span class="c1">#to detect registered COM ports for this computer</span>
<span class="kn">import</span> <span class="nn">winreg</span> <span class="k">as</span> <span class="nn">wreg</span>

<span class="k">def</span> <span class="nf">DetectCOMPorts</span><span class="p">():</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">regconn</span> <span class="o">=</span> <span class="n">wreg</span><span class="o">.</span><span class="n">ConnectRegistry</span><span class="p">(</span> <span class="kc">None</span><span class="p">,</span> <span class="n">wreg</span><span class="o">.</span><span class="n">HKEY_LOCAL_MACHINE</span> <span class="p">)</span>
        <span class="n">key</span> <span class="o">=</span> <span class="n">wreg</span><span class="o">.</span><span class="n">OpenKey</span><span class="p">(</span> <span class="n">regconn</span><span class="p">,</span> <span class="s2">&quot;HARDWARE</span><span class="se">\\</span><span class="s2">DEVICEMAP</span><span class="se">\\</span><span class="s2">SERIALCOMM&quot;</span><span class="p">,</span> <span class="n">wreg</span><span class="o">.</span><span class="n">KEY_READ</span> <span class="p">)</span>
        <span class="n">values_count</span> <span class="o">=</span> <span class="n">wreg</span><span class="o">.</span><span class="n">QueryInfoKey</span><span class="p">(</span> <span class="n">key</span> <span class="p">)[</span><span class="mi">1</span><span class="p">]</span>
        <span class="n">values_list</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span> <span class="n">values_count</span> <span class="p">):</span>
            <span class="n">values_list</span><span class="o">.</span><span class="n">append</span><span class="p">(</span> <span class="n">wreg</span><span class="o">.</span><span class="n">EnumValue</span><span class="p">(</span> <span class="n">key</span><span class="p">,</span> <span class="n">i</span> <span class="p">)</span> <span class="p">)</span>
    <span class="k">except</span> <span class="p">(</span> <span class="ne">WindowsError</span><span class="p">,</span> <span class="ne">EnvironmentError</span> <span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span> <span class="s2">&quot;Unable to Connect to the Window Registry and read keys&quot;</span> <span class="p">)</span>
    <span class="k">finally</span><span class="p">:</span>
        <span class="n">key</span><span class="o">.</span><span class="n">Close</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">values_list</span>

<span class="k">def</span> <span class="nf">NumberOfCOMPorts</span><span class="p">(</span> <span class="n">values_list</span> <span class="p">):</span>
    <span class="k">for</span> <span class="n">subkey</span> <span class="ow">in</span> <span class="nb">iter</span><span class="p">(</span> <span class="n">values_list</span> <span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span> <span class="s2">&quot;Name : &quot;</span> <span class="o">+</span> <span class="n">subkey</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="p">)</span>
        <span class="nb">print</span><span class="p">(</span> <span class="s2">&quot;Data : &quot;</span> <span class="o">+</span> <span class="n">subkey</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="p">)</span>

<span class="n">NumberOfCOMPorts</span><span class="p">(</span> <span class="n">DetectCOMPorts</span><span class="p">()</span> <span class="p">)</span>
</pre></div>
</div>
</section>
<section id="installation">
<h2><span class="section-number">3.14.8. </span>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h2>
<p>For using this plugin no further 3rd party libraries or drivers are necessary.</p>
<p>If you are using linux to open a serial connection and you are running <strong>itom</strong> without root privileges, which is recommended, you have to add
your user to the <strong>dialout</strong> group, logout once and login again.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>adduser<span class="w"> </span>USERNAME<span class="w"> </span>dialout
</pre></div>
</div>
<p>where USERNAME is the username under which you are running <strong>itom</strong></p>
</section>
<section id="changelog">
<h2><span class="section-number">3.14.9. </span>Changelog<a class="headerlink" href="#changelog" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>itom 1.2.0 is shipped with version 0.0.2 of serialIO</p></li>
<li><p>parameters ‘readline’ and ‘endlineRead’ are available in serialIO version &gt;= 1.0.0</p></li>
<li><p>serialIO version 1.1.1 bug fix in command history with empty commands</p></li>
</ul>
</section>
</section>


                </article>
              
              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
    <a class="left-prev"
       href="libUSB.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">3.13. </span>LibUSB</p>
      </div>
    </a>
    <a class="right-next"
       href="../adconv.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">4. </span>AD-Converters</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#overview">3.14.1. Overview</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#initialization">3.14.2. Initialization</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#parameters">3.14.3. Parameters</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#usage">3.14.4. Usage</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#configure-the-serialio-plugin-to-wait-for-full-answers">3.14.5. Configure the serialIO plugin to wait for full answers</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#clear-input-or-output-buffer">3.14.6. Clear input or output buffer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#get-a-list-of-available-com-ports-under-windows">3.14.7. Get a list of available COM ports under Windows</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">3.14.8. Installation</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#changelog">3.14.9. Changelog</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../../_sources/plugins/generalDataIO/serialIO.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
          </footer>
        
      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">
  
    <div class="footer-items__start">
      
        <div class="footer-item">

  <p class="copyright">
    
      © Copyright 2011-2024, Institut für Technische Optik (ITO), University Stuttgart. Bug report: https://github.com/itom-project/plugins/issues.
      <br/>
    
  </p>
</div>
      
        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>
      
    </div>
  
  
  
    <div class="footer-items__end">
      
        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>
      
    </div>
  
</div>

  </footer>
  </body>
</html>