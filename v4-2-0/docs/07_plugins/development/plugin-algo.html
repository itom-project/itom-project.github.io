<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>8.8.13. Plugin class - Algo &mdash; itom Documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-binder.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-dataframe.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/sg_gallery-rendered-html.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/html.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="8.8.13.7.1. Algorithm Categories and Interfaces" href="plugin-algo-CatInterfaces.html" />
    <link rel="prev" title="8.8.12. Plugin class - Actuator" href="plugin-actuator.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../../index.html" class="icon icon-home"> itom Documentation
          </a>
              <div class="version">
                4.2.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../00_releaseNotes/whats-new.html">1. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../01_introduction/introduction.html">2. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../02_installation/install.html">3. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../03_gettingStarted/getting-started.html">4. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../04_itom_gui/gui.html">5. The itom User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../05_plots/plots.html">6. Plots and Figures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06_extended_gui/extended_gui.html">7. Extending the user interface of <strong>itom</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../plugins.html">8. Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basic_concept.html">8.1. Basic concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loading_plugins.html">8.2. Loading plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-hardware.html">8.3. How to use hardware plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-grabber.html">8.4. Getting started with grabbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-adda.html">8.5. Getting started with A/D converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-actuator.html">8.6. Getting started with actuators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-filter.html">8.7. Getting started with algorithm plugins (denoted as filters)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="plugin-development.html">8.8. Development under C++</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plugin-RetVal.html">8.8.1. <strong>RetVal</strong> - The return type of <strong>itom</strong> methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-sharedSemaphore.html">8.8.2. ItomSharedSemaphore</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dataObject.html">8.8.3. DataObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-params.html">8.8.4. Parameter-Container class of <strong>itom</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-paramsMeta.html">8.8.5. Parameters - Meta Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-paramsValidate.html">8.8.6. Parameters - Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginStructure.html">8.8.7. Introduction to plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginInterfaceClass.html">8.8.8. Plugin interface class</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-AddInBase-Ref.html">8.8.9. AddInBase</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginClass.html">8.8.10. Plugin class - Basic information</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dataIO.html">8.8.11. Plugin class - DataIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-actuator.html">8.8.12. Plugin class - Actuator</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">8.8.13. Plugin class - Algo</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#plugin-structure">8.8.13.1. Plugin-Structure</a></li>
<li class="toctree-l4"><a class="reference internal" href="#factory-class">8.8.13.2. Factory-Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#plugin-class">8.8.13.3. Plugin-Class</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filter-methods-without-status-information-and-or-cancellation-feature">8.8.13.4. Filter-Methods (Without status information and / or cancellation feature)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#filter-methods-2-with-status-information-and-or-cancellation-feature">8.8.13.5. Filter-Methods 2 (With status information and / or cancellation feature)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#widget-method-gui-extensions">8.8.13.6. Widget-Method (GUI-Extensions)</a></li>
<li class="toctree-l4"><a class="reference internal" href="#publish-filter-and-widget-methods-at-initialization">8.8.13.7. Publish Filter- and Widget-Methods at Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#finish-and-close-plugin">8.8.13.8. Finish and close plugin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="pluginCreateCMake.html">8.8.14. Create a new plugin via CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginAutoLoadSavePolicy.html">8.8.15. Automatic loading and saving of plugin parameters</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-itomAPI.html">8.8.16. itom API</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-externalLibraries.html">8.8.17. Link or load external libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="projectSettings.html">8.8.18. Project settings for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dockWidget.html">8.8.19. Optional dock widget (toolbox) for hardware plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-configDialog.html">8.8.20. Optional configuration dialog for hardware plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openCVMat.html">8.9. OpenCV matrices <strong>cv::Mat</strong> and <strong>cv::Mat_</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../08_scriptLanguage/script-language.html">9. Python Scripting Language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../09_reference/reference.html">10. itom Script Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../10_miscellaneous/miscellaneous.html">11. Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../11_demos/demos.html">12. Demo scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../12_contributing/contributing.html">13. Contributing</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">itom Documentation</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
          <li><a href="../plugins.html"><span class="section-number">8. </span>Plugins</a> &raquo;</li>
          <li><a href="plugin-development.html"><span class="section-number">8.8. </span>Development under C++</a> &raquo;</li>
      <li><span class="section-number">8.8.13. </span>Plugin class - Algo</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/07_plugins/development/plugin-algo.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="plugin-class-algo">
<span id="id1"></span><h1><span class="section-number">8.8.13. </span>Plugin class - Algo<a class="headerlink" href="#plugin-class-algo" title="Permalink to this heading">¶</a></h1>
<p>An <strong>algorithm plugin</strong> can provide an arbitrary number of filter-methods and widgets, hence external windows, dialogs… which can be displayed by <strong>itom</strong>.</p>
<p><strong>Filter-Method</strong></p>
<p>A filter-method is any algorithm, which is parameterized with a set of mandatory and optional parameters and may return a set of output parameters. Similar
to the flexible initialization of plugins of type <strong>dataIO</strong> or <strong>actuator</strong>, the default-values of these parameters are given by the plugin itself and can also
be different for each filter-method. Please consider that a filter-method can finally be called from different threads, therefore it is not allowed to directly
use any GUI-elements in such plugins. If the appropriate method is called by the python function <strong>filter</strong>, it is executed in the python thread, if the method
is called form any toolbox or dialog, it is usually called in their context (main thread) but it can also be, that the filter-method is executed by any other
worker thread. If a filter-method only consists of ordinary algorithmic components, you should not get any problems with these kind of flexibility.</p>
<p><strong>Widgets</strong></p>
<p>The widget-methods of the plugin will be called in the same way than filter-methods with a set of mandatory and optional parameters. Then, the widget-method creates
a new instance of a widget, window or any other GUI element, derived from <strong>QWidget</strong> is returned and can then be displayed. This method will always be called in the
context of the main thread (GUI-thread).</p>
<p>For the usage of such filters via Python, see <a class="reference internal" href="../getstart-filter.html#getstartfilter"><span class="std std-ref">Getting started with algorithm plugins (denoted as filters)</span></a>.</p>
<section id="plugin-structure">
<h2><span class="section-number">8.8.13.1. </span>Plugin-Structure<a class="headerlink" href="#plugin-structure" title="Permalink to this heading">¶</a></h2>
<p>Like all the other types of plugins, the <strong>Algo</strong>-plugin must at least consist of two classes. The first (<em>here:</em> <strong>MyAlgoPluginInterface</strong>) is the interface, or factory
class, necessary for the successful load of the plugin by the <strong>Qt</strong>-plugin system. The “real” plugin class (<em>here:</em> <strong>MyAlgoPlugin</strong>) is then accessed by <strong>itom</strong> through
appropriate methods in class <strong>MyAlgoPluginInterface</strong>.</p>
</section>
<section id="factory-class">
<h2><span class="section-number">8.8.13.2. </span>Factory-Class<a class="headerlink" href="#factory-class" title="Permalink to this heading">¶</a></h2>
<p>The structure and exemplary implementation of a factory class <strong>MyAlgoPluginInterface</strong> is mainly explained in <a class="reference internal" href="pluginInterfaceClass.html#plugin-interface-class"><span class="std std-ref">Plugin interface class</span></a>. Since the main class <strong>MyAlgoPlugin</strong>
is mainly behaving like a static, singleton class, it will never be instatiated by the user, like it is the case for plugins of type <strong>dataIO</strong> or <strong>actuator</strong>. Therefore
it makes no sense to define some default mandatory and optional parameters for the constructor of <strong>MyAlgoPlugin</strong>, such that the programmer should the vectors <strong>m_initParamsMand</strong>
and <strong>m_initParamsOpt</strong> be unchanged.</p>
</section>
<section id="plugin-class">
<h2><span class="section-number">8.8.13.3. </span>Plugin-Class<a class="headerlink" href="#plugin-class" title="Permalink to this heading">¶</a></h2>
<p>The raw scheme for your plugin-class is as follows:</p>
<p><strong>Header-File (myPluginAlgo.h)</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="cp">#ifndef MYALGOPLUGIN_H</span>
<span class="linenos"> 2</span><span class="cp">#define MYALGOPLUGIN_H</span>
<span class="linenos"> 3</span>
<span class="linenos"> 4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;../../common/addInInterface.h&quot;</span><span class="c1"> //or similar path</span><span class="cp"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="k">class</span><span class="w"> </span><span class="nc">MyPluginAlgoInterface</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInInterfaceBase</span><span class="w"></span>
<span class="linenos"> 7</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 8</span><span class="p">...</span><span class="w"> </span><span class="c1">//see in documentation for interface-class</span>
<span class="linenos"> 9</span><span class="p">};</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="k">class</span><span class="w"> </span><span class="nc">MyPluginAlgo</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="k">public</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInAlgo</span><span class="w"></span>
<span class="linenos">12</span><span class="p">{</span><span class="w"></span>
<span class="linenos">13</span><span class="w">    </span><span class="n">Q_OBJECT</span><span class="w"></span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="k">protected</span><span class="o">:</span><span class="w"></span>
<span class="linenos">16</span><span class="w">    </span><span class="n">MyPluginAlgo</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">uniqueID</span><span class="p">);</span><span class="w"></span>
<span class="linenos">17</span><span class="w">    </span><span class="o">~</span><span class="n">MyPluginAlgo</span><span class="p">()</span><span class="w"> </span><span class="p">{};</span><span class="w"></span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="k">public</span><span class="o">:</span><span class="w"></span>
<span class="linenos">20</span><span class="w">    </span><span class="k">friend</span><span class="w"> </span><span class="k">class</span><span class="w"> </span><span class="nc">MyAlgoPluginInterface</span><span class="p">;</span><span class="w"></span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">    </span><span class="c1">//filter-method1</span>
<span class="linenos">23</span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">filter1</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">);</span><span class="w"></span>
<span class="linenos">24</span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">filter1Params</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">);</span><span class="w"></span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">    </span><span class="c1">//for every further filter-method define another pair like above</span>
<span class="linenos">27</span>
<span class="linenos">28</span><span class="w">    </span><span class="c1">//widget-method1</span>
<span class="linenos">29</span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">QWidget</span><span class="o">*</span><span class="w"> </span><span class="nf">widget1</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retValue</span><span class="p">);</span><span class="w"></span>
<span class="linenos">30</span><span class="w">    </span><span class="k">static</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">widget1Params</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">);</span><span class="w"></span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">    </span><span class="c1">//for every futher widget-method define another pair like above</span>
<span class="linenos">33</span>
<span class="linenos">34</span><span class="k">public</span><span class="w"> </span><span class="n">slots</span><span class="o">:</span><span class="w"></span>
<span class="linenos">35</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="n">init</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">ItomSharedSemaphore</span><span class="w"> </span><span class="o">*</span><span class="n">waitCond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">);</span><span class="w"></span>
<span class="linenos">36</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">close</span><span class="p">(</span><span class="n">ItomSharedSemaphore</span><span class="w"> </span><span class="o">*</span><span class="n">waitCond</span><span class="p">);</span><span class="w"></span>
<span class="linenos">37</span><span class="p">};</span><span class="w"></span>
<span class="linenos">38</span>
<span class="linenos">39</span><span class="cp">#endif</span>
</pre></div>
</div>
<p><strong>Source File (myPluginAlgo.cpp)</strong></p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos">1</span><span class="cp">#define ITOM_IMPORT_API</span>
<span class="linenos">2</span><span class="cp">#define ITOM_IMPORT_PLOTAPI</span>
<span class="linenos">3</span>
<span class="linenos">4</span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&quot;myPluginAlgo.h&quot;</span><span class="cp"></span>
<span class="linenos">5</span>
<span class="linenos">6</span><span class="c1">//implement your code here</span>
</pre></div>
</div>
<p>First of all, our algorithm plugin class is derived from the class <strong>AddInAlgo</strong> from within the <strong>ito</strong>-namespace. This base class
is defined in the <em>addInInterface.h</em> header that has to be included. Again, our plugin is ultimately derived from <strong>QObject</strong> and
the <em>Q_OBJECT</em> macro must appear in the class definition in order to be able to use any services provided by Qt’s meta-object
system, such as the signal slot mechanisms. Additionally our plugin class has to be a friend of its interface class (see section
<a class="reference internal" href="pluginInterfaceClass.html#plugin-interface-class"><span class="std std-ref">Plugin interface class</span></a>), such that the factory (interface) class is allowed to access the protected constructor.</p>
<p>Every filter method as well as widget method consist of two different methods. One is the real algorithm or function itself
(<em>here:</em> named with <em>filter1</em> and <em>widget1</em>). The second method is a small parameter-method which generates the default vectors for the mandatory, optional
and output (filters only) parameters. This method is necessary, since the <strong>itom</strong> base application and the python scripts have no
way of knowing what parameters the filter methods or widget generation methods expect.</p>
<p>These default-parameter methods have the following implementation:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">MyAlgoPlugin::filter1Params</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 2</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="w"> </span><span class="n">param</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">retOk</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="n">retval</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">prepareParamVectors</span><span class="p">(</span><span class="n">paramsMand</span><span class="p">,</span><span class="n">paramsOpt</span><span class="p">,</span><span class="n">paramsOut</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">retval</span><span class="p">.</span><span class="n">containsError</span><span class="p">())</span><span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="n">param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="p">(</span><span class="s">&quot;mand1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">DObjPtr</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">In</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">());</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">    </span><span class="n">paramsMand</span><span class="o">-&gt;</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">);</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="n">param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="p">(</span><span class="s">&quot;mand2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">String</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">In</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">());</span><span class="w"></span>
<span class="linenos">11</span><span class="w">    </span><span class="n">paramsMand</span><span class="o">-&gt;</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">);</span><span class="w"></span>
<span class="linenos">12</span><span class="w">    </span><span class="n">param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="p">(</span><span class="s">&quot;opt1&quot;</span><span class="p">,</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">Double</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">In</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="mf">1.0</span><span class="p">,</span><span class="w"> </span><span class="mf">0.0</span><span class="p">,</span><span class="w"> </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">());</span><span class="w"></span>
<span class="linenos">13</span><span class="w">    </span><span class="n">paramsOpt</span><span class="o">-&gt;</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">);</span><span class="w"></span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">    </span><span class="n">param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="p">(</span><span class="s">&quot;return1&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">Int</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">Out</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">());</span><span class="w"></span>
<span class="linenos">16</span><span class="w">    </span><span class="n">paramsOut</span><span class="o">-&gt;</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">);</span><span class="w"></span>
<span class="linenos">17</span><span class="w">    </span><span class="n">param</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="p">(</span><span class="s">&quot;return2&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">String</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">::</span><span class="n">Out</span><span class="p">,</span><span class="w"> </span><span class="nb">NULL</span><span class="p">,</span><span class="w"> </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">());</span><span class="w"></span>
<span class="linenos">18</span><span class="w">    </span><span class="n">paramsOut</span><span class="o">-&gt;</span><span class="n">append</span><span class="p">(</span><span class="n">param</span><span class="p">);</span><span class="w"></span>
<span class="linenos">19</span>
<span class="linenos">20</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos">21</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>In this exemplary case, the method <strong>filter1</strong> requires two mandatory parameters, where the first one is a dataObject-pointer and the second one is a string.
Additionally one can give one optional parameter, namely a double-value. This filter does not have output-parameters.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Please don’t forget to specify your parameters with the flags <strong>In</strong>, <strong>Out</strong> or <strong>In|Out</strong>. Mandatory and optional parameters can not be <strong>Out</strong> only,
however output parameters must be <strong>Out</strong> only. Please consider that pure <strong>Out</strong> values is only allowed for non-pointer-type values (hence: Char, Int,
Double, String, IntArray, CharArray and DoubleArray are allowed). For widget-methods, the output-value default implementation is ignored and therefore the
corresponding vector should not be changed.</p>
</div>
<p>In line 3 of the method above, the three arguments are checked for not being NULL and are cleared within the method <strong>prepareParamVectors</strong>, which is already
defined in class <strong>ito::AddInAlgo</strong>. Next, the default implementations of parameters (see <a class="reference internal" href="plugin-params.html#plugin-params"><span class="std std-ref">Parameter-Container class of itom</span></a>) are created and appended to the corresponding
vector. Finally the method is called in order to get the three default vectors. Then, the values are merged with the values given by the user or other
plugins and the real filter- or widget-method is called with the same vectors, however each parameter is now casted from <strong>Param</strong> to <strong>ParamBase</strong>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In order to have an efficient call, the parameter method is only called once at startup of <strong>itom</strong> and the default implementations are hashed by <strong>ito::AddInManager</strong>. The
consequence for the plugin programmer is, that it is not allowed to have time- or situation-dependent changes in the default-values. This might not be considered.
Only the implementation at startup is relevant and must not be changed!</p>
</div>
<p>The <em>plugin</em>-methods give the user additionally the possibility to get a readable output of the set of desired
parameters including their descriptions and types in the command line by using the following python-command:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">filterHelp</span><span class="p">(</span><span class="s2">&quot;MyAlgoPlugin&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>If the argument string does not fit to any specific filter, an enumeration of all filters containing this string will be printed.</p>
<p>Now the filter-method or widget-method itself can be implemented. While the widget-method only provide one method definition,
the filter method can have two different possible definitions (since itom 3.3).:</p>
</section>
<section id="filter-methods-without-status-information-and-or-cancellation-feature">
<h2><span class="section-number">8.8.13.4. </span>Filter-Methods (Without status information and / or cancellation feature)<a class="headerlink" href="#filter-methods-without-status-information-and-or-cancellation-feature" title="Permalink to this heading">¶</a></h2>
<p>This is the default definition of filters and does not provide the possibility to pass runtime status information (like the current progress)
or a way to let the user cancel the execution of the algorithm.</p>
<p>After that you implemented the parameter-method in order to generate default parameters for your filter-method
(see section above), you can now implement the filter-method itsself. This first implementation might follow this scheme:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">MyAlgoPlugin::filter1</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">                                  </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">                                  </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 4</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">retOk</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="c1">//1. Section. Getting typed in or in/out parameters from paramsMand and paramsOpt</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="c1">//  Make sure that you access only parameters, that have been defined in the corresponding parameter-method.</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="c1">//  The order and type is important.</span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">    </span><span class="c1">//possibility 1 (index-based access):</span>
<span class="linenos">12</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="w"> </span><span class="o">*</span><span class="n">dObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">paramsMand</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">getVal</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">13</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">paramsMand</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">//don&#39;t delete this pointer (borrowed)</span>
<span class="linenos">14</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">opt1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">15</span>
<span class="linenos">16</span><span class="w">    </span><span class="c1">//possibility 2 (name-based access):</span>
<span class="linenos">17</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="w"> </span><span class="o">*</span><span class="n">dObj2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>\
<span class="linenos">18</span><span class="w">        </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="o">*</span><span class="p">)</span><span class="n">ito</span><span class="o">::</span><span class="n">getParamByName</span><span class="p">(</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mand1&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retval</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">19</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">getParamByName</span><span class="p">(</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mand2&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retval</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">20</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">opt2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">getParamByName</span><span class="p">(</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;opt1&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retval</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">21</span>
<span class="linenos">22</span><span class="w">    </span><span class="c1">//2. Section. Algorithm.</span>
<span class="linenos">23</span><span class="w">    </span><span class="c1">//  include here your algorithm. make sure, that you only change values of pointer-based parameters</span>
<span class="linenos">24</span><span class="w">    </span><span class="c1">//  that you have defined with the flags In|Out.</span>
<span class="linenos">25</span>
<span class="linenos">26</span><span class="w">    </span><span class="c1">//3. Section. Optionally put results into the paramsOut-vector</span>
<span class="linenos">27</span><span class="w">    </span><span class="c1">//  Make sure that you defined the corresponding parameter with right type in the corresponding parameter-method.</span>
<span class="linenos">28</span><span class="w">    </span><span class="c1">//  The implementation in the next lines is only one example and has not be defined before. Be aware of that.</span>
<span class="linenos">29</span><span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="n">paramsOut</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">setVal</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">30</span><span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="n">paramsOut</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="n">setVal</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="s">&quot;we are done&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos">33</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>For the parsing of the given input parameters, you can (like stated above) either directly access them using their index in the vector or you
can use the high-level method <strong>getParamByName</strong>, which is provided in the file <strong>helperCommon.h</strong> and <strong>helperCommon.cpp</strong> in the <strong>common</strong>-folder.
If you want to use this method, integrate both files in your project and include the header file in your plugin file.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Always make sure, that if you are access (read or write) any parameter in any of the three vectors, you must have the specific parameter
defined in the corresponding parameter method. If you defined there a parameter of certain type and appended it to one of the vectors, you
can be sure, that a parameter of same type is available at the same position in the arguments of the filter-method call.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you want to use methods provided by the <strong>itom</strong>-API, see <a class="reference internal" href="plugin-itomAPI.html#plugin-itomapi"><span class="std std-ref">itom API</span></a> and consider the additional lines of code in your implementation.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Never use the reserved name <strong>_observer</strong> for a mandatory or optional parameter name, since this is used to call a filter
from the Python method <a class="reference internal" href="../../09_reference/algo.html#itom.filter" title="itom.filter"><code class="xref py py-meth docutils literal notranslate"><span class="pre">itom.filter()</span></code></a> with a given progress observer (see <a class="reference internal" href="../../09_reference/progressObserver.html#itom.progressObserver" title="itom.progressObserver"><code class="xref py py-class docutils literal notranslate"><span class="pre">itom.progressObserver</span></code></a>).</p>
</div>
</section>
<section id="filter-methods-2-with-status-information-and-or-cancellation-feature">
<span id="plugin-class-algo-filterdefext"></span><h2><span class="section-number">8.8.13.5. </span>Filter-Methods 2 (With status information and / or cancellation feature)<a class="headerlink" href="#filter-methods-2-with-status-information-and-or-cancellation-feature" title="Permalink to this heading">¶</a></h2>
<p>This 2nd definition of a filter method is introduced with itom 3.3 on. Its advantage is, that another argument
<strong>QSharedPointer&lt;ito::FunctionCancellationAndObserver&gt; observer</strong> is passed to the filter. The class <strong>ito::FunctionCancellationAndObserver</strong>
is used to provide mechanisms, such that the filter algorithm can continuously report its current progress. Additionally, this class
has an interrupt flag, which can be set via itom (e.g. via Python, if a Python script is interrupted or from a calling C++ method).
It is the responsibility of the filter developer to regularly check the state of this interrupt flag. Once it is set, try to stop
the algorithm as soon as possible and return with an error (ito::retError) set.</p>
<p>The filter definition for this 2nd case is as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">MyAlgoPlugin::filter2</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">                                  </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">                                  </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">                                  </span><span class="n">QSharedPointer</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">FunctionCancellationAndObserver</span><span class="o">&gt;</span><span class="w"> </span><span class="n">observer</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 5</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 6</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">retOk</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 7</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="c1">//indicate the start of the algorithm to the observer (if given)</span>
<span class="linenos"> 9</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">observer</span><span class="p">)</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">11</span><span class="w">        </span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">setProgressValue</span><span class="p">(</span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">progressMinimum</span><span class="p">());</span><span class="w"></span>
<span class="linenos">12</span><span class="w">        </span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">setProgressText</span><span class="p">(</span><span class="s">&quot;Start of algorithm&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">13</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">14</span>
<span class="linenos">15</span><span class="w">    </span><span class="c1">//1. Section. Getting typed in or in/out parameters from paramsMand and paramsOpt</span>
<span class="linenos">16</span><span class="w">    </span><span class="c1">//  Make sure that you access only parameters, that have been defined in</span>
<span class="linenos">17</span><span class="w">    </span><span class="c1">//  the corresponding parameter-method. The order and type is important.</span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">    </span><span class="c1">//possibility 1 (index-based access):</span>
<span class="linenos">20</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="w"> </span><span class="o">*</span><span class="n">dObj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">paramsMand</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">getVal</span><span class="o">&lt;</span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">21</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">paramsMand</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"> </span><span class="c1">//don&#39;t delete this pointer (borrowed)</span>
<span class="linenos">22</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">opt1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">23</span>
<span class="linenos">24</span><span class="w">    </span><span class="c1">//possibility 2 (name-based access):</span>
<span class="linenos">25</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="w"> </span><span class="o">*</span><span class="n">dObj2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>\
<span class="linenos">26</span><span class="w">        </span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">DataObject</span><span class="o">*</span><span class="p">)</span><span class="n">ito</span><span class="o">::</span><span class="n">getParamByName</span><span class="p">(</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mand1&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retval</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">27</span><span class="w">    </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">filename2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">getParamByName</span><span class="p">(</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;mand2&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retval</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">28</span><span class="w">    </span><span class="kt">double</span><span class="w"> </span><span class="n">opt2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">getParamByName</span><span class="p">(</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;opt1&quot;</span><span class="p">,</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retval</span><span class="p">)</span><span class="o">-&gt;</span><span class="n">getVal</span><span class="o">&lt;</span><span class="kt">double</span><span class="o">&gt;</span><span class="p">();</span><span class="w"></span>
<span class="linenos">29</span>
<span class="linenos">30</span><span class="w">    </span><span class="c1">//2. Section. Algorithm.</span>
<span class="linenos">31</span><span class="w">    </span><span class="c1">//  The following algorithm needs around 10seconds to finish. It reports its progress every second and</span>
<span class="linenos">32</span><span class="w">    </span><span class="c1">//  if the interrupt flag of the observer is set, it quits the execution earlier:</span>
<span class="linenos">33</span><span class="w">    </span><span class="n">QElapsedTimer</span><span class="w"> </span><span class="n">timer</span><span class="p">;</span><span class="w"></span>
<span class="linenos">34</span><span class="w">    </span><span class="n">timer</span><span class="p">.</span><span class="n">start</span><span class="p">();</span><span class="w"></span>
<span class="linenos">35</span><span class="w">    </span><span class="n">qint64</span><span class="w"> </span><span class="n">nextProgressReport</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"> </span><span class="c1">//every second</span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="w">    </span><span class="k">while</span><span class="w"> </span><span class="p">(</span><span class="n">timer</span><span class="p">.</span><span class="n">elapsed</span><span class="p">()</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10000</span><span class="p">)</span><span class="w"></span>
<span class="linenos">38</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">39</span><span class="w">        </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">observer</span><span class="p">)</span><span class="w"></span>
<span class="linenos">40</span><span class="w">        </span><span class="p">{</span><span class="w"></span>
<span class="linenos">41</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">timer</span><span class="p">.</span><span class="n">elapsed</span><span class="p">()</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="n">nextProgressReport</span><span class="p">)</span><span class="w"></span>
<span class="linenos">42</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">43</span><span class="w">                </span><span class="c1">//always pass the value between the given minimum / maximum of the observer</span>
<span class="linenos">44</span><span class="w">                </span><span class="kt">int</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">progressMinimum</span><span class="p">()</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">timer</span><span class="p">.</span><span class="n">elapsed</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="w"> </span>\
<span class="linenos">45</span><span class="w">                    </span><span class="p">(</span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">progressMaximum</span><span class="p">()</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">progressMinimum</span><span class="p">())</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">10000</span><span class="p">;</span><span class="w"></span>
<span class="linenos">46</span><span class="w">                </span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">setProgressValue</span><span class="p">(</span><span class="n">value</span><span class="p">);</span><span class="w"></span>
<span class="linenos">47</span><span class="w">                </span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">setProgressText</span><span class="p">(</span><span class="n">QString</span><span class="p">(</span><span class="s">&quot;This algorithm run %1 from 10.0 seconds&quot;</span><span class="p">).</span><span class="w"> </span>\
<span class="linenos">48</span><span class="w">                    </span><span class="n">arg</span><span class="p">(</span><span class="n">timer</span><span class="p">.</span><span class="n">elapsed</span><span class="p">()</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">1000</span><span class="p">));</span><span class="w"></span>
<span class="linenos">49</span><span class="w">                </span><span class="n">nextProgressReport</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="mi">1000</span><span class="p">;</span><span class="w"></span>
<span class="linenos">50</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">51</span>
<span class="linenos">52</span><span class="w">            </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">observer</span><span class="o">-&gt;</span><span class="n">isCancelled</span><span class="p">())</span><span class="w"></span>
<span class="linenos">53</span><span class="w">            </span><span class="p">{</span><span class="w"></span>
<span class="linenos">54</span><span class="w">                </span><span class="n">retval</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="p">(</span><span class="n">ito</span><span class="o">::</span><span class="n">retError</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;algorithm cancelled&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">55</span><span class="w">                </span><span class="k">break</span><span class="p">;</span><span class="w"></span>
<span class="linenos">56</span><span class="w">            </span><span class="p">}</span><span class="w"></span>
<span class="linenos">57</span><span class="w">        </span><span class="p">}</span><span class="w"></span>
<span class="linenos">58</span>
<span class="linenos">59</span><span class="w">        </span><span class="n">QThread</span><span class="o">::</span><span class="n">msleep</span><span class="p">(</span><span class="mi">100</span><span class="p">);</span><span class="w"></span>
<span class="linenos">60</span>
<span class="linenos">61</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">62</span><span class="w">    </span><span class="c1">//  that you have defined with the flags In|Out.</span>
<span class="linenos">63</span>
<span class="linenos">64</span><span class="w">    </span><span class="c1">//3. Section. Optionally put results into the paramsOut-vector</span>
<span class="linenos">65</span><span class="w">    </span><span class="c1">//  Make sure that you defined the corresponding parameter with right type in the corresponding parameter-method.</span>
<span class="linenos">66</span><span class="w">    </span><span class="c1">//  The implementation in the next lines is only one example and has not be defined before. Be aware of that.</span>
<span class="linenos">67</span><span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="n">paramsOut</span><span class="p">)[</span><span class="mi">0</span><span class="p">].</span><span class="n">setVal</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span><span class="p">(</span><span class="mi">2</span><span class="p">);</span><span class="w"></span>
<span class="linenos">68</span><span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="n">paramsOut</span><span class="p">)[</span><span class="mi">1</span><span class="p">].</span><span class="n">setVal</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span><span class="s">&quot;we are done&quot;</span><span class="p">);</span><span class="w"></span>
<span class="linenos">69</span>
<span class="linenos">70</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos">71</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="widget-method-gui-extensions">
<h2><span class="section-number">8.8.13.6. </span>Widget-Method (GUI-Extensions)<a class="headerlink" href="#widget-method-gui-extensions" title="Permalink to this heading">¶</a></h2>
<p>If you want to provide a user-defined window, dialog or widget (which is then rendered into a dialog), you have to
implement an appropriate method which follows this base structure:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">QWidget</span><span class="o">*</span><span class="w"> </span><span class="nf">MyAlgoPlugin::widget1</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">                               </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">                               </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retValue</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 4</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="c1">//1. Section. Getting typed in or in/out parameters from paramsMand and paramsOpt</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="c1">//   Make sure that you access only parameters, that have been defined in</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="c1">//   the corresponding parameter-method. The order and type is important. Do it</span>
<span class="linenos"> 8</span><span class="w">    </span><span class="c1">//   like in the method &#39;filter1&#39; above.</span>
<span class="linenos"> 9</span>
<span class="linenos">10</span><span class="w">    </span><span class="c1">//2. Pre-requisite: You have in your plugin project a class, which is derived</span>
<span class="linenos">11</span><span class="w">    </span><span class="c1">//   from QMainWindow, QDialog or QWidget. This class can also include an ui-file,</span>
<span class="linenos">12</span><span class="w">    </span><span class="c1">//   which has been designed using the QtDesigner. The class name is Widget1.</span>
<span class="linenos">13</span>
<span class="linenos">14</span><span class="w">    </span><span class="c1">// Create an instance of that class and return it.</span>
<span class="linenos">15</span><span class="w">    </span><span class="c1">// The instance is deleted by the caller of the method &#39;widget1&#39;.</span>
<span class="linenos">16</span><span class="w">    </span><span class="n">Widget1</span><span class="w"> </span><span class="o">*</span><span class="n">win</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">Widget</span><span class="p">(</span><span class="w"> </span><span class="cm">/* your parameters */</span><span class="w"> </span><span class="p">);</span><span class="w"></span>
<span class="linenos">17</span><span class="w">    </span><span class="n">QWidget</span><span class="w"> </span><span class="o">*</span><span class="n">widget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">qobject_cast</span><span class="o">&lt;</span><span class="n">QWidget</span><span class="o">*&gt;</span><span class="p">(</span><span class="n">win</span><span class="p">);</span><span class="w"> </span><span class="c1">//cast it to QWidget, if it isn&#39;t already.</span>
<span class="linenos">18</span><span class="w">    </span><span class="k">if</span><span class="p">(</span><span class="n">widget</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nb">NULL</span><span class="p">)</span><span class="w"></span>
<span class="linenos">19</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">20</span><span class="w">        </span><span class="n">retValue</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="p">(</span><span class="n">ito</span><span class="o">::</span><span class="n">retError</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;The widget could not be loaded&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">());</span><span class="w"></span>
<span class="linenos">21</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">22</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">widget</span><span class="p">;</span><span class="w"> </span><span class="c1">//NULL in case of error</span>
<span class="linenos">23</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The widget will then be shown if the user created it by the GUI or the widget is wrapped by an instance of the python class <strong>ui</strong>
(part of module <strong>itom</strong>). Then you can interact with elements of the widget using python like you can do it with every user interface
created with <strong>QtDesigner</strong>. You can also connect some python methods with signals of your widget or call slots of your widget. This is
also the same behaviour like dialogs have, which only have been created with <strong>QtDesigner</strong> and then loaded by an instance of class <strong>ui</strong>
using python.</p>
</section>
<section id="publish-filter-and-widget-methods-at-initialization">
<h2><span class="section-number">8.8.13.7. </span>Publish Filter- and Widget-Methods at Initialization<a class="headerlink" href="#publish-filter-and-widget-methods-at-initialization" title="Permalink to this heading">¶</a></h2>
<p>The most important step in the developement of an algorithm plugin is to publish all created filter- and widget-methods. By that process,
the methods will be made available to <strong>itom</strong>, such that they can be used by the python scripting language, the GUI or other plugins. The publishing
is done in the method <strong>init</strong> of your plugin. It is important to say, that the two different signatures of a filter method (with or without observer)
need to be published in two different ways. A exemplary implemention is as follows:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">MyAlgoPlugin::init</span><span class="p">(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 2</span><span class="w">                               </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">                               </span><span class="n">ItomSharedSemaphore</span><span class="w"> </span><span class="o">*</span><span class="n">waitCond</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 4</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 5</span><span class="w">    </span><span class="n">ItomSharedSemaphoreLocker</span><span class="w"> </span><span class="n">locker</span><span class="p">(</span><span class="n">waitCond</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 6</span>
<span class="linenos"> 7</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">retOk</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">    </span><span class="n">FilterDef</span><span class="w"> </span><span class="o">*</span><span class="n">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">    </span><span class="n">AlgoWidgetDef</span><span class="w"> </span><span class="o">*</span><span class="n">widget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nb">NULL</span><span class="p">;</span><span class="w"></span>
<span class="linenos">10</span>
<span class="linenos">11</span><span class="w">    </span><span class="c1">//publish your filter-methods here, an example for a default filter definition (without status and cancellation):</span>
<span class="linenos">12</span><span class="w">    </span><span class="n">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FilterDef</span><span class="p">(</span><span class="n">WLIfilter</span><span class="p">,</span><span class="w"> </span><span class="n">WLIfilterParams</span><span class="p">,</span><span class="w"></span>
<span class="linenos">13</span><span class="w">                </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">(),</span><span class="w">  </span><span class="c1">//description</span>
<span class="linenos">14</span><span class="w">                </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInAlgo</span><span class="o">::</span><span class="n">catNone</span><span class="p">,</span><span class="w">              </span><span class="c1">//category</span>
<span class="linenos">15</span><span class="w">                </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInAlgo</span><span class="o">::</span><span class="n">iNotSpecified</span><span class="p">,</span><span class="w">        </span><span class="c1">//interface</span>
<span class="linenos">16</span><span class="w">                </span><span class="n">QString</span><span class="p">());</span><span class="w">                           </span><span class="c1">//meta information for interface (e.g. file pattern to be loadable)</span>
<span class="linenos">17</span><span class="w">    </span><span class="n">m_filterList</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&quot;filterName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filter</span><span class="p">);</span><span class="w"></span>
<span class="linenos">18</span>
<span class="linenos">19</span><span class="w">    </span><span class="c1">//here an example for the 2nd filter definition (with status observer and cancellation):</span>
<span class="linenos">20</span><span class="w">    </span><span class="n">filter</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">FilterDefExt</span><span class="p">(</span><span class="n">WLIfilterCancellable</span><span class="p">,</span><span class="w"></span>
<span class="linenos">21</span><span class="w">                </span><span class="n">WLIfilterParams</span><span class="p">,</span><span class="w"></span>
<span class="linenos">22</span><span class="w">                </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">(),</span><span class="w"> </span><span class="c1">//description</span>
<span class="linenos">23</span><span class="w">                </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInAlgo</span><span class="o">::</span><span class="n">catNone</span><span class="p">,</span><span class="w">             </span><span class="c1">//category</span>
<span class="linenos">24</span><span class="w">                </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInAlgo</span><span class="o">::</span><span class="n">iNotSpecified</span><span class="p">,</span><span class="w">       </span><span class="c1">//interface</span>
<span class="linenos">25</span><span class="w">                </span><span class="n">QString</span><span class="p">(),</span><span class="w">                           </span><span class="c1">//meta information for interface (e.g. file pattern to be loadable)</span>
<span class="linenos">26</span><span class="w">                </span><span class="nb">true</span><span class="p">,</span><span class="w">                                </span><span class="c1">//true if filter provides status information, else false</span>
<span class="linenos">27</span><span class="w">                </span><span class="nb">true</span><span class="p">);</span><span class="w">                               </span><span class="c1">//true if filter listens to the interrupt flag</span>
<span class="linenos">28</span><span class="w">                                                   </span><span class="c1">//of the observer and allows to be interrupted earlier, else false</span>
<span class="linenos">29</span><span class="w">    </span><span class="n">m_filterList</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&quot;filterName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">filter</span><span class="p">);</span><span class="w"></span>
<span class="linenos">30</span>
<span class="linenos">31</span>
<span class="linenos">32</span><span class="w">    </span><span class="c1">//publish your dialogs, main-windows, widgets... here, example:</span>
<span class="linenos">33</span><span class="w">    </span><span class="n">widget</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">AlgoWidgetDef</span><span class="p">(</span><span class="n">widget1</span><span class="p">,</span><span class="w"> </span><span class="n">widget1Params</span><span class="p">,</span><span class="w"> </span><span class="n">tr</span><span class="p">(</span><span class="s">&quot;description&quot;</span><span class="p">).</span><span class="n">toLatin1</span><span class="p">().</span><span class="n">data</span><span class="p">(),</span><span class="w"></span>
<span class="linenos">34</span><span class="w">                                </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInAlgo</span><span class="o">::</span><span class="n">catNone</span><span class="p">,</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">AddInAlgo</span><span class="o">::</span><span class="n">iNotSpecified</span><span class="p">);</span><span class="w"></span>
<span class="linenos">35</span><span class="w">    </span><span class="n">m_algoWidgetList</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="s">&quot;widgetName&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">widget</span><span class="p">);</span><span class="w"></span>
<span class="linenos">36</span>
<span class="linenos">37</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">waitCond</span><span class="p">)</span><span class="w"></span>
<span class="linenos">38</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos">39</span><span class="w">        </span><span class="n">waitCond</span><span class="o">-&gt;</span><span class="n">returnValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos">40</span><span class="w">        </span><span class="n">waitCond</span><span class="o">-&gt;</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="linenos">41</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">42</span>
<span class="linenos">43</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos">44</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>For registering filter- and widget-methods, you have to create a new instance of the classes <strong>FilterDef</strong> /
<strong>FilterDefExt</strong> (with observer) or <strong>AlgoWidgetDef</strong> respectively and insert these newly created instances to the
maps <strong>m_filterList</strong> or <strong>m_algoWidgetList</strong> respectively. Their name in the map finally is the name of the filter
or widget and must be unique within <strong>itom</strong>; else the filter-method or widget-method can not be loaded at startup of <strong>itom</strong>.</p>
<p>The constructor of class <strong>FilterDef</strong> has the following arguments:</p>
<ul class="simple">
<li><p><em>AddInAlgo::t_filter</em> <strong>filterFunc</strong> is the pointer to the static filter-method (<em>here:</em> filter1)</p></li>
<li><p><em>AddInAlgo::t_filterParam</em> <strong>filterParamFunc</strong> is the pointer to the corresponding parameter method (<em>here:</em> filter1Params)</p></li>
<li><p><em>QString</em> <strong>description</strong> is a description string of the filter</p></li>
<li><p><em>ito::AddInAlgo::tAlgoCategory</em> <strong>category</strong> is an optional value of the category enumeration, the filter belongs too (<em>default:</em> ito::AddInAlgo::catNone)</p></li>
<li><p><em>ito::AddInAlgo::tAlgoInterface</em> <strong>interf</strong> is an optional value of the interface enumeration, the filter fits to (<em>default:</em> ito::AddInAlgo::iNotSpecified)</p></li>
<li><p><em>QString</em> <strong>interfaceMeta</strong> is depending on the chosen interface an additional meta string (<em>default:</em> QString())</p></li>
</ul>
<p>For a full reference of class <strong>FilterDef</strong>, see <a class="reference internal" href="plugin-algo-Ref.html#plugin-algo-filterdef-ref"><span class="std std-ref">FilterDef</span></a>.</p>
<p>The constructor of class <strong>FilterDefExt</strong> has the following arguments:</p>
<ul class="simple">
<li><p><em>AddInAlgo::t_filterExt</em> <strong>filterFuncExt</strong> is the pointer to the static filter2-method (with observer) (<em>here:</em> filter2)</p></li>
<li><p><em>AddInAlgo::t_filterParam</em> <strong>filterParamFunc</strong> is the pointer to the corresponding parameter method (<em>here:</em> filter1Params)</p></li>
<li><p><em>QString</em> <strong>description</strong> is a description string of the filter</p></li>
<li><p><em>ito::AddInAlgo::tAlgoCategory</em> <strong>category</strong> is an optional value of the category enumeration, the filter belongs too (<em>default:</em> ito::AddInAlgo::catNone)</p></li>
<li><p><em>ito::AddInAlgo::tAlgoInterface</em> <strong>interf</strong> is an optional value of the interface enumeration, the filter fits to (<em>default:</em> ito::AddInAlgo::iNotSpecified)</p></li>
<li><p><em>QString</em> <strong>interfaceMeta</strong> is depending on the chosen interface an additional meta string (<em>default:</em> QString())</p></li>
<li><p><em>bool</em> <strong>hasStatusInfo</strong> indicates if the filter implements code to regularily report its progress to the passed observer</p></li>
<li><p><em>bool</em> <strong>isCancellable</strong> indicates if the filter implements code to regularily check the interrupt flag of the observer and stop the algorithm as soon as it has been set (e.g. via Python)</p></li>
</ul>
<p>For a full reference of class <strong>FilterDef</strong>, see <a class="reference internal" href="plugin-algo-Ref.html#plugin-algo-filterdefext-ref"><span class="std std-ref">FilterDefExt</span></a>.</p>
<p>The constructor of class <strong>AlgoWidgetDef</strong> has the following arguments:</p>
<ul class="simple">
<li><p><em>AddInAlgo::t_algoWidget</em> <strong>algoWidgetPFunc</strong> is the pointer to the static widget-method (<em>here:</em> widget1)</p></li>
<li><p><em>AddInAlgo::t_filterParam</em> <strong>algoWidgetParamFunc</strong> is the pointer to the corresponding parameter method (<em>here:</em> widget1Params)</p></li>
<li><p><em>QString</em> <strong>description</strong> is a description string of the widget or GUI-element.</p></li>
<li><p><em>ito::AddInAlgo::tAlgoCategory</em> <strong>category</strong> is an optional value of the category enumeration, the widget-method belongs too (<em>default:</em> ito::AddInAlgo::catNone)</p></li>
<li><p><em>ito::AddInAlgo::tAlgoInterface</em> <strong>interf</strong> is an optional value of the interface enumeration, the widget-method fits to (<em>default:</em> ito::AddInAlgo::iNotSpecified)</p></li>
<li><p><em>QString</em> <strong>interfaceMeta</strong> is depending on the chosen interface an additional meta string (<em>default:</em> QString())</p></li>
</ul>
<p>For a full reference of class <strong>AlgoWidgetDef</strong>, see <a class="reference internal" href="plugin-algo-Ref.html#plugin-algo-algowidgetdef-ref"><span class="std std-ref">AlgoWidgetDef</span></a>.</p>
<p>For information about available algorithm categories and interfaces, see</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="plugin-algo-CatInterfaces.html">8.8.13.7.1. Algorithm Categories and Interfaces</a><ul>
<li class="toctree-l2"><a class="reference internal" href="plugin-algo-CatInterfaces.html#algorithm-categories">8.8.13.7.1.1. Algorithm Categories</a></li>
<li class="toctree-l2"><a class="reference internal" href="plugin-algo-CatInterfaces.html#algorithm-interfaces">8.8.13.7.1.2. Algorithm Interfaces</a><ul>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo-CatInterfaces.html#inotspecified">8.8.13.7.1.2.1. iNotSpecified</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo-CatInterfaces.html#ireaddataobject">8.8.13.7.1.2.2. iReadDataObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo-CatInterfaces.html#iwritedataobject">8.8.13.7.1.2.3. iWriteDataObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo-CatInterfaces.html#ireadpointcloud">8.8.13.7.1.2.4. iReadPointCloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo-CatInterfaces.html#iwritepointcloud">8.8.13.7.1.2.5. iWritePointCloud</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo-CatInterfaces.html#ireadpolygonmesh">8.8.13.7.1.2.6. iReadPolygonMesh</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo-CatInterfaces.html#iwritepolygonmesh">8.8.13.7.1.2.7. iWritePolygonMesh</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="plugin-algo-CatInterfaces.html#definition-of-new-algorithm-interfaces">8.8.13.7.1.3. Definition of new algorithm interfaces</a></li>
</ul>
</li>
</ul>
</div>
<p>The method-types <strong>t_filter</strong>, <strong>t_algoWidget</strong> and <strong>t_filterParam</strong> are defined by the following <em>typedef</em>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">t_filter</span><span class="p">)(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">);</span><span class="w"></span>
<span class="k">typedef</span><span class="w"> </span><span class="n">QWidget</span><span class="o">*</span><span class="w">    </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">t_algoWidget</span><span class="p">)(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="o">&amp;</span><span class="n">retValue</span><span class="p">);</span><span class="w"></span>
<span class="k">typedef</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="w"> </span><span class="n">t_filterParam</span><span class="p">)(</span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsMand</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOpt</span><span class="p">,</span><span class="w"> </span><span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">Param</span><span class="o">&gt;</span><span class="w"> </span><span class="o">*</span><span class="n">paramsOut</span><span class="p">);</span><span class="w"></span>
</pre></div>
</div>
</section>
<section id="finish-and-close-plugin">
<h2><span class="section-number">8.8.13.8. </span>Finish and close plugin<a class="headerlink" href="#finish-and-close-plugin" title="Permalink to this heading">¶</a></h2>
<p>Finally, the <strong>close</strong> method can be implemented, those structure is usually unchanged:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="linenos"> 1</span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="nf">MyAlgoPlugin::close</span><span class="p">(</span><span class="n">ItomSharedSemaphore</span><span class="w"> </span><span class="o">*</span><span class="n">waitCond</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 2</span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 3</span><span class="w">    </span><span class="n">ItomSharedSemaphoreLocker</span><span class="w"> </span><span class="n">locker</span><span class="p">(</span><span class="n">waitCond</span><span class="p">);</span><span class="w"></span>
<span class="linenos"> 4</span><span class="w">    </span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span><span class="w"> </span><span class="n">retval</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">ito</span><span class="o">::</span><span class="n">retOk</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 5</span>
<span class="linenos"> 6</span><span class="w">    </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="n">waitCond</span><span class="p">)</span><span class="w"></span>
<span class="linenos"> 7</span><span class="w">    </span><span class="p">{</span><span class="w"></span>
<span class="linenos"> 8</span><span class="w">        </span><span class="n">waitCond</span><span class="o">-&gt;</span><span class="n">returnValue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos"> 9</span><span class="w">        </span><span class="n">waitCond</span><span class="o">-&gt;</span><span class="n">release</span><span class="p">();</span><span class="w"></span>
<span class="linenos">10</span><span class="w">    </span><span class="p">}</span><span class="w"></span>
<span class="linenos">11</span>
<span class="linenos">12</span><span class="w">    </span><span class="k">return</span><span class="w"> </span><span class="n">retval</span><span class="p">;</span><span class="w"></span>
<span class="linenos">13</span><span class="p">}</span><span class="w"></span>
</pre></div>
</div>
<p>The <strong>close</strong>-method does nothing but immediately releasing the parameer <em>waitCond</em>. For more information about
<em>ItomSharedSemaphore</em>, see <a class="reference internal" href="plugin-sharedSemaphore.html#plugin-sharedsemaphore"><span class="std std-ref">ItomSharedSemaphore</span></a>.</p>
<div class="toctree-wrapper compound">
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="plugin-actuator.html" class="btn btn-neutral float-left" title="8.8.12. Plugin class - Actuator" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="plugin-algo-CatInterfaces.html" class="btn btn-neutral float-right" title="8.8.13.7.1. Algorithm Categories and Interfaces" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2011-2022, Institut fuer Technische Optik (ITO), University Stuttgart. Bug report: https://bitbucket.org/itom/itom/issues.
      <span class="lastupdated">Last updated on Jul 15, 2022.
      </span></p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>