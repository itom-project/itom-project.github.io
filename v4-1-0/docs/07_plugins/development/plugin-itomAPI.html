

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>7.8.16. itom API &mdash; itom Documentation</title>
  

  
  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="7.8.17. Link or load external libraries" href="plugin-externalLibraries.html" />
    <link rel="prev" title="7.8.15. Automatic loading and saving of plugin parameters" href="pluginAutoLoadSavePolicy.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../../index.html" class="icon icon-home"> itom Documentation
          

          
          </a>

          
            
            
              <div class="version">
                4.1.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Table of Contents</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../00_releaseNotes/whats-new.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../01_introduction/introduction.html">1. Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../02_installation/install.html">2. Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../03_gettingStarted/getting-started.html">3. Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../04_itom_gui/gui.html">4. The itom User Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../05_plots/plots.html">5. Plots and Figures</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../06_extended_gui/extended_gui.html">6. Extending the user interface of <strong>itom</strong></a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../plugins.html">7. Plugins</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../basic_concept.html">7.1. Basic concept</a></li>
<li class="toctree-l2"><a class="reference internal" href="../loading_plugins.html">7.2. Loading plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-hardware.html">7.3. How to use hardware plugins</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-grabber.html">7.4. Getting started with grabbers</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-adda.html">7.5. Getting started with A/D converters</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-actuator.html">7.6. Getting started with actuators</a></li>
<li class="toctree-l2"><a class="reference internal" href="../getstart-filter.html">7.7. Getting started with algorithm plugins (denoted as filters)</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="plugin-development.html">7.8. Development under C++</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="plugin-RetVal.html">7.8.1. <strong>RetVal</strong> - The return type of <strong>itom</strong> methods</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-sharedSemaphore.html">7.8.2. ItomSharedSemaphore</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dataObject.html">7.8.3. DataObject</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-params.html">7.8.4. Parameter-Container class of <strong>itom</strong></a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-paramsMeta.html">7.8.5. Parameters - Meta Information</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-paramsValidate.html">7.8.6. Parameters - Validation</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginStructure.html">7.8.7. Introduction to plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginInterfaceClass.html">7.8.8. Plugin interface class</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-AddInBase-Ref.html">7.8.9. AddInBase</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginClass.html">7.8.10. Plugin class - Basic information</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dataIO.html">7.8.11. Plugin class - DataIO</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-actuator.html">7.8.12. Plugin class - Actuator</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-algo.html">7.8.13. Plugin class - Algo</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginCreateCMake.html">7.8.14. Create a new plugin via CMake</a></li>
<li class="toctree-l3"><a class="reference internal" href="pluginAutoLoadSavePolicy.html">7.8.15. Automatic loading and saving of plugin parameters</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">7.8.16. itom API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#initialization">7.8.16.1. Initialization</a></li>
<li class="toctree-l4"><a class="reference internal" href="#usage">7.8.16.2. Usage</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="plugin-externalLibraries.html">7.8.17. Link or load external libraries</a></li>
<li class="toctree-l3"><a class="reference internal" href="projectSettings.html">7.8.18. Project settings for plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-dockWidget.html">7.8.19. Optional dock widget (toolbox) for hardware plugins</a></li>
<li class="toctree-l3"><a class="reference internal" href="plugin-configDialog.html">7.8.20. Optional configuration dialog for hardware plugins</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="openCVMat.html">7.9. OpenCV matrices <strong>cv::Mat</strong> and <strong>cv::Mat_</strong></a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../08_scriptLanguage/script-language.html">8. Python scripting language</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../09_reference/reference.html">9. itom Script Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../10_miscellaneous/miscellaneous.html">10. Miscellaneous</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../11_test-scripts/test-scripts.html">11. Demo scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../12_tutorials/tutorials.html">12. Python tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../13_contributing/contributing.html">13. Contributing</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">itom Documentation</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="../plugins.html"><span class="section-number">7. </span>Plugins</a> &raquo;</li>
        
          <li><a href="plugin-development.html"><span class="section-number">7.8. </span>Development under C++</a> &raquo;</li>
        
      <li><span class="section-number">7.8.16. </span>itom API</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="../../_sources/07_plugins/development/plugin-itomAPI.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="itom-api">
<span id="plugin-itomapi"></span><h1><span class="section-number">7.8.16. </span>itom API<a class="headerlink" href="#itom-api" title="Permalink to this headline">¶</a></h1>
<p>Usually, plugins only have access to the sources which are defined in the <strong>SDK</strong> of <strong>itom</strong>. These are for instance the header and
source files contained in the folder <strong>common</strong> (e.g. <strong>addInInterface.h</strong>) and in the folder <strong>plot</strong> (only relevant for developing designer
plugins (hence plots, figures…). Further, the <strong>SDK</strong> contains the header-files and corresponding libraries for the <strong>dataObject</strong> and
the <strong>pointCloud</strong> library.</p>
<p>However, it is not desired at all, that plugins also include header or source files from <strong>itom</strong> itself. The intention
is, that it should be possible to develop plugins without the need to compile <strong>itom</strong> from its sources or have the source
code available.</p>
<p>Therefore, <strong>itom</strong> provides an <strong>application programming interface</strong> (API). The API has methods defined, which give plugins the possibility
to use important functionality of <strong>itom</strong>. All available methods of the <strong>API</strong> are defined in the file <strong>apiFunctionsInc.h</strong>, that also lies
in the folder <strong>common</strong> of the SDK. For methods concerning plots and figures, there is an additional API definition
file <strong>apiFunctionsGraphInc.h</strong>.</p>
<div class="section" id="initialization">
<h2><span class="section-number">7.8.16.1. </span>Initialization<a class="headerlink" href="#initialization" title="Permalink to this headline">¶</a></h2>
<p>If your plugin or designer plugin widget is derived from classes <strong>AddInBase</strong> or <strong>AbstractFigure</strong>, which is usually the case, you need to do the
following steps in order to use the <strong>API</strong> methods:</p>
<p>Write</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="cp">#define ITOM_IMPORT_API</span>
<span class="cp">#define ITOM_IMPORT_PLOTAPI</span>
</pre></div>
</div>
<p>at the top of the main <em>cpp</em>-file of your plugin. This definition must be before the include of the corresponding header-file and any other includes.</p>
<p>The <strong>API</strong> methods then become accessible through the files <strong>apiFunctionsInc.h</strong> or <strong>apiFunctionsGraphInc.h</strong> included in the SDK of <strong>itom</strong>. These files
already are included in the file <strong>addInInterface.h</strong>. If this is included in your source file, you don’t need to include the other header files. If you use
<strong>API</strong> functions for instance in a dialog or dock widget class include <strong>apiFunctionsInc.h</strong> or <strong>apiFunctionsGraphInc.h</strong> one more time.</p>
<p>When you are programming a plugin, derived from <strong>AddInBase</strong>, you can access any <strong>API</strong>-method at any time in your plugin (even in the constructor).
When programming a designer plugin widget that is handled as plotting plugin (derived from <strong>AbstractFigure</strong>) the APIs only become valid after the
construction of your plugin.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Due to the software structure, the valid pointer is transmitted by <strong>itom</strong> sending the event with type <strong>QEvent::User+123</strong>,
that is caught by your plugin after the construction.</p>
</div>
</div>
<div class="section" id="usage">
<h2><span class="section-number">7.8.16.2. </span>Usage<a class="headerlink" href="#usage" title="Permalink to this headline">¶</a></h2>
<p>You can call the methods, defined in <strong>apiFunctionsInc.h</strong> or <strong>apiFunctionsGraphInc.h</strong> like normal function calls. In the following example, the filter <strong>saveRPM</strong>, which is defined
in another plugin should be called. Since, the mandatory, optional and output parameters of this filter are unknown, we will first request their default
values, then change their values and finally we call the filter-method. If you have knownledge about the parameters, you just can implement the second part.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">ito</span><span class="o">::</span><span class="n">RetVal</span> <span class="n">retVal</span><span class="p">;</span>
<span class="n">QVector</span><span class="o">&lt;</span><span class="n">ito</span><span class="o">::</span><span class="n">ParamBase</span><span class="o">&gt;</span> <span class="n">mandParams</span><span class="p">,</span> <span class="n">optParams</span><span class="p">,</span> <span class="n">outParams</span><span class="p">;</span> <span class="c1">//define three, empty parameter vectors</span>

<span class="c1">//now get default values</span>
<span class="n">retVal</span> <span class="o">=</span> <span class="n">apiFilterParamBase</span><span class="p">(</span><span class="s">&quot;saveRPM&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mandParams</span><span class="p">,</span><span class="o">&amp;</span><span class="n">optParams</span><span class="p">,</span><span class="o">&amp;</span><span class="n">outParams</span><span class="p">);</span>
<span class="c1">//retVal is retOk if the filter &#39;saveRPM&#39; could be found. If the external plugin does not exist, the return value is retError.</span>

<span class="c1">//change the value of some values</span>
<span class="n">mandParams</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="n">setVal</span><span class="o">&lt;</span><span class="kt">void</span><span class="o">*&gt;</span><span class="p">(</span> <span class="n">yourDataObjectPtr</span> <span class="p">);</span> <span class="c1">//set data object to save as first mandatory parameter</span>
<span class="n">mandParams</span><span class="p">[</span><span class="mi">1</span><span class="p">].</span><span class="n">setVal</span><span class="o">&lt;</span><span class="kt">char</span><span class="o">*&gt;</span><span class="p">(</span> <span class="s">&quot;C:</span><span class="se">\\</span><span class="s">test.rpm&quot;</span> <span class="p">);</span>

<span class="c1">//now call the filter</span>
<span class="n">retVal</span> <span class="o">+=</span> <span class="n">apiFilterCall</span><span class="p">(</span><span class="s">&quot;saveRPM&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">mandParams</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">optParams</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outParams</span><span class="p">);</span>

<span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">retVal</span><span class="p">.</span><span class="n">containsError</span><span class="p">())</span>
<span class="p">{</span>
    <span class="c1">//filter could be successfully executed</span>
    <span class="c1">//you can now evaluate the output parameters, if the filter provided some.</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="plugin-externalLibraries.html" class="btn btn-neutral float-right" title="7.8.17. Link or load external libraries" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="pluginAutoLoadSavePolicy.html" class="btn btn-neutral float-left" title="7.8.15. Automatic loading and saving of plugin parameters" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2011-2021, Institut fuer Technische Optik (ITO), University Stuttgart. Bug report: https://bitbucket.org/itom/itom/issues.
      <span class="lastupdated">
        Last updated on Mar 05, 2021.
      </span>

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>