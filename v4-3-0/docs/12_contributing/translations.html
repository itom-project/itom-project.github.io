
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>13.3. Translations &#8212; itom Documentation</title>



  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>

  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />


  <link href="../_static/vendor/fontawesome/6.5.2/css/all.min.css?digest=dfe6caa3a7d634c4db9b" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.2/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=d2d258e8" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-binder.css?v=f4aeca0c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-dataframe.css?v=2082cf3c" />
    <link rel="stylesheet" type="text/css" href="../_static/sg_gallery-rendered-html.css?v=1277b6f3" />
    <link rel="stylesheet" type="text/css" href="../_static/html.css?v=a585cee4" />

  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b" />
  <script src="../_static/vendor/fontawesome/6.5.2/js/all.min.js?digest=dfe6caa3a7d634c4db9b"></script>

    <script src="../_static/documentation_options.js?v=bf0e8745"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = '12_contributing/translations';</script>
    <link rel="icon" href="../_static/itomLogo3_128.png"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="13.4. Python Docstrings" href="python_docstrings.html" />
    <link rel="prev" title="13.2. Git Pre-Commit Hooks" href="git_pre_commit_hooks.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
    <meta name="docbuild:last-update" content="Nov 12, 2024"/>
  </head>


  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">



  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>

  <div id="pst-scroll-pixel-helper"></div>

  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>


  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-primary-sidebar-checkbox"/>
  <label class="overlay overlay-primary" for="pst-primary-sidebar-checkbox"></label>

  <input type="checkbox"
          class="sidebar-toggle"
          id="pst-secondary-sidebar-checkbox"/>
  <label class="overlay overlay-secondary" for="pst-secondary-sidebar-checkbox"></label>

  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search the docs ..."
         aria-label="Search the docs ..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>


    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
<div class="bd-header__inner bd-page-width">
  <button class="pst-navbar-icon sidebar-toggle primary-toggle" aria-label="Site navigation">
    <span class="fa-solid fa-bars"></span>
  </button>


  <div class="col-lg-3 navbar-header-items__start">

      <div class="navbar-item">





<a class="navbar-brand logo" href="../index.html">










    <img src="../_static/itomLogo3_128.png" class="logo__image only-light" alt="itom Documentation - Home"/>
    <script>document.write(`<img src="../_static/itomLogo3_128.png" class="logo__image only-dark" alt="itom Documentation - Home"/>`);</script>


</a></div>

  </div>

  <div class="col-lg-9 navbar-header-items">

    <div class="me-auto navbar-header-items__center">

        <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">

<li class="nav-item ">
  <a class="nav-link nav-internal" href="../00_releaseNotes/whats-new.html">
    Changelog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../01_introduction/introduction.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../02_installation/install.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../03_gettingStarted/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../04_itom_gui/gui.html">
    The itom User Interface
  </a>
</li>

            <li class="nav-item dropdown">
                <button class="btn dropdown-toggle nav-item" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-controls="pst-nav-more-links">
                    More
                </button>
                <ul id="pst-nav-more-links" class="dropdown-menu">

<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../05_plots/plots.html">
    Plots and Figures
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../06_extended_gui/extended_gui.html">
    Extending the user interface of itom
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../07_plugins/plugins.html">
    Plugins
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../08_scriptLanguage/script-language.html">
    Python Scripting Language
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../09_reference/reference.html">
    itom Script Reference
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../10_miscellaneous/miscellaneous.html">
    Miscellaneous
  </a>
</li>


<li class=" ">
  <a class="nav-link dropdown-item nav-internal" href="../11_demos/demos.html">
    Demo scripts
  </a>
</li>


<li class=" current active">
  <a class="nav-link dropdown-item nav-internal" href="contributing.html">
    Contributing
  </a>
</li>

                </ul>
            </li>

  </ul>
</nav></div>

    </div>


    <div class="navbar-header-items__end">

        <div class="navbar-item navbar-persistent--container">


 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
        </div>


        <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>

        <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">








          <a href="https://github.com/itom-project" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">








          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>

    </div>

  </div>


    <div class="navbar-persistent--mobile">

 <script>
 document.write(`
   <button class="btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script>
    </div>



    <button class="pst-navbar-icon sidebar-toggle secondary-toggle" aria-label="On this page">
      <span class="fa-solid fa-outdent"></span>
    </button>

</div>

    </header>


  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">



      <div class="bd-sidebar-primary bd-sidebar">



  <div class="sidebar-header-items sidebar-primary__section">


      <div class="sidebar-header-items__center">



            <div class="navbar-item">
<nav>
  <ul class="bd-navbar-elements navbar-nav">

<li class="nav-item ">
  <a class="nav-link nav-internal" href="../00_releaseNotes/whats-new.html">
    Changelog
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../01_introduction/introduction.html">
    Introduction
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../02_installation/install.html">
    Installation
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../03_gettingStarted/getting-started.html">
    Getting Started
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../04_itom_gui/gui.html">
    The itom User Interface
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../05_plots/plots.html">
    Plots and Figures
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../06_extended_gui/extended_gui.html">
    Extending the user interface of itom
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../07_plugins/plugins.html">
    Plugins
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../08_scriptLanguage/script-language.html">
    Python Scripting Language
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../09_reference/reference.html">
    itom Script Reference
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../10_miscellaneous/miscellaneous.html">
    Miscellaneous
  </a>
</li>


<li class="nav-item ">
  <a class="nav-link nav-internal" href="../11_demos/demos.html">
    Demo scripts
  </a>
</li>


<li class="nav-item current active">
  <a class="nav-link nav-internal" href="contributing.html">
    Contributing
  </a>
</li>

  </ul>
</nav></div>


      </div>



      <div class="sidebar-header-items__end">

          <div class="navbar-item">

<script>
document.write(`
  <button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="theme-switch fa-solid fa-sun fa-lg" data-mode="light"></i>
    <i class="theme-switch fa-solid fa-moon fa-lg" data-mode="dark"></i>
    <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"></i>
  </button>
`);
</script></div>

          <div class="navbar-item"><ul class="navbar-icon-links"
    aria-label="Icon Links">
        <li class="nav-item">








          <a href="https://github.com/itom-project" title="GitHub" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><i class="fa-brands fa-github fa-lg" aria-hidden="true"></i>
            <span class="sr-only">GitHub</span></a>
        </li>
        <li class="nav-item">








          <a href="https://www.ito.uni-stuttgart.de/" title="ITO" class="nav-link pst-navbar-icon" rel="noopener" target="_blank" data-bs-toggle="tooltip" data-bs-placement="bottom"><img src="../_static/ITO_Logo_neu_II.png" class="icon-link-image" alt="ITO"/></a>
        </li>
</ul></div>

      </div>

  </div>

    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">
<nav class="bd-docs-nav bd-links"
     aria-label="Section Navigation">
  <p class="bd-links__title" role="heading" aria-level="1">Section Navigation</p>
  <div class="bd-toc-item navbar-nav"><ul class="current nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="cmake_style_guide.html">13.1. CMake Style Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="git_pre_commit_hooks.html">13.2. Git Pre-Commit Hooks</a></li>
<li class="toctree-l1 current active"><a class="current reference internal" href="#">13.3. Translations</a></li>
<li class="toctree-l1"><a class="reference internal" href="python_docstrings.html">13.4. Python Docstrings</a></li>
</ul>
</div>
</nav></div>
    </div>


  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>

  <div id="rtd-footer-container"></div>


      </div>

      <main id="main-content" class="bd-main" role="main">


          <div class="bd-content">
            <div class="bd-article-container">

              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">

    <div class="header-article-items__start">

        <div class="header-article-item">



<nav aria-label="Breadcrumb" class="d-print-none">
  <ul class="bd-breadcrumbs">

    <li class="breadcrumb-item breadcrumb-home">
      <a href="../index.html" class="nav-link" aria-label="Home">
        <i class="fa-solid fa-home"></i>
      </a>
    </li>

    <li class="breadcrumb-item"><a href="contributing.html" class="nav-link"><span class="section-number">13. </span>Contributing</a></li>

    <li class="breadcrumb-item active" aria-current="page"><span...</li>
  </ul>
</nav>
</div>

    </div>


</div>
</div>




<div id="searchbox"></div>
                <article class="bd-article">

  <section id="translations">
<span id="id1"></span><h1><span class="section-number">13.3. </span>Translations<a class="headerlink" href="#translations" title="Link to this heading">#</a></h1>
<section id="general">
<h2><span class="section-number">13.3.1. </span>General<a class="headerlink" href="#general" title="Link to this heading">#</a></h2>
<p>The basic language of itom or its plugins is English. All strings in the source code should be
written in English.</p>
<p>itom and its plugins can be translated to different other languages using the <em class="xref py py-obj">translation system
of Qt</em>.</p>
<p>The source translation strings of the core project of itom, its libraries (part of the itom SDK), designer plugins or
plugins are stored in different ts files whose filename should follow the pattern: <strong>libraryname_langid.ts</strong>,
where <strong>libraryname</strong> is a placeholder for the corresponding library or plugin and <strong>langid</strong> is a
placeholder for the particular language.</p>
<p>The language can have the following format:</p>
<ul class="simple">
<li><p><strong>de</strong> for German</p></li>
<li><p><strong>de_DE</strong> for German / Germany</p></li>
<li><p><strong>de_CH</strong> for German / Switzerland</p></li>
<li><p><strong>ko</strong> for Korean</p></li>
</ul>
<p>For language codes (small letters) and / or country codes (capital letters)
see <a class="reference external" href="https://docs.oracle.com/cd/E13214_01/wli/docs92/xref/xqisocodes.html">https://docs.oracle.com/cd/E13214_01/wli/docs92/xref/xqisocodes.html</a>.</p>
<p>Usually the source strings (in English) of the <strong>ts</strong> files are automatically created or updated by Qt’s tool <strong>lupdate</strong>. This tool
parses all corresponding source files (h, cpp, ui), detects all translatable strings and updates the ts files.</p>
<p>The translations itself are then comfortabily done in the tool QtLinguist of Qt.</p>
<p>The <strong>ts</strong> files are then compiled using Qt’s <strong>lrelease</strong> tool into their binary representation <strong>qm</strong>. Each
<strong>qm</strong> file has the same base filename than its original <strong>ts</strong> file and is put in several <strong>translation</strong> subfolders
of the install or build folder of itom or its plugins subfolder. This qm-file compilation is automatically
done during each build of the corresponding library.</p>
<p>For starting itom with another language, choose the desired language in the <a class="reference internal" href="../04_itom_gui/propertyDialog.html#gui-propertydialog-language"><span class="std std-ref">property dialog of itom</span></a>.
Possible languages depend on the available <strong>qm</strong> translation files:</p>
</section>
<section id="adding-translations-for-the-itom-core-project">
<h2><span class="section-number">13.3.2. </span>Adding translations for the itom core project<a class="headerlink" href="#adding-translations-for-the-itom-core-project" title="Link to this heading">#</a></h2>
<p>Adding new or existing translations for different languages to the itom core project or some
of its plugins or designerplugins is usually done
in the CMake configuration process.</p>
<p>Select the desired language codes (see above) as semicolon-separated string to the CMake variable
<strong>ITOM_LANGUAGES</strong>. Since English is the default language, never add <strong>en</strong> to this string.</p>
<p>Example:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="no">ITOM_LANGUAGES</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">de</span><span class="p">;</span><span class="nb">fr</span>
<span class="c">#this includes translations for German and French (in addition to English)</span>
</pre></div>
</div>
<p>If you press <strong>Configure</strong> in CMake after having changed the <strong>ITOM_LANGUAGES</strong> variable, CMake checks
if the corresponding <strong>ts</strong> files are available for all desired languages and all translatable libraries, that
belong to the itom core project.</p>
<p>There is one common CMake error message, that might occur when setting new languages:</p>
<p>Error (ITOM_LANGUAGES = it):</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">CMake</span><span class="w"> </span><span class="nb">Error</span><span class="w"> </span><span class="nb">at</span><span class="w"> </span><span class="na">cmake/ItomBuildMacros.cmake</span><span class="o">:</span><span class="nf">664</span> <span class="nf">(</span><span class="no">MESSAGE</span><span class="nf">)</span><span class="o">:</span>
<span class="w">  </span><span class="nb">Source</span><span class="w"> </span><span class="nb">translation</span><span class="w"> </span><span class="nb">file</span>
<span class="w">  </span><span class="err">&#39;</span><span class="no">C</span><span class="o">:</span><span class="na">/itom/sources/itom/Qitom/translation/qitom_it.ts</span><span class="err">&#39;</span><span class="w"> </span><span class="nb">for</span><span class="w"> </span><span class="nb">language</span><span class="w"> </span><span class="err">&#39;</span><span class="nb">it</span><span class="w"> </span><span class="nb">is</span>
<span class="w">  </span><span class="nb">missing.</span><span class="w">  </span><span class="nb">Please</span><span class="w"> </span><span class="nb">create</span><span class="w"> </span><span class="nb">this</span><span class="w"> </span><span class="nb">file</span><span class="w"> </span><span class="nb">first</span><span class="w"> </span><span class="nb">or</span><span class="w"> </span><span class="nb">set</span><span class="w"> </span><span class="no">ITOM_UPDATE_TRANSLATIONS</span><span class="w"> </span><span class="nb">to</span>
<span class="w">  </span><span class="no">ON</span>
<span class="nb">Call</span><span class="w"> </span><span class="nf">Stack</span> <span class="nf">(</span><span class="nb">most</span><span class="w"> </span><span class="nb">recent</span><span class="w"> </span><span class="nb">call</span><span class="w"> </span><span class="nb">first</span><span class="nf">)</span><span class="o">:</span>
<span class="w">  </span><span class="na">Qitom/CMakeLists.txt</span><span class="o">:</span><span class="nf">759</span> <span class="nf">(</span><span class="nb">itom_library_translation</span><span class="nf">)</span>
</pre></div>
</div>
<p>CMake could not find the relevant Italian translation file <strong>qitom_it.ts</strong>. Since the additional CMake
variable <strong>ITOM_UPDATE_TRANSLATIONS</strong> is likely to be set to <strong>OFF</strong>, itom is not allowed to automatically
create an initial version of this file, such that the error is raised.</p>
<p><strong>Solution:</strong> Set <strong>ITOM_UPDATE_TRANSLATIONS</strong> to <strong>ON</strong> if you add new languages. Then a bare version of
a <strong>ts</strong> file is created for each non-existing language and Qt’s <strong>lupdate</strong> process is triggered when
building each library. This also affects all existing <strong>ts</strong> file, such that they are also updated by new
translatable strings in the source code.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>It is not recommended to manually create a new ts-file for a new language by copying an existing ts-file
from another language, since each ts-file contains xml-content with the language ID as subcontent. If this
language ID does not fit to the suffix of the filename, the <strong>lupdate</strong> process to update the translatable
strings in this file will fail.</p>
</div>
</section>
<section id="updating-or-creating-new-ts-files">
<h2><span class="section-number">13.3.3. </span>Updating or creating new ts-files<a class="headerlink" href="#updating-or-creating-new-ts-files" title="Link to this heading">#</a></h2>
<p>Usually, the itom build process does not influence any ts-files during the build, hence, no-existing ts-files
are not updated nor new ts-files for new languages in the CMake variable <strong>ITOM_LANGAUGES</strong> are created. However
the binary compilation of qm-files from existing ts-files is always started when building the particular
library.</p>
<p>The source translation update process can be triggered and controlled by the two boolean CMake variables
<strong>ITOM_UPDATE_TRANSLATIONS</strong> and <strong>ITOM_UPDATE_TRANSLATIONS_REMOVE_UNUSED_STRINGS</strong>.</p>
<p>Set <strong>ITOM_UPDATE_TRANSLATIONS</strong> to force the itom (or plugins) build process to always update or
create the <strong>ts</strong>-files for all desired languages (based on <strong>ITOM_LANGAUGES</strong>) using the tool
<strong>lupdate</strong> of Qt. This is done by a special build project, whose name is equal to the corresponding
library, followed by the suffix <strong>_translation</strong> (e.g. <strong>itomCommonQtLib_translation</strong> for the library
<strong>itomCommonQtLib</strong>. The original library project depends on its <em>_translation</em>-project, such that this
is always created before the library itself.</p>
<p>Usually, the <strong>lupdate</strong> tool parses all header, source and user-interface files of the library for translatable
strings and adds them to the <strong>ts</strong> file, if they do not exist yet. However <strong>lupdate</strong> does not remove unused
strings from the <strong>ts</strong> file. This can be changed by also setting <strong>ITOM_UPDATE_TRANSLATIONS_REMOVE_UNUSED_STRINGS</strong> to
<strong>ON</strong>.</p>
<p>Please commit all changed <strong>ts</strong> files to the Git repository of the corresponding library (or plugin).</p>
<p>If <strong>ITOM_UPDATE_TRANSLATIONS</strong> is <strong>ON</strong> and a <strong>ts</strong> file has a wrong format, the following CMake
error might occur:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="nb">CMake</span><span class="w"> </span><span class="nb">Warning</span><span class="w"> </span><span class="nb">at</span><span class="w"> </span><span class="na">cmake/ItomBuildMacros.cmake</span><span class="o">:</span><span class="nf">745</span> <span class="nf">(</span><span class="nb">message</span><span class="nf">)</span><span class="o">:</span>
<span class="w">  </span><span class="p">-</span><span class="w"> </span><span class="nb">The</span><span class="w"> </span><span class="nb">existing</span><span class="w"> </span><span class="nb">ts-file</span>
<span class="w">  </span><span class="no">C</span><span class="o">:</span><span class="na">/itom/sources/itom/AddInManager/translation/addinmanager_fr.ts</span><span class="w"> </span><span class="nb">does</span><span class="w"> </span><span class="nb">not</span>
<span class="w">  </span><span class="nb">contain</span><span class="w"> </span><span class="nb">the</span><span class="w"> </span><span class="nb">required</span><span class="w"> </span><span class="nb">language</span><span class="w"> </span><span class="err">&#39;</span><span class="nb">fr</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="nb">but</span><span class="w"> </span><span class="err">&#39;</span><span class="nb">de</span><span class="err">&#39;</span><span class="p">.</span><span class="w">  </span><span class="nb">The</span><span class="w"> </span><span class="nb">lupdate</span><span class="w"> </span><span class="nb">process</span><span class="w"> </span><span class="nb">might</span>
<span class="w">  </span><span class="nb">fail.</span><span class="w">  </span><span class="nb">Either</span><span class="w"> </span><span class="nb">fix</span><span class="w"> </span><span class="nb">the</span><span class="w"> </span><span class="nb">file</span><span class="w"> </span><span class="nb">or</span><span class="w"> </span><span class="nb">delete</span><span class="w"> </span><span class="nb">it</span><span class="w"> </span><span class="nb">and</span><span class="w"> </span><span class="nb">re-configure</span><span class="w"> </span><span class="nb">to</span><span class="w"> </span><span class="nb">let</span><span class="w"> </span><span class="nb">CMake</span>
<span class="w">  </span><span class="nb">rebuild</span><span class="w"> </span><span class="nb">an</span><span class="w"> </span><span class="nb">empty</span><span class="p">,</span><span class="w"> </span><span class="nb">proper</span><span class="w"> </span><span class="nb">ts</span><span class="w"> </span><span class="nb">file.</span>
<span class="nb">Call</span><span class="w"> </span><span class="nf">Stack</span> <span class="nf">(</span><span class="nb">most</span><span class="w"> </span><span class="nb">recent</span><span class="w"> </span><span class="nb">call</span><span class="w"> </span><span class="nb">first</span><span class="nf">)</span><span class="o">:</span>
<span class="w">  </span><span class="na">cmake/ItomBuildMacros.cmake</span><span class="o">:</span><span class="nf">656</span> <span class="nf">(</span><span class="nb">itom_qt5_create_translation</span><span class="nf">)</span>
<span class="w">  </span><span class="na">AddInManager/CMakeLists.txt</span><span class="o">:</span><span class="nf">96</span> <span class="nf">(</span><span class="nb">itom_library_translation</span><span class="nf">)</span>
</pre></div>
</div>
<p>In this case, the translation system expected a french translation file <strong>addinmanager_fr.ts</strong>, however the
file was a copy from the german version <strong>addinmanager_de.ts</strong>, such that the internal xml content of the
file was invalid. If this happens, <strong>lupdate</strong> will fail later. To fix this, remove the file and run CMake
again or fix the content of the file.</p>
</section>
<section id="location-of-ts-files">
<h2><span class="section-number">13.3.4. </span>Location of ts-files<a class="headerlink" href="#location-of-ts-files" title="Link to this heading">#</a></h2>
<p>Usually the ts-files are always located in a <strong>translation</strong> subfolder of the sources
of the wrapped library. These are for the itom core project:</p>
<ul class="simple">
<li><p>sources/itom/AddInManager/translation</p></li>
<li><p>sources/itom/itomCommonQt/translation</p></li>
<li><p>sources/itom/itomWidgets/translation</p></li>
<li><p>sources/itom/plot/translation</p></li>
<li><p>sources/itom/shape/translation</p></li>
<li><p>sources/itom/qitom/translation</p></li>
</ul>
<p>The translation files for plugins are always located in a subfolder <strong>translation</strong> of
the particular plugin sources. The same holds for designerplugins.</p>
<p>When deploying itom, the qm-files are located in the following folders:</p>
<ul class="simple">
<li><p>itom core project: itom-subfolder <strong>translation</strong></p></li>
<li><p>designer plugins: itom-subfolder <strong>designer/translation</strong></p></li>
<li><p>plugin (name: targetname): itom-subfolder <strong>plugins/&lt;targetname&gt;/translation</strong></p></li>
</ul>
</section>
<section id="translating-plugins-or-designerplugins">
<h2><span class="section-number">13.3.5. </span>Translating plugins or designerplugins<a class="headerlink" href="#translating-plugins-or-designerplugins" title="Link to this heading">#</a></h2>
<p>While the itom core project can directly be translated by setting the mentioned CMake variables
<strong>ITOM_LANGUAGES</strong>, <strong>ITOM_UPDATE_TRANSLATIONS</strong> and optionally <strong>ITOM_UPDATE_TRANSLATIONS_REMOVE_UNUSED_STRINGS</strong>,
some additional steps have to be done for translating plugins and / or designerplugins.</p>
<p>Besides configuring the mentioned CMake variables, you also have to set the following exemplary
lines into the CMakeLists.txt file of the particular plugin:</p>
<div class="highlight-cmake notranslate"><div class="highlight"><pre><span></span><span class="c">#translation</span>
<span class="nf">set(</span><span class="no">FILES_TO_TRANSLATE</span><span class="w"> </span><span class="o">${</span><span class="nt">PLUGIN_SOURCES</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nt">PLUGIN_HEADERS</span><span class="o">}</span><span class="w"> </span><span class="o">${</span><span class="nt">PLUGIN_UI</span><span class="o">}</span><span class="nf">)</span>
<span class="nf">itom_library_translation(</span><span class="no">QM_FILES</span><span class="w"> </span><span class="no">TARGET</span><span class="w"> </span><span class="o">${</span><span class="nt">target_name</span><span class="o">}</span><span class="w"> </span><span class="no">FILES_TO_TRANSLATE</span><span class="w"> </span><span class="o">${</span><span class="nt">FILES_TO_TRANSLATE</span><span class="o">}</span><span class="nf">)</span>
</pre></div>
</div>
<p>The <strong>FILES_TO_TRANSLATE</strong> list will contain all source (cpp), header (h) or user interface (ui) files,
that should be parsed for new files. The translation project itself will be created by the itom macro
<strong>itom_library_translation</strong>, provided by <strong>ItomBuildMacros.cmake</strong>. This will then create ts
files in a <strong>translation</strong> subfolder of the plugin source folder whose particular names are <strong>targetname_langid.ts</strong>,
where <strong>targetname</strong> corresponds to the project name of the plugin and <strong>langid</strong> is each language ID, contained
in the semicolon-separated list <strong>ITOM_LANGUAGES</strong>.</p>
</section>
</section>


                </article>





                <footer class="prev-next-footer d-print-none">

<div class="prev-next-area">
    <a class="left-prev"
       href="git_pre_commit_hooks.html"
       title="previous page">
      <i class="fa-solid fa-angle-left"></i>
      <div class="prev-next-info">
        <p class="prev-next-subtitle">previous</p>
        <p class="prev-next-title"><span class="section-number">13.2. </span>Git Pre-Commit Hooks</p>
      </div>
    </a>
    <a class="right-next"
       href="python_docstrings.html"
       title="next page">
      <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title"><span class="section-number">13.4. </span>Python Docstrings</p>
      </div>
      <i class="fa-solid fa-angle-right"></i>
    </a>
</div>
                </footer>

            </div>



                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
<div
    id="pst-page-navigation-heading-2"
    class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> On this page
  </div>
  <nav class="bd-toc-nav page-toc" aria-labelledby="pst-page-navigation-heading-2">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#general">13.3.1. General</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#adding-translations-for-the-itom-core-project">13.3.2. Adding translations for the itom core project</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#updating-or-creating-new-ts-files">13.3.3. Updating or creating new ts-files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#location-of-ts-files">13.3.4. Location of ts-files</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#translating-plugins-or-designerplugins">13.3.5. Translating plugins or designerplugins</a></li>
</ul>
  </nav></div>

  <div class="sidebar-secondary-item">

  <div class="tocsection sourcelink">
    <a href="../_sources/12_contributing/translations.rst.txt">
      <i class="fa-solid fa-file-lines"></i> Show Source
    </a>
  </div>
</div>

</div></div>


          </div>
          <footer class="bd-footer-content">

          </footer>

      </main>
    </div>
  </div>

  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=dfe6caa3a7d634c4db9b"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=dfe6caa3a7d634c4db9b"></script>

  <footer class="bd-footer">
<div class="bd-footer__inner bd-page-width">

    <div class="footer-items__start">

        <div class="footer-item">

  <p class="copyright">

      © Copyright 2011-2024, Institut für Technische Optik (ITO), Universität Stuttgart. Bug report: https://github.com/itom-project/itom/issues.
      <br/>

  </p>
</div>

        <div class="footer-item">

  <p class="sphinx-version">
    Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.1.3.
    <br/>
  </p>
</div>

    </div>



    <div class="footer-items__end">

        <div class="footer-item">
<p class="theme-version">
  Built with the <a href="https://pydata-sphinx-theme.readthedocs.io/en/stable/index.html">PyData Sphinx Theme</a> 0.15.4.
</p></div>

    </div>

</div>

  </footer>
  </body>
</html>
